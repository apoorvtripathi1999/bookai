language client is not ready, cannot initialize chat state
I0413 00:08:37.627024    1805 serve.go:43] cloudcode_cli (Mar 25 2025 19:59:47 -0700, cl:740584268 baseline:740583863)
I0413 00:08:37.627166    1805 serve.go:44] Command line: ["/home/apoorvtripathi537/.cache/cloud-code/cloudcode_cli/cloudcode_cli/413fde1b/cloudcode_cli" "duet" "-logtostderr"]
I0413 00:08:37.629187    1805 life_cycle.go:182] Initializing. Architecture: "amd64", Operating system: "linux"
I0413 00:08:37.774374    1805 configuration.go:185] product updateChannel will be used
I0413 00:08:37.774436    1805 configuration.go:686] language thresholds: map[]
I0413 00:08:37.774457    1805 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 00:08:37.774482    1805 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc0017c323d StopSequences:map[] DataFilePromptLines:0}
I0413 00:08:37.774517    1805 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc0017c325d StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 00:08:37.774652    1805 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 00:08:37.774790    1805 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 00:08:37.774814    1805 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 00:08:37.774863    1805 configuration.go:293] Configured settings for canCancelRequests: true
I0413 00:08:37.774873    1805 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 00:08:37.799197    1805 handler.go:159] cancel was requested for: 1, needs to be canceled: false
I0413 00:08:37.799225    1805 handler.go:163] cancel requested for 1 but not found
I0413 00:08:38.558839    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 00:08:38.558883    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 00:08:38.558905    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 00:08:38.558924    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 00:08:38.558941    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 00:08:38.558954    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 00:08:38.558970    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 00:08:38.558984    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 00:08:38.559000    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 00:08:38.559030    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 00:08:38.559043    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 00:08:38.559081    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 00:08:38.559096    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 00:08:38.559114    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 00:08:38.559134    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 00:08:38.559146    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 00:08:38.559157    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 00:08:38.559168    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 00:08:38.559182    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 00:08:38.559196    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 00:08:38.559210    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 00:08:38.559229    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 00:08:38.559243    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 00:08:38.559254    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 00:08:38.559269    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 00:08:38.559287    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 00:08:38.559305    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 00:08:38.559328    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 00:08:38.559424    1805 tier.go:17] Received tier configuration request: {ProjectID:cloudshell-gca UserDefinedCloudaicompanionProject:true}
I0413 00:08:38.566363    1805 configuration.go:185] product updateChannel will be used
I0413 00:08:38.566605    1805 configuration.go:686] language thresholds: map[]
I0413 00:08:38.566637    1805 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 00:08:38.566662    1805 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc0017f142d StopSequences:map[] DataFilePromptLines:0}
I0413 00:08:38.566694    1805 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc0017f144d StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 00:08:38.566736    1805 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 00:08:38.566751    1805 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 00:08:38.566759    1805 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:true enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 00:08:38.566798    1805 configuration.go:293] Configured settings for canCancelRequests: true
I0413 00:08:38.566808    1805 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 00:08:38.567736    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 00:08:38.567768    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 00:08:38.567788    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 00:08:38.567805    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 00:08:38.567823    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 00:08:38.567835    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 00:08:38.567851    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 00:08:38.567867    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 00:08:38.567881    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 00:08:38.567905    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 00:08:38.567923    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 00:08:38.567939    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 00:08:38.567956    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 00:08:38.567973    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 00:08:38.567990    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 00:08:38.568003    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 00:08:38.568015    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 00:08:38.568028    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 00:08:38.568042    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 00:08:38.568074    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 00:08:38.568088    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 00:08:38.568119    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 00:08:38.568138    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 00:08:38.568150    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 00:08:38.568167    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 00:08:38.568183    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 00:08:38.568201    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 00:08:38.568222    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 00:08:38.570236    1805 cloudcode.go:45] Using Cloud Code API
I0413 00:08:38.573724    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"segments":[{"content":"Code Assist healthcheck id: 09f7124f-d0c1-4f81-8516-1be8af1180da\nPi = "},{"isSelected":true},{}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-fc9ed39a-2ead-4847-891c-a85cb5fed552"}
I0413 00:08:38.915539    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 00:08:38.915572    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 00:08:38.915597    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 00:08:38.915615    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 00:08:38.915633    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 00:08:38.915654    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 00:08:38.915673    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 00:08:38.915691    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 00:08:38.915705    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 00:08:38.915732    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 00:08:38.915746    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 00:08:38.915765    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 00:08:38.915782    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 00:08:38.915803    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 00:08:38.915824    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 00:08:38.915838    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 00:08:38.915851    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 00:08:38.915862    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 00:08:38.915876    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 00:08:38.915892    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 00:08:38.915904    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 00:08:38.915923    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 00:08:38.915939    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 00:08:38.915952    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 00:08:38.915968    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 00:08:38.915987    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 00:08:38.916007    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 00:08:38.916038    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 00:08:38.970132    1805 tier.go:17] Received tier configuration request: {ProjectID:cloudshell-gca UserDefinedCloudaicompanionProject:true}
I0413 00:08:38.979434    1805 configuration.go:185] product updateChannel will be used
I0413 00:08:38.979489    1805 configuration.go:686] language thresholds: map[]
I0413 00:08:38.979507    1805 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 00:08:38.979525    1805 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000b6b25d StopSequences:map[] DataFilePromptLines:0}
I0413 00:08:38.979552    1805 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000b6b30d StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 00:08:38.979584    1805 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 00:08:38.979598    1805 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 00:08:38.979606    1805 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:true enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 00:08:38.979633    1805 configuration.go:293] Configured settings for canCancelRequests: true
I0413 00:08:38.979640    1805 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 00:08:38.981034    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 00:08:38.981081    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 00:08:38.981095    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 00:08:38.981109    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 00:08:38.981122    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 00:08:38.981130    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 00:08:38.981140    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 00:08:38.981151    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 00:08:38.981160    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 00:08:38.981178    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 00:08:38.981188    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 00:08:38.981200    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 00:08:38.981210    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 00:08:38.981222    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 00:08:38.981234    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 00:08:38.981242    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 00:08:38.981250    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 00:08:38.981258    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 00:08:38.981266    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 00:08:38.981276    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 00:08:38.981284    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 00:08:38.981331    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 00:08:38.981351    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 00:08:38.981363    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 00:08:38.981378    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 00:08:38.981396    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 00:08:38.981414    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 00:08:38.981435    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 00:08:38.982777    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"segments":[{"content":"Code Assist healthcheck id: 3fcce5fa-e1da-42b9-82f1-040693b8b3cd\nPi = "},{"isSelected":true},{}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-494eb579-00dd-4786-ba9f-ab7d3db89dcb"}
I0413 00:08:53.264195    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:08:53.264264    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:08:53.264344    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:08:53.264508    1805 conversation.go:950] Unable to retrieve excluded files for request #14: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:08:54.795346    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:08:54.795385    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:08:54.795419    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:08:54.795430    1805 conversation.go:950] Unable to retrieve excluded files for request #18: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:08:55.475084    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:08:55.475141    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:08:55.475187    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:08:55.475201    1805 conversation.go:950] Unable to retrieve excluded files for request #21: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:08:57.216970    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:08:57.217015    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:08:57.217067    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:08:57.217112    1805 conversation.go:950] Unable to retrieve excluded files for request #24: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:08:58.298027    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:08:58.298125    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:08:58.298174    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:08:58.298190    1805 conversation.go:950] Unable to retrieve excluded files for request #29: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:08:58.298220    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:09:03.252003    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:09:03.252112    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:09:03.252230    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:09:03.252248    1805 conversation.go:950] Unable to retrieve excluded files for request #34: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:09:04.381571    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:09:04.381769    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:09:04.381856    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:09:04.381875    1805 conversation.go:950] Unable to retrieve excluded files for request #37: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:10:31.538224    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:10:31.538278    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:10:31.538330    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:10:31.538346    1805 conversation.go:950] Unable to retrieve excluded files for request #39: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:10:32.447135    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:10:32.447182    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:10:32.447220    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:10:32.447235    1805 conversation.go:950] Unable to retrieve excluded files for request #42: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:18.129659    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:18.129705    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:18.129750    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:18.129767    1805 conversation.go:950] Unable to retrieve excluded files for request #46: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:21.553956    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:21.554022    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:21.554122    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:21.554143    1805 conversation.go:950] Unable to retrieve excluded files for request #49: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:31.579429    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:31.579482    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:31.579528    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:31.579541    1805 conversation.go:950] Unable to retrieve excluded files for request #53: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:31.825035    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:31.825131    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:31.825166    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:31.825177    1805 conversation.go:950] Unable to retrieve excluded files for request #55: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:35.503141    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:35.503188    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:35.503233    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:35.503246    1805 conversation.go:950] Unable to retrieve excluded files for request #59: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:37.486852    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:37.486896    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:37.486929    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:37.486938    1805 conversation.go:950] Unable to retrieve excluded files for request #63: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:37.718571    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:37.718621    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:37.718663    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:37.718679    1805 conversation.go:950] Unable to retrieve excluded files for request #65: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:39.556448    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:39.556520    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:39.556572    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:39.556586    1805 conversation.go:950] Unable to retrieve excluded files for request #70: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:39.779213    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:39.779270    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:39.779314    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:39.779332    1805 conversation.go:950] Unable to retrieve excluded files for request #72: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:42.439624    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:42.439677    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:42.439719    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:42.439733    1805 conversation.go:950] Unable to retrieve excluded files for request #78: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:11:42.667973    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:11:42.668084    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:11:42.668140    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:11:42.668157    1805 conversation.go:950] Unable to retrieve excluded files for request #80: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:11.117237    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:11.117292    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:12:11.117332    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:11.117357    1805 conversation.go:950] Unable to retrieve excluded files for request #83: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:13.910584    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:13.910631    1805 document.go:444] NoneEditType, returning ReasonRecentlyOpened
I0413 00:12:13.910664    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:13.910674    1805 conversation.go:950] Unable to retrieve excluded files for request #86: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 0 - New completion requested from language client at position {"line":138,"character":1}, triggerKind=1
I0413 00:12:15.614564    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:15.675738    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:15.675793    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:15.675843    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:15.675865    1805 conversation.go:950] Unable to retrieve excluded files for request #89: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:15.915251    1805 completion.go:236] Inline suggestion requested (request #88): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:0}
I0413 00:12:15.917413    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n "},{"isSelected":true},{"content":"\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-7ab6745f-2eb3-4c68-85eb-2898fd2a7586"}
I0413 00:12:16.044110    1805 handler.go:159] cancel was requested for: 88, needs to be canceled: true
I0413 00:12:16.188744    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:16.188800    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.188851    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:16.188864    1805 conversation.go:950] Unable to retrieve excluded files for request #93: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 1 - New completion requested from language client at position {"line":138,"character":9}, triggerKind=1
I0413 00:12:16.278627    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.336828    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:16.336879    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.336932    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:16.336946    1805 conversation.go:950] Unable to retrieve excluded files for request #100: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:16.539320    1805 handler.go:159] cancel was requested for: 99, needs to be canceled: true
Completion Provider - completion # 2 - New completion requested from language client at position {"line":138,"character":10}, triggerKind=1
I0413 00:12:16.573759    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.638266    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:16.638320    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.638366    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:16.638384    1805 conversation.go:950] Unable to retrieve excluded files for request #103: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:16.774109    1805 handler.go:159] cancel was requested for: 102, needs to be canceled: true
Completion Provider - completion # 3 - New completion requested from language client at position {"line":138,"character":11}, triggerKind=1
I0413 00:12:16.816176    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.873306    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:16.873365    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:16.873406    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:16.873416    1805 conversation.go:950] Unable to retrieve excluded files for request #106: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:16.991728    1805 handler.go:159] cancel was requested for: 105, needs to be canceled: true
Completion Provider - completion # 4 - New completion requested from language client at position {"line":138,"character":12}, triggerKind=1
I0413 00:12:17.022356    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:17.091149    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:17.091203    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:17.091247    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:17.091257    1805 conversation.go:950] Unable to retrieve excluded files for request #109: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:17.176448    1805 handler.go:159] cancel was requested for: 108, needs to be canceled: true
Completion Provider - completion # 5 - New completion requested from language client at position {"line":138,"character":13}, triggerKind=1
I0413 00:12:17.208697    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:17.275499    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:17.275551    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:17.275589    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:17.275599    1805 conversation.go:950] Unable to retrieve excluded files for request #112: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:17.509894    1805 completion.go:236] Inline suggestion requested (request #111): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:13}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:5}
I0413 00:12:17.511790    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n             "},{"isSelected":true},{"content":"\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-c047b032-9f78-46c0-ae85-ea16972689e1"}
I0413 00:12:17.775404    1805 handler.go:159] cancel was requested for: 111, needs to be canceled: true
Completion Provider - completion # 6 - New completion requested from language client at position {"line":138,"character":12}, triggerKind=1
I0413 00:12:17.806960    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:12:17.873469    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:17.873522    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:12:17.873567    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:17.873581    1805 conversation.go:950] Unable to retrieve excluded files for request #115: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:18.108128    1805 completion.go:236] Inline suggestion requested (request #114): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:6}
Completion Provider - completion # 6 - Completion result obtained from language client
Completion Provider - completion # 7 - New completion requested from language client at position {"line":138,"character":13}, triggerKind=1
I0413 00:12:18.566030    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:18.624397    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:18.624566    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:18.624646    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:18.624668    1805 conversation.go:950] Unable to retrieve excluded files for request #119: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:18.723271    1805 handler.go:159] cancel was requested for: 118, needs to be canceled: true
Completion Provider - completion # 8 - New completion requested from language client at position {"line":138,"character":14}, triggerKind=1
I0413 00:12:18.796425    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:18.861619    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:18.861662    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:18.861696    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:18.861706    1805 conversation.go:950] Unable to retrieve excluded files for request #123: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:18.935322    1805 handler.go:159] cancel was requested for: 122, needs to be canceled: true
Completion Provider - completion # 9 - New completion requested from language client at position {"line":138,"character":15}, triggerKind=1
I0413 00:12:18.966887    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.032789    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:19.032841    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.032899    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:19.032913    1805 conversation.go:950] Unable to retrieve excluded files for request #127: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:19.151934    1805 handler.go:159] cancel was requested for: 126, needs to be canceled: true
Completion Provider - completion # 10 - New completion requested from language client at position {"line":138,"character":16}, triggerKind=1
I0413 00:12:19.184036    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.251772    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:19.251832    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.251884    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:19.251898    1805 conversation.go:950] Unable to retrieve excluded files for request #131: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:19.280035    1805 handler.go:159] cancel was requested for: 130, needs to be canceled: true
Completion Provider - completion # 11 - New completion requested from language client at position {"line":138,"character":17}, triggerKind=1
I0413 00:12:19.315161    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.377784    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:19.377841    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:19.377889    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:19.377904    1805 conversation.go:950] Unable to retrieve excluded files for request #135: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:19.615968    1805 completion.go:236] Inline suggestion requested (request #134): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:17}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:11}
I0413 00:12:19.617451    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print"},{"isSelected":true},{"content":"\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c"}
I0413 00:12:19.879493    1805 completion.go:609] Code complete response for request #134 after post-processing: &{Suggestions:[{Content:(data) Citations:[] PromptCitations:[] Score:-1.6977562 Telemetry:{CommentLines:<nil>}} {Content:(data)
 Citations:[] PromptCitations:[] Score:-2.5376024 Telemetry:{CommentLines:<nil>}}] TraceID:220632e8438dc300 RequestID:cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c ServerTiming:gfet5t7;dur=215, gfet4t7; dur=260 NetPlusServerTiming:261.930457ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 11 - Completion result obtained from language client
Completion Provider - completion # 12 - New completion requested from language client at position {"line":138,"character":17}, triggerKind=1
I0413 00:12:20.182814    1805 document.go:448] OtherEditType (INTELLISENSE), returning ReasonRecentlyEdited
I0413 00:12:20.483514    1805 completion.go:236] Inline suggestion requested (request #137): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:17}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:12}
I0413 00:12:20.485419    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[{Content:(data) Citations:[] PromptCitations:[] Score:-1.6977562 Telemetry:{CommentLines:<nil>}} {Content:(data)
 Citations:[] PromptCitations:[] Score:-2.5376024 Telemetry:{CommentLines:<nil>}}] TraceID:220632e8438dc300 RequestID:cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:12:20.485501    1805 completion.go:609] Code complete response for request #137 after post-processing: &{Suggestions:[{Content:(data) Citations:[] PromptCitations:[] Score:-1.6977562 Telemetry:{CommentLines:<nil>}} {Content:(data)
 Citations:[] PromptCitations:[] Score:-2.5376024 Telemetry:{CommentLines:<nil>}}] TraceID:220632e8438dc300 RequestID:cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 12 - Completion result obtained from language client
I0413 00:12:21.981618    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c","acceptedSuggestion":"(data)","acceptedChars":6,"partial":false}
Completion Provider - completion # 12 - Typed over previous completion
W0413 00:12:22.016949    1805 command.go:131] Failed to update basic retention info: completion already fully accepted for IDESessionIndex=20250413_1, CompletionIndex=12
I0413 00:12:22.016988    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-3d49ed58-bd7c-4397-bca4-18b4c687ca3c","acceptedSuggestion":"(data)\n            ","acceptedChars":6,"partial":true}
I0413 00:12:22.078984    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:22.079042    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:12:22.079101    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:22.079114    1805 conversation.go:950] Unable to retrieve excluded files for request #142: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:23.979032    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:23.979108    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:12:23.979143    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:23.979158    1805 conversation.go:950] Unable to retrieve excluded files for request #147: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 13 - New completion requested from language client at position {"line":138,"character":23}, triggerKind=1
I0413 00:12:25.684081    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:25.749168    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:25.749212    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:25.749241    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:25.749256    1805 conversation.go:950] Unable to retrieve excluded files for request #151: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:25.985320    1805 completion.go:236] Inline suggestion requested (request #150): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:23}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:13}
I0413 00:12:25.986896    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","INTELLISENSE","COMPLETION","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data+"},{"isSelected":true},{"content":")\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-a37219b5-cdb2-4902-b93f-9eacc7bd7969"}
I0413 00:12:26.196642    1805 completion.go:609] Code complete response for request #150 after post-processing: &{Suggestions:[{Content:'\n' Citations:[] PromptCitations:[] Score:-1.8312423 Telemetry:{CommentLines:<nil>}}] TraceID:a561f112b4bff9a1 RequestID:cloudcode-740584268-a37219b5-cdb2-4902-b93f-9eacc7bd7969 ServerTiming:gfet5t7;dur=165, gfet4t7; dur=207 NetPlusServerTiming:209.647364ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 13 - Completion result obtained from language client
Completion Provider - completion # 14 - New completion requested from language client at position {"line":138,"character":24}, triggerKind=1
I0413 00:12:27.050512    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:12:27.103748    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:27.103822    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:12:27.103880    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:27.103897    1805 conversation.go:950] Unable to retrieve excluded files for request #156: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:27.351196    1805 completion.go:236] Inline suggestion requested (request #155): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:24}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:14}
I0413 00:12:27.354029    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","INTELLISENSE","COMPLETION","ADD","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data+\""},{"isSelected":true},{"content":"\")\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b7a964a7-8f6d-4252-9a5b-3ca570a6a802"}
I0413 00:12:27.585424    1805 completion.go:609] Code complete response for request #155 after post-processing: &{Suggestions:[{Content:data Citations:[] PromptCitations:[] Score:-2.5351157 Telemetry:{CommentLines:<nil>}}] TraceID:582aa6aa1a4ec4c0 RequestID:cloudcode-740584268-b7a964a7-8f6d-4252-9a5b-3ca570a6a802 ServerTiming:gfet5t7;dur=183, gfet4t7; dur=229 NetPlusServerTiming:231.254095ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 14 - Completion result obtained from language client
Completion Provider - completion # 15 - New completion requested from language client at position {"line":138,"character":25}, triggerKind=1
I0413 00:12:28.222340    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:28.284490    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:28.284560    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:28.284683    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:28.284718    1805 conversation.go:950] Unable to retrieve excluded files for request #161: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:28.523015    1805 completion.go:236] Inline suggestion requested (request #160): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:25}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:15}
I0413 00:12:28.525285    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["INTELLISENSE","COMPLETION","ADD","UNKNOWN_EDIT","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data+\"-"},{"isSelected":true},{"content":"\")\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4f1aaa16-100d-4d4e-8935-e68912f05dba"}
I0413 00:12:28.693180    1805 handler.go:159] cancel was requested for: 160, needs to be canceled: true
Completion Provider - completion # 16 - New completion requested from language client at position {"line":138,"character":90}, triggerKind=1
I0413 00:12:30.665524    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:30.718944    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:30.718993    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:30.719037    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:30.719106    1805 conversation.go:950] Unable to retrieve excluded files for request #229: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:30.966375    1805 completion.go:236] Inline suggestion requested (request #228): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:90}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:16}
I0413 00:12:30.969146    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data+\"------------------------------------------------------------------"},{"isSelected":true},{"content":"\")\r\n            audio_converted_to_text = sample_recognize(data)\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-f51348e3-a089-4b58-94cc-818344f990a6"}
I0413 00:12:31.180362    1805 completion.go:609] Code complete response for request #228 after post-processing: &{Suggestions:[] TraceID:e625fdf6b522a6a4 RequestID:cloudcode-740584268-f51348e3-a089-4b58-94cc-818344f990a6 ServerTiming:gfet5t7;dur=171, gfet4t7; dur=209 NetPlusServerTiming:211.080488ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 16 - Completion result obtained from language client
I0413 00:12:31.918146    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:12:31.918196    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:12:31.918234    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:12:31.918247    1805 conversation.go:950] Unable to retrieve excluded files for request #233: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:12:37.777023    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:13:34.868508    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:34.868643    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:13:34.868696    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:34.868709    1805 conversation.go:950] Unable to retrieve excluded files for request #239: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:13:35.072570    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:35.072623    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:13:35.072674    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:35.072689    1805 conversation.go:950] Unable to retrieve excluded files for request #242: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:13:35.472125    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:35.472174    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:13:35.472216    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:35.472230    1805 conversation.go:950] Unable to retrieve excluded files for request #248: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:13:35.637435    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:35.637488    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:13:35.637525    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:35.637540    1805 conversation.go:950] Unable to retrieve excluded files for request #250: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 17 - New completion requested from language client at position {"line":138,"character":22}, triggerKind=1
I0413 00:13:36.530615    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:13:36.591283    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:36.591439    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:13:36.591494    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:36.591515    1805 conversation.go:950] Unable to retrieve excluded files for request #256: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:13:36.755458    1805 handler.go:159] cancel was requested for: 255, needs to be canceled: true
Completion Provider - completion # 18 - New completion requested from language client at position {"line":138,"character":22}, triggerKind=1
I0413 00:13:36.808422    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:13:37.109797    1805 completion.go:236] Inline suggestion requested (request #259): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:22}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:18}
Completion Provider - completion # 18 - Completion result obtained from language client
I0413 00:13:37.776745    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:13:37.788185    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:13:37.788233    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:13:37.788275    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:13:37.788291    1805 conversation.go:950] Unable to retrieve excluded files for request #262: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:14.503254    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:14.503314    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:14:14.503351    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:14.503361    1805 conversation.go:950] Unable to retrieve excluded files for request #265: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:25.741540    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:25.741586    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:14:25.741627    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:25.741642    1805 conversation.go:950] Unable to retrieve excluded files for request #268: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 19 - New completion requested from language client at position {"line":140,"character":12}, triggerKind=1
I0413 00:14:26.077308    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:14:26.121532    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:26.121584    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:14:26.121630    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:26.121644    1805 conversation.go:950] Unable to retrieve excluded files for request #272: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:26.378014    1805 completion.go:236] Inline suggestion requested (request #271): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:140 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:19}
I0413 00:14:26.380629    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            "},{"isSelected":true},{"content":"\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a"}
I0413 00:14:26.721333    1805 completion.go:609] Code complete response for request #271 after post-processing: &{Suggestions:[{Content:print(audio_converted_to_text)
 Citations:[] PromptCitations:[] Score:-1.5112114 Telemetry:{CommentLines:<nil>}}] TraceID:a5f91a3a8b3a6437 RequestID:cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a ServerTiming:gfet5t7;dur=220, gfet4t7; dur=323 NetPlusServerTiming:340.593126ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 19 - Completion result obtained from language client
Completion Provider - completion # 19 - Typed over previous completion
E0413 00:14:26.907640    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:26.907686    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":1,"partial":true}
I0413 00:14:26.966798    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:26.966845    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:26.966886    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:26.966900    1805 conversation.go:950] Unable to retrieve excluded files for request #276: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 19 - Typed over previous completion
E0413 00:14:27.073963    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:27.074018    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":1,"partial":true}
Completion Provider - completion # 19 - Typed over previous completion
E0413 00:14:27.222473    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:27.222546    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":2,"partial":true}
I0413 00:14:27.281448    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:27.281533    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:27.281580    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:27.281592    1805 conversation.go:950] Unable to retrieve excluded files for request #283: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 19 - Typed over previous completion
E0413 00:14:27.361370    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:27.361424    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":3,"partial":true}
I0413 00:14:27.431990    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:27.432037    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:27.432103    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:27.432121    1805 conversation.go:950] Unable to retrieve excluded files for request #287: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 19 - Typed over previous completion
E0413 00:14:29.325362    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:29.325411    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":5,"partial":true}
I0413 00:14:29.377383    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:29.377446    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:29.377488    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:29.377505    1805 conversation.go:950] Unable to retrieve excluded files for request #292: open /home/apoorvtripathi537/.aiexclude: no such file or directory
E0413 00:14:31.565567    1805 command.go:243] accepted suggestion not found in cache (print(audio_converted_to_text)
            ) for IDESessionIndex=20250413_1, CompletionIndex=19
I0413 00:14:31.565598    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-6d937f17-26dc-46a5-985e-cc452cd3756a","acceptedSuggestion":"print(audio_converted_to_text)\n            \r","acceptedChars":44,"partial":false}
Completion Provider - completion # 20 - New completion requested from language client at position {"line":141,"character":12}, triggerKind=1
I0413 00:14:31.593119    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:31.662327    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:31.662386    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:31.662528    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:31.662667    1805 conversation.go:950] Unable to retrieve excluded files for request #299: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:31.893914    1805 completion.go:236] Inline suggestion requested (request #298): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:141 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:20}
I0413 00:14:31.896343    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["COMPLETION","COMPLETION","COMPLETION","COMPLETION","COMPLETION"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            "},{"isSelected":true},{"content":"\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-2dc745c7-3dd9-497f-bbb4-cf3b15e88dac"}
I0413 00:14:32.217042    1805 completion.go:609] Code complete response for request #298 after post-processing: &{Suggestions:[] TraceID:92403312fc331a2e RequestID:cloudcode-740584268-2dc745c7-3dd9-497f-bbb4-cf3b15e88dac ServerTiming:gfet5t7;dur=267, gfet4t7; dur=318 NetPlusServerTiming:320.588945ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 20 - Completion result obtained from language client
I0413 00:14:36.532269    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:36.532316    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:36.532355    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:36.532367    1805 conversation.go:950] Unable to retrieve excluded files for request #302: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:36.949731    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:36.949786    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:36.949822    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:36.949832    1805 conversation.go:950] Unable to retrieve excluded files for request #307: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:14:37.776827    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:14:37.922170    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:14:37.922232    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:14:37.922272    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:14:37.922286    1805 conversation.go:950] Unable to retrieve excluded files for request #311: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:35.465699    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:35.465746    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:35.465786    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:35.465807    1805 conversation.go:950] Unable to retrieve excluded files for request #315: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:36.411192    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:36.411243    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:36.411284    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:36.411298    1805 conversation.go:950] Unable to retrieve excluded files for request #318: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:40.474950    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:40.474997    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:40.475032    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:40.475042    1805 conversation.go:950] Unable to retrieve excluded files for request #320: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:44.301311    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:44.301463    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:44.301523    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:44.301541    1805 conversation.go:950] Unable to retrieve excluded files for request #324: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:46.129206    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:46.129255    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:46.129304    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:46.129318    1805 conversation.go:950] Unable to retrieve excluded files for request #327: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:47.021132    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:47.021209    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:47.021562    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:47.021611    1805 conversation.go:950] Unable to retrieve excluded files for request #329: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:52.194214    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:52.194266    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:52.194313    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:52.194324    1805 conversation.go:950] Unable to retrieve excluded files for request #332: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 21 - New completion requested from language client at position {"line":54,"character":1}, triggerKind=1
I0413 00:15:52.676852    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:15:52.744633    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:52.744679    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:15:52.744712    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:52.744722    1805 conversation.go:950] Unable to retrieve excluded files for request #335: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:52.850842    1805 handler.go:159] cancel was requested for: 334, needs to be canceled: true
Completion Provider - completion # 22 - New completion requested from language client at position {"line":54,"character":2}, triggerKind=1
I0413 00:15:52.894199    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:15:52.948663    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:52.948724    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:15:52.948775    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:52.948789    1805 conversation.go:950] Unable to retrieve excluded files for request #338: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:53.194865    1805 completion.go:236] Inline suggestion requested (request #337): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:54 Character:2}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:22}
I0413 00:15:53.196261    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["COMPLETION","COMPLETION","COMPLETION","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  "},{"isSelected":true},{"content":"\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec"}
I0413 00:15:53.496967    1805 completion.go:609] Code complete response for request #337 after post-processing: &{Suggestions:[{Content:print(txt) Citations:[] PromptCitations:[] Score:-1.434692 Telemetry:{CommentLines:<nil>}}] TraceID:370b6017ee5bd865 RequestID:cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec ServerTiming:gfet5t7;dur=251, gfet4t7; dur=298 NetPlusServerTiming:300.600516ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 22 - Completion result obtained from language client
Completion Provider - completion # 22 - Typed over previous completion
I0413 00:15:53.870975    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":1,"partial":true}
I0413 00:15:53.919958    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:53.920000    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:53.920043    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:53.920083    1805 conversation.go:950] Unable to retrieve excluded files for request #342: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 22 - Typed over previous completion
I0413 00:15:53.945825    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":1,"partial":true}
Completion Provider - completion # 22 - Typed over previous completion
I0413 00:15:54.179611    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":2,"partial":true}
I0413 00:15:54.249398    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:54.249587    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:54.250035    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:54.250103    1805 conversation.go:950] Unable to retrieve excluded files for request #349: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 22 - Typed over previous completion
I0413 00:15:54.317819    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":3,"partial":true}
I0413 00:15:54.381134    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:54.381306    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:54.381383    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:54.381400    1805 conversation.go:950] Unable to retrieve excluded files for request #353: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 22 - Typed over previous completion
I0413 00:15:54.816978    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":5,"partial":true}
I0413 00:15:54.866020    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:54.866092    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:54.866161    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:54.866177    1805 conversation.go:950] Unable to retrieve excluded files for request #357: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:55.642449    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1a94ce7b-e260-4596-a095-cdea486418ec","acceptedSuggestion":"print(txt)","acceptedChars":10,"partial":false}
Completion Provider - completion # 23 - New completion requested from language client at position {"line":54,"character":12}, triggerKind=1
I0413 00:15:55.680900    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:55.737407    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:55.737454    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:55.737497    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:55.737509    1805 conversation.go:950] Unable to retrieve excluded files for request #362: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:55.981488    1805 completion.go:236] Inline suggestion requested (request #361): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:54 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:23}
I0413 00:15:55.983694    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["COMPLETION","COMPLETION","COMPLETION","COMPLETION","COMPLETION"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)"},{"isSelected":true},{"content":"\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            print(data)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b9bbe7c1-0efd-4f68-aa4a-5a956e93eb38"}
I0413 00:15:56.214418    1805 completion.go:609] Code complete response for request #361 after post-processing: &{Suggestions:[] TraceID:946b836233dd2221 RequestID:cloudcode-740584268-b9bbe7c1-0efd-4f68-aa4a-5a956e93eb38 ServerTiming:gfet5t7;dur=172, gfet4t7; dur=228 NetPlusServerTiming:230.617968ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 23 - Completion result obtained from language client
I0413 00:15:56.784572    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:56.785193    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:56.785242    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:56.785263    1805 conversation.go:950] Unable to retrieve excluded files for request #366: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:15:59.213752    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:15:59.213799    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:15:59.213839    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:15:59.213853    1805 conversation.go:950] Unable to retrieve excluded files for request #369: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:22.605362    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:22.605496    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:16:22.605545    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:22.605561    1805 conversation.go:950] Unable to retrieve excluded files for request #373: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:22.968137    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:22.968193    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:16:22.968234    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:22.968245    1805 conversation.go:950] Unable to retrieve excluded files for request #381: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:23.178962    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:23.179001    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:16:23.179043    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:23.179091    1805 conversation.go:950] Unable to retrieve excluded files for request #383: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:23.652934    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:23.652984    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:16:23.653079    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:23.653097    1805 conversation.go:950] Unable to retrieve excluded files for request #393: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 24 - New completion requested from language client at position {"line":138,"character":0}, triggerKind=1
I0413 00:16:24.621391    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:24.717388    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:24.717428    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:24.717473    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:24.717488    1805 conversation.go:950] Unable to retrieve excluded files for request #397: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:24.922151    1805 completion.go:236] Inline suggestion requested (request #396): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:138 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:24}
Completion Provider - completion # 24 - Completion result obtained from language client
Completion Provider - completion # 25 - New completion requested from language client at position {"line":137,"character":28}, triggerKind=1
I0413 00:16:25.090397    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:25.169410    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:25.169473    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:25.169522    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:25.169539    1805 conversation.go:950] Unable to retrieve excluded files for request #400: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:25.391143    1805 completion.go:236] Inline suggestion requested (request #399): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:137 Character:28}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:25}
Completion Provider - completion # 25 - Completion result obtained from language client
I0413 00:16:26.560664    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:26.560720    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:26.560765    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:26.560783    1805 conversation.go:950] Unable to retrieve excluded files for request #404: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:37.776824    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:16:38.293545    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:38.293618    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:38.293666    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:38.293682    1805 conversation.go:950] Unable to retrieve excluded files for request #408: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:38.492033    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:38.492128    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:38.492167    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:38.492184    1805 conversation.go:950] Unable to retrieve excluded files for request #410: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:44.830720    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:44.830780    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:44.830828    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:44.830839    1805 conversation.go:950] Unable to retrieve excluded files for request #414: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:45.080899    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:45.080954    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:45.080998    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:45.081010    1805 conversation.go:950] Unable to retrieve excluded files for request #417: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:47.358634    1805 handler.go:159] cancel was requested for: 421, needs to be canceled: false
I0413 00:16:47.358656    1805 handler.go:163] cancel requested for 421 but not found
I0413 00:16:47.996070    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:47.996118    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:47.996156    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:47.996169    1805 conversation.go:950] Unable to retrieve excluded files for request #424: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:48.225241    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:48.225291    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:48.225344    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:48.225413    1805 conversation.go:950] Unable to retrieve excluded files for request #426: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:16:52.790800    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:16:52.790839    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:16:52.790880    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:16:52.790896    1805 conversation.go:950] Unable to retrieve excluded files for request #429: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:17:55.791315    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:17:55.791375    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:17:55.791427    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:17:55.791442    1805 conversation.go:950] Unable to retrieve excluded files for request #433: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:17:56.810783    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:17:56.810832    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:17:56.810878    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:17:56.810891    1805 conversation.go:950] Unable to retrieve excluded files for request #435: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:17:58.011029    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:17:58.011096    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:17:58.011140    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:17:58.011160    1805 conversation.go:950] Unable to retrieve excluded files for request #438: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:17:59.762989    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:17:59.763104    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:17:59.763146    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:17:59.763156    1805 conversation.go:950] Unable to retrieve excluded files for request #442: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:00.958715    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:00.958757    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:00.958789    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:00.958799    1805 conversation.go:950] Unable to retrieve excluded files for request #452: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:01.081254    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:01.081302    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:01.081337    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:01.081355    1805 conversation.go:950] Unable to retrieve excluded files for request #454: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:03.466503    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:03.466563    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:03.466607    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:03.466621    1805 conversation.go:950] Unable to retrieve excluded files for request #457: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:03.781996    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:03.782109    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:03.782166    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:03.782180    1805 conversation.go:950] Unable to retrieve excluded files for request #460: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:04.380095    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:04.380154    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:04.380193    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:04.380205    1805 conversation.go:950] Unable to retrieve excluded files for request #466: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:04.533451    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:04.533598    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:04.533682    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:04.533700    1805 conversation.go:950] Unable to retrieve excluded files for request #468: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:05.675377    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:05.675416    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:05.675564    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:05.675606    1805 conversation.go:950] Unable to retrieve excluded files for request #471: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:06.637273    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:06.637336    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:06.637373    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:06.637387    1805 conversation.go:950] Unable to retrieve excluded files for request #475: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:09.057890    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:09.058089    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:09.058162    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:09.058183    1805 conversation.go:950] Unable to retrieve excluded files for request #479: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:09.496297    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:09.496338    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:09.496460    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:09.496493    1805 conversation.go:950] Unable to retrieve excluded files for request #490: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:09.856999    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:09.857068    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:09.857107    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:09.857124    1805 conversation.go:950] Unable to retrieve excluded files for request #505: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:10.066303    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:10.066367    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:10.066407    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:10.066418    1805 conversation.go:950] Unable to retrieve excluded files for request #508: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:10.199686    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:10.199746    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:10.199792    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:10.199804    1805 conversation.go:950] Unable to retrieve excluded files for request #510: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:10.766120    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:10.766174    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:10.766223    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:10.766236    1805 conversation.go:950] Unable to retrieve excluded files for request #513: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:17.464004    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:18:17.464080    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:18:17.464125    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:18:17.464139    1805 conversation.go:950] Unable to retrieve excluded files for request #517: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:18:37.776779    1805 life_cycle.go:277] codeReportBasicEvery: recomputing codereportbasic metric
I0413 00:19:12.436314    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:19:12.436370    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:19:12.436422    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:19:12.436434    1805 conversation.go:950] Unable to retrieve excluded files for request #522: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:15.127155    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:15.127206    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:15.127246    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:15.127257    1805 conversation.go:950] Unable to retrieve excluded files for request #526: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:15.548146    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:15.548198    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:15.548242    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:15.548256    1805 conversation.go:950] Unable to retrieve excluded files for request #538: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:16.135708    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:16.135747    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:16.135789    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:16.135806    1805 conversation.go:950] Unable to retrieve excluded files for request #554: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:16.272297    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:16.272341    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:16.272378    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:16.272392    1805 conversation.go:950] Unable to retrieve excluded files for request #556: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:16.485146    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:16.485184    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:16.485228    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:16.485243    1805 conversation.go:950] Unable to retrieve excluded files for request #562: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:16.619700    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:16.619759    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:16.619815    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:16.619827    1805 conversation.go:950] Unable to retrieve excluded files for request #565: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:17.269986    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:17.270029    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:17.270100    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:17.270115    1805 conversation.go:950] Unable to retrieve excluded files for request #591: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:17.439877    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:17.439926    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:17.439971    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:17.439989    1805 conversation.go:950] Unable to retrieve excluded files for request #593: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:17.645364    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:17.645529    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:23:17.645608    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:17.645629    1805 conversation.go:950] Unable to retrieve excluded files for request #599: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:19.473872    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:19.473916    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:19.473951    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:19.473961    1805 conversation.go:950] Unable to retrieve excluded files for request #602: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:24.112838    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:24.112889    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:24.112928    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:24.112938    1805 conversation.go:950] Unable to retrieve excluded files for request #606: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 26 - New completion requested from language client at position {"line":155,"character":0}, triggerKind=1
I0413 00:23:24.461701    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:24.517920    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:24.517971    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:24.518009    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:24.518024    1805 conversation.go:950] Unable to retrieve excluded files for request #609: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:24.762452    1805 completion.go:236] Inline suggestion requested (request #608): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:155 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:26}
I0413 00:23:24.764204    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n"},{"isSelected":true},{"content":"\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-976456f1-87af-4933-a134-f145fe46d887"}
I0413 00:23:25.041250    1805 handler.go:159] cancel was requested for: 608, needs to be canceled: true
Completion Provider - completion # 27 - New completion requested from language client at position {"line":156,"character":0}, triggerKind=1
I0413 00:23:25.080748    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.139222    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:25.139283    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.139353    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:25.139368    1805 conversation.go:950] Unable to retrieve excluded files for request #612: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:25.237902    1805 handler.go:159] cancel was requested for: 611, needs to be canceled: true
Completion Provider - completion # 28 - New completion requested from language client at position {"line":157,"character":0}, triggerKind=1
I0413 00:23:25.278172    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.336800    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:25.336860    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.336905    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:25.336920    1805 conversation.go:950] Unable to retrieve excluded files for request #615: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:25.417659    1805 handler.go:159] cancel was requested for: 614, needs to be canceled: true
Completion Provider - completion # 29 - New completion requested from language client at position {"line":158,"character":0}, triggerKind=1
I0413 00:23:25.446729    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.518525    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:25.518577    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:25.518616    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:25.518631    1805 conversation.go:950] Unable to retrieve excluded files for request #618: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:25.748163    1805 completion.go:236] Inline suggestion requested (request #617): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:29}
I0413 00:23:25.750073    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n\r\n"},{"isSelected":true},{"content":"\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-466d4adc-a4a0-42df-af42-70fcdebb2f96"}
I0413 00:23:26.016438    1805 completion.go:609] Code complete response for request #617 after post-processing: &{Suggestions:[] TraceID:7779e3d66a5abca4 RequestID:cloudcode-740584268-466d4adc-a4a0-42df-af42-70fcdebb2f96 ServerTiming:gfet5t7;dur=227, gfet4t7; dur=264 NetPlusServerTiming:266.20554ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 29 - Completion result obtained from language client
I0413 00:23:37.776198    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:23:42.747924    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:42.748008    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:42.748121    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:42.748229    1805 conversation.go:950] Unable to retrieve excluded files for request #621: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:48.869464    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:48.869515    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:48.869556    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:48.869572    1805 conversation.go:950] Unable to retrieve excluded files for request #626: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:49.500884    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:49.500934    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:49.500982    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:49.501000    1805 conversation.go:950] Unable to retrieve excluded files for request #651: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:52.751118    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:52.751171    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:52.751208    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:52.751219    1805 conversation.go:950] Unable to retrieve excluded files for request #654: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:53.516535    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:53.516577    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:53.516613    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:53.516628    1805 conversation.go:950] Unable to retrieve excluded files for request #656: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:56.566480    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:56.566561    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:56.566604    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:56.566618    1805 conversation.go:950] Unable to retrieve excluded files for request #665: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:58.809741    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:58.809782    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:58.809816    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:58.809826    1805 conversation.go:950] Unable to retrieve excluded files for request #668: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:59.617725    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:59.617761    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:59.617799    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:59.617809    1805 conversation.go:950] Unable to retrieve excluded files for request #681: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:59.798185    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:59.798253    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:59.798299    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:59.798314    1805 conversation.go:950] Unable to retrieve excluded files for request #683: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:23:59.961779    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:23:59.961830    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:23:59.961876    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:23:59.961890    1805 conversation.go:950] Unable to retrieve excluded files for request #685: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.149981    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.150022    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.150084    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.150096    1805 conversation.go:950] Unable to retrieve excluded files for request #687: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.319291    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.319332    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.319368    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.319377    1805 conversation.go:950] Unable to retrieve excluded files for request #689: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.501876    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.501950    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.501991    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.502018    1805 conversation.go:950] Unable to retrieve excluded files for request #691: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.687032    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.687108    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.687148    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.687157    1805 conversation.go:950] Unable to retrieve excluded files for request #693: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.855263    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.855310    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.855356    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.855371    1805 conversation.go:950] Unable to retrieve excluded files for request #695: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:00.982475    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:00.982515    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:00.982559    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:00.982574    1805 conversation.go:950] Unable to retrieve excluded files for request #697: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:01.194019    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:01.194114    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:01.194169    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:01.194187    1805 conversation.go:950] Unable to retrieve excluded files for request #699: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:01.383127    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:01.383168    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:01.383205    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:01.383222    1805 conversation.go:950] Unable to retrieve excluded files for request #701: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:01.554006    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:01.554107    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:01.554155    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:01.554170    1805 conversation.go:950] Unable to retrieve excluded files for request #703: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:01.685702    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:01.685765    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:01.685820    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:01.685835    1805 conversation.go:950] Unable to retrieve excluded files for request #705: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:01.869612    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:01.869666    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:01.869716    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:01.869732    1805 conversation.go:950] Unable to retrieve excluded files for request #707: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.069598    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.069652    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.069706    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.069715    1805 conversation.go:950] Unable to retrieve excluded files for request #709: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.220898    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.220946    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.221128    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.221158    1805 conversation.go:950] Unable to retrieve excluded files for request #711: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.399812    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.399856    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.399904    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.399920    1805 conversation.go:950] Unable to retrieve excluded files for request #713: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.580983    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.581023    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.581078    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.581088    1805 conversation.go:950] Unable to retrieve excluded files for request #715: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.743914    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.743964    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.744004    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.744021    1805 conversation.go:950] Unable to retrieve excluded files for request #717: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:02.909953    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:02.910011    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:02.910221    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:02.910249    1805 conversation.go:950] Unable to retrieve excluded files for request #719: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.092946    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.092996    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.093044    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.093086    1805 conversation.go:950] Unable to retrieve excluded files for request #721: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.249945    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.250017    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.250113    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.250154    1805 conversation.go:950] Unable to retrieve excluded files for request #723: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.432363    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.432430    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.432478    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.432489    1805 conversation.go:950] Unable to retrieve excluded files for request #725: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.616933    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.616983    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.617037    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.617080    1805 conversation.go:950] Unable to retrieve excluded files for request #727: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.775480    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.775528    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.775571    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.775606    1805 conversation.go:950] Unable to retrieve excluded files for request #729: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:03.931898    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:03.931952    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:03.931999    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:03.932012    1805 conversation.go:950] Unable to retrieve excluded files for request #731: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:04.101695    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:04.101748    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:04.101794    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:04.101806    1805 conversation.go:950] Unable to retrieve excluded files for request #733: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:04.290621    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:04.290672    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:04.290722    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:04.290738    1805 conversation.go:950] Unable to retrieve excluded files for request #735: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:04.484228    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:04.484278    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:04.484325    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:04.484339    1805 conversation.go:950] Unable to retrieve excluded files for request #737: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:04.670778    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:04.670831    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:04.670873    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:04.670888    1805 conversation.go:950] Unable to retrieve excluded files for request #739: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:04.833195    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:04.833237    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:04.833281    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:04.833297    1805 conversation.go:950] Unable to retrieve excluded files for request #741: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:05.006804    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:05.006872    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:05.006918    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:05.006932    1805 conversation.go:950] Unable to retrieve excluded files for request #743: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:05.401008    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:05.401096    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:24:05.401142    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:05.401159    1805 conversation.go:950] Unable to retrieve excluded files for request #746: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 30 - New completion requested from language client at position {"line":158,"character":1}, triggerKind=1
I0413 00:24:06.553584    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:06.619700    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:06.619738    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:06.619772    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:06.619782    1805 conversation.go:950] Unable to retrieve excluded files for request #750: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:06.854364    1805 completion.go:236] Inline suggestion requested (request #749): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:30}
I0413 00:24:06.855944    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n     # ==== Process PDF ====\r\n     pdf_file = request.files['pdf_file']\r\n     pdf_text = \"\"\r\n     if pdf_file.filename.endswith('.pdf'):\r\n         filename = secure_filename(pdf_file.filename)\r\n         pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n         pdf_file.save(pdf_path)\r\n \r\n         with pdfplumber.open(pdf_path) as doc:\r\n             for page in doc.pages:\r\n                 text = page.extract_text()\r\n                 if text:\r\n                     pdf_text += text\r\n \r\n     # ==== Process Audio ====\r\n     audio_file = request.files['audio_data']\r\n     if audio_file.filename != '':\r\n         audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n         audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n         audio_file.save(audio_path)\r\n \r\n         with open(audio_path, 'rb') as f:\r\n             audio_data = f.read()\r\n \r\n         audio_text = sample_recognize(audio_data)\r\n         print(\"Transcribed audio:\", audio_text)\r\n \r\n         # Combine prompt + audio\r\n         final_prompt = prompt + audio_text\r\n \r\n         # ==== Check for empty strings before calling the model ====\r\n         if pdf_text.strip() and final_prompt.strip():\r\n             contents = [pdf_text, final_prompt]\r\n             response = model.generate_content(contents)\r\n             model_output = response.text\r\n \r\n             print(\"Model output:\", model_output)\r\n \r\n             with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                 f.write(model_output)\r\n         else:\r\n             print(\"PDF or audio input is empty. Skipping model call.\")\r\n else:\r\n     print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d40dcb9f-9be3-4f5a-b05a-2139e60be1c3"}
I0413 00:24:06.883028    1805 handler.go:159] cancel was requested for: 749, needs to be canceled: true
Completion Provider - completion # 31 - New completion requested from language client at position {"line":158,"character":2}, triggerKind=1
I0413 00:24:06.913107    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:06.982970    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:06.983025    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:06.983134    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:06.983153    1805 conversation.go:950] Unable to retrieve excluded files for request #754: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:07.201648    1805 handler.go:159] cancel was requested for: 753, needs to be canceled: true
Completion Provider - completion # 32 - New completion requested from language client at position {"line":158,"character":3}, triggerKind=1
I0413 00:24:07.232699    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:07.301551    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:07.301600    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:07.301662    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:07.301677    1805 conversation.go:950] Unable to retrieve excluded files for request #758: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:07.533568    1805 completion.go:236] Inline suggestion requested (request #757): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:3}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:32}
I0413 00:24:07.535949    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n   "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n       # ==== Process PDF ====\r\n       pdf_file = request.files['pdf_file']\r\n       pdf_text = \"\"\r\n       if pdf_file.filename.endswith('.pdf'):\r\n           filename = secure_filename(pdf_file.filename)\r\n           pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n           pdf_file.save(pdf_path)\r\n   \r\n           with pdfplumber.open(pdf_path) as doc:\r\n               for page in doc.pages:\r\n                   text = page.extract_text()\r\n                   if text:\r\n                       pdf_text += text\r\n   \r\n       # ==== Process Audio ====\r\n       audio_file = request.files['audio_data']\r\n       if audio_file.filename != '':\r\n           audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n           audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n           audio_file.save(audio_path)\r\n   \r\n           with open(audio_path, 'rb') as f:\r\n               audio_data = f.read()\r\n   \r\n           audio_text = sample_recognize(audio_data)\r\n           print(\"Transcribed audio:\", audio_text)\r\n   \r\n           # Combine prompt + audio\r\n           final_prompt = prompt + audio_text\r\n   \r\n           # ==== Check for empty strings before calling the model ====\r\n           if pdf_text.strip() and final_prompt.strip():\r\n               contents = [pdf_text, final_prompt]\r\n               response = model.generate_content(contents)\r\n               model_output = response.text\r\n   \r\n               print(\"Model output:\", model_output)\r\n   \r\n               with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                   f.write(model_output)\r\n           else:\r\n               print(\"PDF or audio input is empty. Skipping model call.\")\r\n   else:\r\n       print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-3b760885-ac5c-478f-93f9-0aaa03ff7ac6"}
I0413 00:24:07.555379    1805 handler.go:159] cancel was requested for: 757, needs to be canceled: true
Completion Provider - completion # 33 - New completion requested from language client at position {"line":158,"character":4}, triggerKind=1
I0413 00:24:07.578372    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:07.654580    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:07.654632    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:07.654678    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:07.654692    1805 conversation.go:950] Unable to retrieve excluded files for request #762: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:07.879279    1805 completion.go:236] Inline suggestion requested (request #761): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:33}
I0413 00:24:07.881172    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n    "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n    else:\r\n        print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d768ec1a-a2ac-414c-a52f-6582c74c90d6"}
I0413 00:24:08.138036    1805 completion.go:609] Code complete response for request #761 after post-processing: &{Suggestions:[{Content:
def upload_file():
     Citations:[] PromptCitations:[] Score:-1.632794 Telemetry:{CommentLines:<nil>}}] TraceID:8a626c1eff9f2179 RequestID:cloudcode-740584268-d768ec1a-a2ac-414c-a52f-6582c74c90d6 ServerTiming:gfet5t7;dur=217, gfet4t7; dur=254 NetPlusServerTiming:256.750052ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 33 - Completion result obtained from language client
Completion Provider - completion # 34 - New completion requested from language client at position {"line":158,"character":5}, triggerKind=1
I0413 00:24:12.175987    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:12.270394    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:12.270447    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:12.270485    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:12.270496    1805 conversation.go:950] Unable to retrieve excluded files for request #769: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:12.476452    1805 completion.go:236] Inline suggestion requested (request #768): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:5}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:34}
I0413 00:24:12.477945    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n     "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n         # ==== Process PDF ====\r\n         pdf_file = request.files['pdf_file']\r\n         pdf_text = \"\"\r\n         if pdf_file.filename.endswith('.pdf'):\r\n             filename = secure_filename(pdf_file.filename)\r\n             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n             pdf_file.save(pdf_path)\r\n     \r\n             with pdfplumber.open(pdf_path) as doc:\r\n                 for page in doc.pages:\r\n                     text = page.extract_text()\r\n                     if text:\r\n                         pdf_text += text\r\n     \r\n         # ==== Process Audio ====\r\n         audio_file = request.files['audio_data']\r\n         if audio_file.filename != '':\r\n             audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n             audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n             audio_file.save(audio_path)\r\n     \r\n             with open(audio_path, 'rb') as f:\r\n                 audio_data = f.read()\r\n     \r\n             audio_text = sample_recognize(audio_data)\r\n             print(\"Transcribed audio:\", audio_text)\r\n     \r\n             # Combine prompt + audio\r\n             final_prompt = prompt + audio_text\r\n     \r\n             # ==== Check for empty strings before calling the model ====\r\n             if pdf_text.strip() and final_prompt.strip():\r\n                 contents = [pdf_text, final_prompt]\r\n                 response = model.generate_content(contents)\r\n                 model_output = response.text\r\n     \r\n                 print(\"Model output:\", model_output)\r\n     \r\n                 with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                     f.write(model_output)\r\n             else:\r\n                 print(\"PDF or audio input is empty. Skipping model call.\")\r\n     else:\r\n         print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-2578ea58-2027-4ec4-8cd2-f7d83c4fbedd"}
I0413 00:24:12.748768    1805 completion.go:609] Code complete response for request #768 after post-processing: &{Suggestions:[] TraceID:ca266df2b0c2bf5 RequestID:cloudcode-740584268-2578ea58-2027-4ec4-8cd2-f7d83c4fbedd ServerTiming:gfet5t7;dur=223, gfet4t7; dur=268 NetPlusServerTiming:270.708618ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 34 - Completion result obtained from language client
Completion Provider - completion # 35 - New completion requested from language client at position {"line":158,"character":6}, triggerKind=1
I0413 00:24:13.873892    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:13.939983    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:13.940026    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:13.940095    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:13.940114    1805 conversation.go:950] Unable to retrieve excluded files for request #775: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:14.174963    1805 completion.go:236] Inline suggestion requested (request #774): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:6}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:35}
I0413 00:24:14.176515    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n      "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n          # ==== Process PDF ====\r\n          pdf_file = request.files['pdf_file']\r\n          pdf_text = \"\"\r\n          if pdf_file.filename.endswith('.pdf'):\r\n              filename = secure_filename(pdf_file.filename)\r\n              pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n              pdf_file.save(pdf_path)\r\n      \r\n              with pdfplumber.open(pdf_path) as doc:\r\n                  for page in doc.pages:\r\n                      text = page.extract_text()\r\n                      if text:\r\n                          pdf_text += text\r\n      \r\n          # ==== Process Audio ====\r\n          audio_file = request.files['audio_data']\r\n          if audio_file.filename != '':\r\n              audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n              audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n              audio_file.save(audio_path)\r\n      \r\n              with open(audio_path, 'rb') as f:\r\n                  audio_data = f.read()\r\n      \r\n              audio_text = sample_recognize(audio_data)\r\n              print(\"Transcribed audio:\", audio_text)\r\n      \r\n              # Combine prompt + audio\r\n              final_prompt = prompt + audio_text\r\n      \r\n              # ==== Check for empty strings before calling the model ====\r\n              if pdf_text.strip() and final_prompt.strip():\r\n                  contents = [pdf_text, final_prompt]\r\n                  response = model.generate_content(contents)\r\n                  model_output = response.text\r\n      \r\n                  print(\"Model output:\", model_output)\r\n      \r\n                  with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                      f.write(model_output)\r\n              else:\r\n                  print(\"PDF or audio input is empty. Skipping model call.\")\r\n      else:\r\n          print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-813ecc0d-2ab2-4b55-850d-c0eb169161b9"}
I0413 00:24:14.377940    1805 handler.go:159] cancel was requested for: 774, needs to be canceled: true
Completion Provider - completion # 36 - New completion requested from language client at position {"line":158,"character":7}, triggerKind=1
I0413 00:24:14.406278    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:14.479465    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:14.479526    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:14.479577    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:14.479591    1805 conversation.go:950] Unable to retrieve excluded files for request #779: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:14.706970    1805 completion.go:236] Inline suggestion requested (request #778): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:7}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:36}
I0413 00:24:14.708593    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n       "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n           # ==== Process PDF ====\r\n           pdf_file = request.files['pdf_file']\r\n           pdf_text = \"\"\r\n           if pdf_file.filename.endswith('.pdf'):\r\n               filename = secure_filename(pdf_file.filename)\r\n               pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n               pdf_file.save(pdf_path)\r\n       \r\n               with pdfplumber.open(pdf_path) as doc:\r\n                   for page in doc.pages:\r\n                       text = page.extract_text()\r\n                       if text:\r\n                           pdf_text += text\r\n       \r\n           # ==== Process Audio ====\r\n           audio_file = request.files['audio_data']\r\n           if audio_file.filename != '':\r\n               audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n               audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n               audio_file.save(audio_path)\r\n       \r\n               with open(audio_path, 'rb') as f:\r\n                   audio_data = f.read()\r\n       \r\n               audio_text = sample_recognize(audio_data)\r\n               print(\"Transcribed audio:\", audio_text)\r\n       \r\n               # Combine prompt + audio\r\n               final_prompt = prompt + audio_text\r\n       \r\n               # ==== Check for empty strings before calling the model ====\r\n               if pdf_text.strip() and final_prompt.strip():\r\n                   contents = [pdf_text, final_prompt]\r\n                   response = model.generate_content(contents)\r\n                   model_output = response.text\r\n       \r\n                   print(\"Model output:\", model_output)\r\n       \r\n                   with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                       f.write(model_output)\r\n               else:\r\n                   print(\"PDF or audio input is empty. Skipping model call.\")\r\n       else:\r\n           print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-565ad9d3-fee6-4c40-ac8d-1eb16b91d868"}
I0413 00:24:14.727490    1805 handler.go:159] cancel was requested for: 778, needs to be canceled: true
Completion Provider - completion # 37 - New completion requested from language client at position {"line":158,"character":8}, triggerKind=1
I0413 00:24:14.758129    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:14.825583    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:14.825634    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:14.825684    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:14.825700    1805 conversation.go:950] Unable to retrieve excluded files for request #783: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:15.058602    1805 completion.go:236] Inline suggestion requested (request #782): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:37}
I0413 00:24:15.059977    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n        "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n            # ==== Process PDF ====\r\n            pdf_file = request.files['pdf_file']\r\n            pdf_text = \"\"\r\n            if pdf_file.filename.endswith('.pdf'):\r\n                filename = secure_filename(pdf_file.filename)\r\n                pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n                pdf_file.save(pdf_path)\r\n        \r\n                with pdfplumber.open(pdf_path) as doc:\r\n                    for page in doc.pages:\r\n                        text = page.extract_text()\r\n                        if text:\r\n                            pdf_text += text\r\n        \r\n            # ==== Process Audio ====\r\n            audio_file = request.files['audio_data']\r\n            if audio_file.filename != '':\r\n                audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n                audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n                audio_file.save(audio_path)\r\n        \r\n                with open(audio_path, 'rb') as f:\r\n                    audio_data = f.read()\r\n        \r\n                audio_text = sample_recognize(audio_data)\r\n                print(\"Transcribed audio:\", audio_text)\r\n        \r\n                # Combine prompt + audio\r\n                final_prompt = prompt + audio_text\r\n        \r\n                # ==== Check for empty strings before calling the model ====\r\n                if pdf_text.strip() and final_prompt.strip():\r\n                    contents = [pdf_text, final_prompt]\r\n                    response = model.generate_content(contents)\r\n                    model_output = response.text\r\n        \r\n                    print(\"Model output:\", model_output)\r\n        \r\n                    with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                        f.write(model_output)\r\n                else:\r\n                    print(\"PDF or audio input is empty. Skipping model call.\")\r\n        else:\r\n            print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-1291ddd7-8d08-413d-b564-13e87380d259"}
I0413 00:24:15.294126    1805 completion.go:609] Code complete response for request #782 after post-processing: &{Suggestions:[] TraceID:33d197dd995c91d3 RequestID:cloudcode-740584268-1291ddd7-8d08-413d-b564-13e87380d259 ServerTiming:gfet5t7;dur=197, gfet4t7; dur=231 NetPlusServerTiming:233.980166ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 37 - Completion result obtained from language client
Completion Provider - completion # 38 - New completion requested from language client at position {"line":158,"character":4}, triggerKind=1
I0413 00:24:16.344257    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:16.413637    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:16.413688    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:16.413730    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:16.413748    1805 conversation.go:950] Unable to retrieve excluded files for request #789: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:16.529471    1805 handler.go:159] cancel was requested for: 788, needs to be canceled: true
Completion Provider - completion # 39 - New completion requested from language client at position {"line":158,"character":0}, triggerKind=1
I0413 00:24:16.558675    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:16.628918    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:16.628958    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:16.629002    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:16.629013    1805 conversation.go:950] Unable to retrieve excluded files for request #792: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:16.859374    1805 completion.go:236] Inline suggestion requested (request #791): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:39}
Completion Provider - completion # 39 - Completion result obtained from language client
Completion Provider - completion # 40 - New completion requested from language client at position {"line":158,"character":1}, triggerKind=1
I0413 00:24:18.116904    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:18.185550    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:18.185605    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:18.185656    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:18.185673    1805 conversation.go:950] Unable to retrieve excluded files for request #798: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:18.417630    1805 completion.go:236] Inline suggestion requested (request #797): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:40}
I0413 00:24:18.419394    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n     # ==== Process PDF ====\r\n     pdf_file = request.files['pdf_file']\r\n     pdf_text = \"\"\r\n     if pdf_file.filename.endswith('.pdf'):\r\n         filename = secure_filename(pdf_file.filename)\r\n         pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n         pdf_file.save(pdf_path)\r\n \r\n         with pdfplumber.open(pdf_path) as doc:\r\n             for page in doc.pages:\r\n                 text = page.extract_text()\r\n                 if text:\r\n                     pdf_text += text\r\n \r\n     # ==== Process Audio ====\r\n     audio_file = request.files['audio_data']\r\n     if audio_file.filename != '':\r\n         audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n         audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n         audio_file.save(audio_path)\r\n \r\n         with open(audio_path, 'rb') as f:\r\n             audio_data = f.read()\r\n \r\n         audio_text = sample_recognize(audio_data)\r\n         print(\"Transcribed audio:\", audio_text)\r\n \r\n         # Combine prompt + audio\r\n         final_prompt = prompt + audio_text\r\n \r\n         # ==== Check for empty strings before calling the model ====\r\n         if pdf_text.strip() and final_prompt.strip():\r\n             contents = [pdf_text, final_prompt]\r\n             response = model.generate_content(contents)\r\n             model_output = response.text\r\n \r\n             print(\"Model output:\", model_output)\r\n \r\n             with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                 f.write(model_output)\r\n         else:\r\n             print(\"PDF or audio input is empty. Skipping model call.\")\r\n else:\r\n     print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-bc264683-7f77-4d24-b0ac-78ddc394feaa"}
I0413 00:24:18.491370    1805 handler.go:159] cancel was requested for: 797, needs to be canceled: true
Completion Provider - completion # 41 - New completion requested from language client at position {"line":158,"character":2}, triggerKind=1
I0413 00:24:18.526101    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:18.590535    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:18.590598    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:18.590645    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:18.590663    1805 conversation.go:950] Unable to retrieve excluded files for request #802: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:18.827184    1805 completion.go:236] Inline suggestion requested (request #801): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:2}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:41}
I0413 00:24:18.829686    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n  "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n      # ==== Process PDF ====\r\n      pdf_file = request.files['pdf_file']\r\n      pdf_text = \"\"\r\n      if pdf_file.filename.endswith('.pdf'):\r\n          filename = secure_filename(pdf_file.filename)\r\n          pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n          pdf_file.save(pdf_path)\r\n  \r\n          with pdfplumber.open(pdf_path) as doc:\r\n              for page in doc.pages:\r\n                  text = page.extract_text()\r\n                  if text:\r\n                      pdf_text += text\r\n  \r\n      # ==== Process Audio ====\r\n      audio_file = request.files['audio_data']\r\n      if audio_file.filename != '':\r\n          audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n          audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n          audio_file.save(audio_path)\r\n  \r\n          with open(audio_path, 'rb') as f:\r\n              audio_data = f.read()\r\n  \r\n          audio_text = sample_recognize(audio_data)\r\n          print(\"Transcribed audio:\", audio_text)\r\n  \r\n          # Combine prompt + audio\r\n          final_prompt = prompt + audio_text\r\n  \r\n          # ==== Check for empty strings before calling the model ====\r\n          if pdf_text.strip() and final_prompt.strip():\r\n              contents = [pdf_text, final_prompt]\r\n              response = model.generate_content(contents)\r\n              model_output = response.text\r\n  \r\n              print(\"Model output:\", model_output)\r\n  \r\n              with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                  f.write(model_output)\r\n          else:\r\n              print(\"PDF or audio input is empty. Skipping model call.\")\r\n  else:\r\n      print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-ae048690-3cad-4d4f-9517-14650de74cd1"}
I0413 00:24:19.080516    1805 completion.go:609] Code complete response for request #801 after post-processing: &{Suggestions:[{Content:def upload_file():
   Citations:[] PromptCitations:[] Score:-2.0376709 Telemetry:{CommentLines:<nil>}} {Content:
def upload_file():
   Citations:[] PromptCitations:[] Score:-2.103904 Telemetry:{CommentLines:<nil>}}] TraceID:8f6974f801908274 RequestID:cloudcode-740584268-ae048690-3cad-4d4f-9517-14650de74cd1 ServerTiming:gfet5t7;dur=205, gfet4t7; dur=248 NetPlusServerTiming:250.709429ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 41 - Completion result obtained from language client
Completion Provider - completion # 42 - New completion requested from language client at position {"line":158,"character":3}, triggerKind=1
I0413 00:24:20.721329    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:20.814772    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:20.814840    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:20.814928    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:20.814948    1805 conversation.go:950] Unable to retrieve excluded files for request #808: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:21.021982    1805 completion.go:236] Inline suggestion requested (request #807): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:3}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:42}
I0413 00:24:21.023367    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n   "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n       # ==== Process PDF ====\r\n       pdf_file = request.files['pdf_file']\r\n       pdf_text = \"\"\r\n       if pdf_file.filename.endswith('.pdf'):\r\n           filename = secure_filename(pdf_file.filename)\r\n           pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n           pdf_file.save(pdf_path)\r\n   \r\n           with pdfplumber.open(pdf_path) as doc:\r\n               for page in doc.pages:\r\n                   text = page.extract_text()\r\n                   if text:\r\n                       pdf_text += text\r\n   \r\n       # ==== Process Audio ====\r\n       audio_file = request.files['audio_data']\r\n       if audio_file.filename != '':\r\n           audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n           audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n           audio_file.save(audio_path)\r\n   \r\n           with open(audio_path, 'rb') as f:\r\n               audio_data = f.read()\r\n   \r\n           audio_text = sample_recognize(audio_data)\r\n           print(\"Transcribed audio:\", audio_text)\r\n   \r\n           # Combine prompt + audio\r\n           final_prompt = prompt + audio_text\r\n   \r\n           # ==== Check for empty strings before calling the model ====\r\n           if pdf_text.strip() and final_prompt.strip():\r\n               contents = [pdf_text, final_prompt]\r\n               response = model.generate_content(contents)\r\n               model_output = response.text\r\n   \r\n               print(\"Model output:\", model_output)\r\n   \r\n               with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                   f.write(model_output)\r\n           else:\r\n               print(\"PDF or audio input is empty. Skipping model call.\")\r\n   else:\r\n       print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-23bebfb6-ac8a-4217-9af6-116b8ec92831"}
I0413 00:24:21.260342    1805 completion.go:609] Code complete response for request #807 after post-processing: &{Suggestions:[{Content:def upload_file():
    Citations:[] PromptCitations:[] Score:-1.0012261 Telemetry:{CommentLines:<nil>}}] TraceID:cf19ad0f54c18ee RequestID:cloudcode-740584268-23bebfb6-ac8a-4217-9af6-116b8ec92831 ServerTiming:gfet5t7;dur=195, gfet4t7; dur=234 NetPlusServerTiming:236.865751ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 42 - Completion result obtained from language client
I0413 00:24:26.425829    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:26.425873    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:26.425910    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:26.425921    1805 conversation.go:950] Unable to retrieve excluded files for request #814: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:27.418090    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:27.418136    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:27.418169    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:27.418179    1805 conversation.go:950] Unable to retrieve excluded files for request #816: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:30.032264    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:30.032316    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:24:30.032427    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:30.032452    1805 conversation.go:950] Unable to retrieve excluded files for request #820: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 43 - New completion requested from language client at position {"line":158,"character":0}, triggerKind=1
I0413 00:24:30.444481    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:30.507576    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:30.507650    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:30.507720    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:30.507738    1805 conversation.go:950] Unable to retrieve excluded files for request #824: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:30.745231    1805 completion.go:236] Inline suggestion requested (request #823): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:43}
Completion Provider - completion # 43 - Completion result obtained from language client
I0413 00:24:31.775254    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:31.775298    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:31.775338    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:31.775354    1805 conversation.go:950] Unable to retrieve excluded files for request #829: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:34.147295    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:24:34.147342    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:24:34.147406    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:24:34.147419    1805 conversation.go:950] Unable to retrieve excluded files for request #831: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:24:37.776783    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:25:00.723389    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:00.723438    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:00.723486    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:00.723498    1805 conversation.go:950] Unable to retrieve excluded files for request #835: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:01.202766    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:01.202814    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:01.202850    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:01.202861    1805 conversation.go:950] Unable to retrieve excluded files for request #848: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:02.171128    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:02.171183    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:02.171226    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:02.171240    1805 conversation.go:950] Unable to retrieve excluded files for request #851: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:04.595235    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:04.595300    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:04.595349    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:04.595367    1805 conversation.go:950] Unable to retrieve excluded files for request #855: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:07.970513    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:07.970579    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:07.970625    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:07.970641    1805 conversation.go:950] Unable to retrieve excluded files for request #857: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 44 - New completion requested from language client at position {"line":158,"character":0}, triggerKind=1
I0413 00:25:08.240673    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:25:08.296438    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:08.296493    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:25:08.296732    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:08.296816    1805 conversation.go:950] Unable to retrieve excluded files for request #861: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:08.541405    1805 completion.go:236] Inline suggestion requested (request #860): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:158 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:44}
I0413 00:25:08.542979    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\n"},{"isSelected":true},{"content":"\r\nif 'pdf_file' in request.files and 'audio_data' in request.files:\r\n       # ==== Process PDF ====\r\n       pdf_file = request.files['pdf_file']\r\n       pdf_text = \"\"\r\n       if pdf_file.filename.endswith('.pdf'):\r\n           filename = secure_filename(pdf_file.filename)\r\n           pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n           pdf_file.save(pdf_path)\r\n   \r\n           with pdfplumber.open(pdf_path) as doc:\r\n               for page in doc.pages:\r\n                   text = page.extract_text()\r\n                   if text:\r\n                       pdf_text += text\r\n   \r\n       # ==== Process Audio ====\r\n       audio_file = request.files['audio_data']\r\n       if audio_file.filename != '':\r\n           audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n           audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n           audio_file.save(audio_path)\r\n   \r\n           with open(audio_path, 'rb') as f:\r\n               audio_data = f.read()\r\n   \r\n           audio_text = sample_recognize(audio_data)\r\n           print(\"Transcribed audio:\", audio_text)\r\n   \r\n           # Combine prompt + audio\r\n           final_prompt = prompt + audio_text\r\n   \r\n           # ==== Check for empty strings before calling the model ====\r\n           if pdf_text.strip() and final_prompt.strip():\r\n               contents = [pdf_text, final_prompt]\r\n               response = model.generate_content(contents)\r\n               model_output = response.text\r\n   \r\n               print(\"Model output:\", model_output)\r\n   \r\n               with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                   f.write(model_output)\r\n           else:\r\n               print(\"PDF or audio input is empty. Skipping model call.\")\r\n   else:\r\n       print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-1986f5d3-c24e-4815-a1c4-a1f4fa4afc64"}
I0413 00:25:08.787419    1805 completion.go:609] Code complete response for request #860 after post-processing: &{Suggestions:[{Content:def upload_file(): Citations:[] PromptCitations:[] Score:-0.9090038 Telemetry:{CommentLines:<nil>}} {Content:def upload_file():
    Citations:[] PromptCitations:[] Score:-2.9587004 Telemetry:{CommentLines:<nil>}}] TraceID:b11b80d2a143c692 RequestID:cloudcode-740584268-1986f5d3-c24e-4815-a1c4-a1f4fa4afc64 ServerTiming:gfet5t7;dur=212, gfet4t7; dur=242 NetPlusServerTiming:244.347639ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 44 - Completion result obtained from language client
Completion Provider - completion # 44 - Typed over previous completion
I0413 00:25:09.198069    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-1986f5d3-c24e-4815-a1c4-a1f4fa4afc64","acceptedSuggestion":"def upload_file():\n   ","acceptedChars":18,"partial":true}
I0413 00:25:09.254118    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:09.254189    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:09.254251    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:09.254268    1805 conversation.go:950] Unable to retrieve excluded files for request #864: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:14.889240    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:14.889399    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:14.889452    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:14.889466    1805 conversation.go:950] Unable to retrieve excluded files for request #872: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:15.859498    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:15.859545    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:15.859581    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:15.859591    1805 conversation.go:950] Unable to retrieve excluded files for request #875: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:17.033337    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:17.033406    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:17.033446    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:17.033464    1805 conversation.go:950] Unable to retrieve excluded files for request #878: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:18.619643    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:18.619702    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:18.619745    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:18.619764    1805 conversation.go:950] Unable to retrieve excluded files for request #917: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:18.810357    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:18.810420    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:18.810459    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:18.810475    1805 conversation.go:950] Unable to retrieve excluded files for request #919: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:19.000099    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:19.000158    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:19.000203    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:19.000220    1805 conversation.go:950] Unable to retrieve excluded files for request #921: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:19.177331    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:19.177416    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:19.177589    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:19.177617    1805 conversation.go:950] Unable to retrieve excluded files for request #923: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:19.348547    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:19.348723    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:19.348804    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:19.348878    1805 conversation.go:950] Unable to retrieve excluded files for request #925: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:19.539790    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:19.539848    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:19.539890    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:19.539900    1805 conversation.go:950] Unable to retrieve excluded files for request #927: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:19.928612    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:19.928655    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:25:19.928689    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:19.928699    1805 conversation.go:950] Unable to retrieve excluded files for request #930: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 45 - New completion requested from language client at position {"line":159,"character":1}, triggerKind=1
I0413 00:25:20.518834    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:20.592771    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:20.592822    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:20.592875    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:20.592890    1805 conversation.go:950] Unable to retrieve excluded files for request #934: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:20.819292    1805 completion.go:236] Inline suggestion requested (request #933): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:159 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:45}
I0413 00:25:20.820825    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n    else:\r\n        print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-8eea1ddd-8efb-4c4e-b0b2-e149517f00d3"}
I0413 00:25:21.068943    1805 completion.go:609] Code complete response for request #933 after post-processing: &{Suggestions:[] TraceID:72b69a7ef5efc8b1 RequestID:cloudcode-740584268-8eea1ddd-8efb-4c4e-b0b2-e149517f00d3 ServerTiming:gfet5t7;dur=199, gfet4t7; dur=246 NetPlusServerTiming:248.019848ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 45 - Completion result obtained from language client
Completion Provider - completion # 46 - New completion requested from language client at position {"line":159,"character":2}, triggerKind=1
I0413 00:25:21.621029    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:21.693875    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:21.693921    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:21.693966    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:21.693983    1805 conversation.go:950] Unable to retrieve excluded files for request #939: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:21.836793    1805 handler.go:159] cancel was requested for: 938, needs to be canceled: true
Completion Provider - completion # 47 - New completion requested from language client at position {"line":159,"character":3}, triggerKind=1
I0413 00:25:21.862147    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:21.936456    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:21.936511    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:21.936556    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:21.936570    1805 conversation.go:950] Unable to retrieve excluded files for request #942: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:22.144634    1805 handler.go:159] cancel was requested for: 941, needs to be canceled: true
Completion Provider - completion # 48 - New completion requested from language client at position {"line":159,"character":4}, triggerKind=1
I0413 00:25:22.171118    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:22.240309    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:22.240377    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:22.240414    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:22.240431    1805 conversation.go:950] Unable to retrieve excluded files for request #946: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:22.471827    1805 completion.go:236] Inline suggestion requested (request #945): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:159 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:48}
I0413 00:25:22.474416    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    "},{"isSelected":true},{"content":"if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n           # ==== Process PDF ====\r\n           pdf_file = request.files['pdf_file']\r\n           pdf_text = \"\"\r\n           if pdf_file.filename.endswith('.pdf'):\r\n               filename = secure_filename(pdf_file.filename)\r\n               pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n               pdf_file.save(pdf_path)\r\n       \r\n               with pdfplumber.open(pdf_path) as doc:\r\n                   for page in doc.pages:\r\n                       text = page.extract_text()\r\n                       if text:\r\n                           pdf_text += text\r\n       \r\n           # ==== Process Audio ====\r\n           audio_file = request.files['audio_data']\r\n           if audio_file.filename != '':\r\n               audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n               audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n               audio_file.save(audio_path)\r\n       \r\n               with open(audio_path, 'rb') as f:\r\n                   audio_data = f.read()\r\n       \r\n               audio_text = sample_recognize(audio_data)\r\n               print(\"Transcribed audio:\", audio_text)\r\n       \r\n               # Combine prompt + audio\r\n               final_prompt = prompt + audio_text\r\n       \r\n               # ==== Check for empty strings before calling the model ====\r\n               if pdf_text.strip() and final_prompt.strip():\r\n                   contents = [pdf_text, final_prompt]\r\n                   response = model.generate_content(contents)\r\n                   model_output = response.text\r\n       \r\n                   print(\"Model output:\", model_output)\r\n       \r\n                   with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                       f.write(model_output)\r\n               else:\r\n                   print(\"PDF or audio input is empty. Skipping model call.\")\r\n       else:\r\n           print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d8a6e2ac-4350-4784-bf17-bc4df9ec60e0"}
I0413 00:25:22.696090    1805 completion.go:609] Code complete response for request #945 after post-processing: &{Suggestions:[] TraceID:7bb78fad07ee4008 RequestID:cloudcode-740584268-d8a6e2ac-4350-4784-bf17-bc4df9ec60e0 ServerTiming:gfet5t7;dur=178, gfet4t7; dur=219 NetPlusServerTiming:221.54089ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 48 - Completion result obtained from language client
Completion Provider - completion # 49 - New completion requested from language client at position {"line":159,"character":0}, triggerKind=1
I0413 00:25:26.650975    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:26.745096    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:26.745146    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:26.745182    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:26.745200    1805 conversation.go:950] Unable to retrieve excluded files for request #954: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:26.951717    1805 completion.go:236] Inline suggestion requested (request #953): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:159 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:49}
Completion Provider - completion # 49 - Completion result obtained from language client
Completion Provider - completion # 50 - New completion requested from language client at position {"line":159,"character":1}, triggerKind=1
I0413 00:25:30.380676    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:30.459894    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:30.459954    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:30.459999    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:30.460016    1805 conversation.go:950] Unable to retrieve excluded files for request #961: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:30.681310    1805 completion.go:236] Inline suggestion requested (request #960): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:159 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:50}
I0413 00:25:30.682968    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[] TraceID:72b69a7ef5efc8b1 RequestID:cloudcode-740584268-8eea1ddd-8efb-4c4e-b0b2-e149517f00d3 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:25:30.683072    1805 completion.go:609] Code complete response for request #960 after post-processing: &{Suggestions:[] TraceID:72b69a7ef5efc8b1 RequestID:cloudcode-740584268-8eea1ddd-8efb-4c4e-b0b2-e149517f00d3 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 50 - Completion result obtained from language client
I0413 00:25:37.776872    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:25:39.496430    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:39.496488    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:39.496533    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:39.496552    1805 conversation.go:950] Unable to retrieve excluded files for request #970: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 51 - New completion requested from language client at position {"line":202,"character":0}, triggerKind=1
I0413 00:25:40.177685    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:40.239003    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:40.239107    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:40.239202    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:40.239235    1805 conversation.go:950] Unable to retrieve excluded files for request #974: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:40.478275    1805 completion.go:236] Inline suggestion requested (request #973): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:202 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:51}
Completion Provider - completion # 51 - Completion result obtained from language client
I0413 00:25:41.923614    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:41.923668    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:41.923708    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:41.923721    1805 conversation.go:950] Unable to retrieve excluded files for request #980: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 52 - New completion requested from language client at position {"line":203,"character":4}, triggerKind=1
I0413 00:25:42.510444    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:42.574372    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:42.574431    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:42.574568    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:42.574614    1805 conversation.go:950] Unable to retrieve excluded files for request #984: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:42.811905    1805 completion.go:236] Inline suggestion requested (request #983): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:203 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:52}
Completion Provider - completion # 52 - Completion result obtained from language client
I0413 00:25:45.067917    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:45.067970    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:25:45.068006    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:45.068022    1805 conversation.go:950] Unable to retrieve excluded files for request #992: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 53 - New completion requested from language client at position {"line":202,"character":1}, triggerKind=1
I0413 00:25:45.455692    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:45.527585    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:45.527627    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:45.527662    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:45.527672    1805 conversation.go:950] Unable to retrieve excluded files for request #996: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:25:45.756265    1805 completion.go:236] Inline suggestion requested (request #995): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:202 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:53}
I0413 00:25:45.761344    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","DELETE","DELETE","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n "},{"isSelected":true},{"content":"else:\r\n    print(\"PDF or audio file missing.\")\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4b8e7751-23d3-4823-833f-bd3092e2acf3"}
I0413 00:25:46.052103    1805 completion.go:609] Code complete response for request #995 after post-processing: &{Suggestions:[{Content:   
        return redirect('/')
  Citations:[] PromptCitations:[] Score:-2.5286043 Telemetry:{CommentLines:<nil>}}] TraceID:db4d80917e103522 RequestID:cloudcode-740584268-4b8e7751-23d3-4823-833f-bd3092e2acf3 ServerTiming:gfet5t7;dur=242, gfet4t7; dur=287 NetPlusServerTiming:290.466834ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 53 - Completion result obtained from language client
I0413 00:25:48.751421    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:25:48.751475    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:25:48.751519    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:25:48.751533    1805 conversation.go:950] Unable to retrieve excluded files for request #1001: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:05.917631    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:05.917694    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:05.917742    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:05.917756    1805 conversation.go:950] Unable to retrieve excluded files for request #1005: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:08.543257    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:08.543308    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:08.543347    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:08.543389    1805 conversation.go:950] Unable to retrieve excluded files for request #1008: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:09.652121    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:09.652163    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:09.652210    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:09.652235    1805 conversation.go:950] Unable to retrieve excluded files for request #1012: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:10.564478    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:10.564526    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:10.564572    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:10.564584    1805 conversation.go:950] Unable to retrieve excluded files for request #1016: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:12.096601    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:12.096668    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:12.096715    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:12.096731    1805 conversation.go:950] Unable to retrieve excluded files for request #1021: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:12.370014    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:12.370090    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:12.370137    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:12.370155    1805 conversation.go:950] Unable to retrieve excluded files for request #1024: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:13.177634    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:13.177685    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:13.177721    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:13.177732    1805 conversation.go:950] Unable to retrieve excluded files for request #1027: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:14.453383    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:14.453428    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:14.453551    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:14.453582    1805 conversation.go:950] Unable to retrieve excluded files for request #1030: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:15.839565    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:15.839634    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:15.839668    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:15.839680    1805 conversation.go:950] Unable to retrieve excluded files for request #1033: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:17.139788    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:17.139860    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:17.139899    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:17.139922    1805 conversation.go:950] Unable to retrieve excluded files for request #1037: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:17.369648    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:17.369695    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:17.369739    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:17.369754    1805 conversation.go:950] Unable to retrieve excluded files for request #1039: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:18.923470    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:18.923621    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:18.923769    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:18.923884    1805 conversation.go:950] Unable to retrieve excluded files for request #1044: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:20.276419    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:20.276465    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:20.276507    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:20.276520    1805 conversation.go:950] Unable to retrieve excluded files for request #1048: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:23.668038    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:23.668097    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:23.668132    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:23.668141    1805 conversation.go:950] Unable to retrieve excluded files for request #1053: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:24.821808    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:24.821853    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:24.821901    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:24.821917    1805 conversation.go:950] Unable to retrieve excluded files for request #1056: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:27.274171    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:27.274229    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:27.274368    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:27.274463    1805 conversation.go:950] Unable to retrieve excluded files for request #1059: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:28.922963    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:28.923007    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:28.923080    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:28.923126    1805 conversation.go:950] Unable to retrieve excluded files for request #1061: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:31.823962    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:26:31.824006    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:26:31.824086    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:26:31.824103    1805 conversation.go:950] Unable to retrieve excluded files for request #1063: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:26:37.776889    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:28:15.986729    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:15.986781    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:28:15.986832    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:15.986851    1805 conversation.go:950] Unable to retrieve excluded files for request #1066: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 54 - New completion requested from language client at position {"line":204,"character":4}, triggerKind=1
I0413 00:28:16.427553    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:16.483357    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:16.483407    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:16.483450    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:16.483466    1805 conversation.go:950] Unable to retrieve excluded files for request #1070: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:16.728315    1805 completion.go:236] Inline suggestion requested (request #1069): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:204 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:54}
I0413 00:28:16.730848    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","DELETE","DELETE","ADD","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n else:\r\n    print(\"PDF or audio file missing.\")\r\n    "},{"isSelected":true},{"content":"\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4ac050e2-137c-41d6-a063-f7dd59b22369"}
I0413 00:28:17.126692    1805 completion.go:609] Code complete response for request #1069 after post-processing: &{Suggestions:[{Content:return redirect('/')
 return redirect('/')

 Citations:[] PromptCitations:[] Score:-3.8374085 Telemetry:{CommentLines:<nil>}}] TraceID:8c28ee1cb2c78d98 RequestID:cloudcode-740584268-4ac050e2-137c-41d6-a063-f7dd59b22369 ServerTiming:gfet5t7;dur=264, gfet4t7; dur=373 NetPlusServerTiming:395.752566ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 54 - Completion result obtained from language client
Completion Provider - completion # 55 - New completion requested from language client at position {"line":204,"character":0}, triggerKind=1
I0413 00:28:17.303530    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:28:17.374647    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:17.374692    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:28:17.374736    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:17.374751    1805 conversation.go:950] Unable to retrieve excluded files for request #1073: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:17.604562    1805 completion.go:236] Inline suggestion requested (request #1072): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:204 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:55}
Completion Provider - completion # 55 - Completion result obtained from language client
Completion Provider - completion # 56 - New completion requested from language client at position {"line":204,"character":20}, triggerKind=1
I0413 00:28:18.287920    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:18.346257    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:18.346304    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:18.346338    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:18.346349    1805 conversation.go:950] Unable to retrieve excluded files for request #1076: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:18.588892    1805 completion.go:236] Inline suggestion requested (request #1075): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:204 Character:20}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:56}
I0413 00:28:18.591244    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","ADD","UNKNOWN_EDIT","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n else:\r\n    print(\"PDF or audio file missing.\")\r\nreturn redirect('/')"},{"isSelected":true},{"content":"\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-8c1b335e-1ded-4c59-a9c8-07cd6609196b"}
I0413 00:28:18.872290    1805 completion.go:609] Code complete response for request #1075 after post-processing: &{Suggestions:[] TraceID:3f1dba31d9bccfee RequestID:cloudcode-740584268-8c1b335e-1ded-4c59-a9c8-07cd6609196b ServerTiming:gfet5t7;dur=228, gfet4t7; dur=277 NetPlusServerTiming:280.897742ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 56 - Completion result obtained from language client
I0413 00:28:19.496113    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:19.496179    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:19.496226    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:19.496242    1805 conversation.go:950] Unable to retrieve excluded files for request #1080: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:23.676758    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:23.676805    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:23.676846    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:23.676861    1805 conversation.go:950] Unable to retrieve excluded files for request #1082: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:37.776341    1805 life_cycle.go:277] codeReportBasicEvery: recomputing codereportbasic metric
I0413 00:28:37.776361    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:28:50.454994    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:50.455089    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:28:50.455131    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:50.455146    1805 conversation.go:950] Unable to retrieve excluded files for request #1087: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 57 - New completion requested from language client at position {"line":204,"character":1}, triggerKind=1
I0413 00:28:50.720331    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:28:50.784184    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:28:50.784225    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:28:50.784258    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:28:50.784268    1805 conversation.go:950] Unable to retrieve excluded files for request #1091: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:28:51.021164    1805 completion.go:236] Inline suggestion requested (request #1090): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:204 Character:1}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:57}
I0413 00:28:51.023243    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","UNKNOWN_EDIT","DELETE","UNKNOWN_EDIT","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n# @app.route('/upload', methods=['POST'])\r\n# def upload_file():\r\n#     pdf_text = \"\"\r\n#     if 'pdf_file' in request.files:\r\n#         pdf_file = request.files['pdf_file']\r\n#         if pdf_file.filename.endswith('.pdf'):\r\n#             filename = secure_filename(pdf_file.filename)\r\n#             pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             pdf_file.save(pdf_path)\r\n\r\n#             text = \"\"\r\n#             with pdfplumber.open(pdf_path) as doc:\r\n#                 for page in doc.pages:\r\n#                     pdf_text += page.extract_text()\r\n\r\n#             txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n#             txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n#             with open(pdf_path, 'w', encoding='utf-8') as f:\r\n#                 f.write(pdf_text)\r\n#             print(\"PDF uploaded:\", filename)\r\n#             return redirect('/')\r\n\r\n#     if 'audio_data' in request.files:\r\n#         file = request.files['audio_data']\r\n#         if file.filename == '':\r\n#             return redirect(request.url)\r\n#         if file:\r\n#             filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n#             file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n#             file.save(file_path)\r\n\r\n#             with open(file_path, 'rb') as f:\r\n#                 data = f.read()\r\n\r\n#             print(file_path)\r\n#             audio_converted_to_text = sample_recognize(data)\r\n#             print(audio_converted_to_text)\r\n            \r\n\r\n#             final_prompt = prompt + audio_converted_to_text\r\n            \r\n#             contents = [pdf_text, final_prompt]\r\n#             response = model.generate_content(contents)\r\n#             text = response.text\r\n\r\n#             print(text)\r\n\r\n#             with open(file_path + '.txt', 'w') as f:\r\n#                 f.write(text)\r\n\r\n#     return redirect('/')\r\n\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n if 'pdf_file' in request.files and 'audio_data' in request.files:\r\n        # ==== Process PDF ====\r\n        pdf_file = request.files['pdf_file']\r\n        pdf_text = \"\"\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n    \r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    text = page.extract_text()\r\n                    if text:\r\n                        pdf_text += text\r\n    \r\n        # ==== Process Audio ====\r\n        audio_file = request.files['audio_data']\r\n        if audio_file.filename != '':\r\n            audio_filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            audio_path = os.path.join(app.config['UPLOAD_FOLDER'], audio_filename)\r\n            audio_file.save(audio_path)\r\n    \r\n            with open(audio_path, 'rb') as f:\r\n                audio_data = f.read()\r\n    \r\n            audio_text = sample_recognize(audio_data)\r\n            print(\"Transcribed audio:\", audio_text)\r\n    \r\n            # Combine prompt + audio\r\n            final_prompt = prompt + audio_text\r\n    \r\n            # ==== Check for empty strings before calling the model ====\r\n            if pdf_text.strip() and final_prompt.strip():\r\n                contents = [pdf_text, final_prompt]\r\n                response = model.generate_content(contents)\r\n                model_output = response.text\r\n    \r\n                print(\"Model output:\", model_output)\r\n    \r\n                with open(audio_path + '.txt', 'w', encoding='utf-8') as f:\r\n                    f.write(model_output)\r\n            else:\r\n                print(\"PDF or audio input is empty. Skipping model call.\")\r\n else:\r\n    print(\"PDF or audio file missing.\")\r\n "},{"isSelected":true},{"content":"return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-dc37fc49-a149-42b1-8ab4-87ffa9b7f90c"}
I0413 00:28:51.260874    1805 completion.go:609] Code complete response for request #1090 after post-processing: &{Suggestions:[] TraceID:e12fddce7343fc13 RequestID:cloudcode-740584268-dc37fc49-a149-42b1-8ab4-87ffa9b7f90c ServerTiming:gfet5t7;dur=187, gfet4t7; dur=235 NetPlusServerTiming:237.542505ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 57 - Completion result obtained from language client
I0413 00:29:37.777039    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:30:04.674025    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:04.674106    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:04.674164    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:04.674182    1805 conversation.go:950] Unable to retrieve excluded files for request #1096: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:05.462737    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:05.462817    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:05.462884    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:05.462898    1805 conversation.go:950] Unable to retrieve excluded files for request #1099: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:06.913366    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:06.913560    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:06.913641    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:06.913661    1805 conversation.go:950] Unable to retrieve excluded files for request #1101: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:34.882388    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:34.882436    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:34.882475    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:34.882484    1805 conversation.go:950] Unable to retrieve excluded files for request #1105: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:35.257318    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:35.257353    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:35.257401    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:35.257418    1805 conversation.go:950] Unable to retrieve excluded files for request #1116: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:35.846493    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:35.846543    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:35.846587    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:35.846599    1805 conversation.go:950] Unable to retrieve excluded files for request #1142: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:36.892437    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:36.892503    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:36.892553    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:36.892567    1805 conversation.go:950] Unable to retrieve excluded files for request #1166: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:37.159756    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:37.159799    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:37.159938    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:37.160045    1805 conversation.go:950] Unable to retrieve excluded files for request #1171: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:37.274013    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:37.274113    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:30:37.274282    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:37.274304    1805 conversation.go:950] Unable to retrieve excluded files for request #1173: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 58 - New completion requested from language client at position {"line":157,"character":0}, triggerKind=1
I0413 00:30:38.318435    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:38.395427    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:38.395470    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:38.395518    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:38.395534    1805 conversation.go:950] Unable to retrieve excluded files for request #1177: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:38.619175    1805 completion.go:236] Inline suggestion requested (request #1176): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:157 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:58}
Completion Provider - completion # 58 - Completion result obtained from language client
Completion Provider - completion # 59 - New completion requested from language client at position {"line":156,"character":0}, triggerKind=1
I0413 00:30:39.666800    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:39.729753    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:39.729803    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:39.729847    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:39.729863    1805 conversation.go:950] Unable to retrieve excluded files for request #1181: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:39.967410    1805 completion.go:236] Inline suggestion requested (request #1180): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:156 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:59}
Completion Provider - completion # 59 - Completion result obtained from language client
Completion Provider - completion # 60 - New completion requested from language client at position {"line":155,"character":0}, triggerKind=1
I0413 00:30:40.082159    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:40.146430    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:40.146471    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:40.146522    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:40.146538    1805 conversation.go:950] Unable to retrieve excluded files for request #1184: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:40.383023    1805 completion.go:236] Inline suggestion requested (request #1183): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:155 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:60}
Completion Provider - completion # 60 - Completion result obtained from language client
I0413 00:30:42.077606    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:42.077661    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:42.077710    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:42.077728    1805 conversation.go:950] Unable to retrieve excluded files for request #1187: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:42.696934    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:42.696996    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:42.697034    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:42.697091    1805 conversation.go:950] Unable to retrieve excluded files for request #1210: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:43.257863    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:43.257916    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:43.257953    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:43.257971    1805 conversation.go:950] Unable to retrieve excluded files for request #1230: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:43.511181    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:43.511235    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:43.511279    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:43.511292    1805 conversation.go:950] Unable to retrieve excluded files for request #1233: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:44.025587    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:44.025636    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:44.025677    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:44.025693    1805 conversation.go:950] Unable to retrieve excluded files for request #1257: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:44.145586    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:44.145638    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:44.145674    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:44.145688    1805 conversation.go:950] Unable to retrieve excluded files for request #1260: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:44.374733    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:44.374796    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:44.374835    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:44.374849    1805 conversation.go:950] Unable to retrieve excluded files for request #1266: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:44.706828    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:44.706875    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:44.706913    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:44.706927    1805 conversation.go:950] Unable to retrieve excluded files for request #1276: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:45.056322    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:45.056403    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:45.056460    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:45.056476    1805 conversation.go:950] Unable to retrieve excluded files for request #1282: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:45.296713    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:45.296770    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:45.296904    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:45.296937    1805 conversation.go:950] Unable to retrieve excluded files for request #1286: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:45.875723    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:45.875778    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:45.875817    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:45.875830    1805 conversation.go:950] Unable to retrieve excluded files for request #1315: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:46.041752    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:46.041814    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:46.041865    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:46.041882    1805 conversation.go:950] Unable to retrieve excluded files for request #1320: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:46.573863    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:46.573918    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:46.573963    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:46.573979    1805 conversation.go:950] Unable to retrieve excluded files for request #1329: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:46.742615    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:46.742668    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:46.742706    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:46.742716    1805 conversation.go:950] Unable to retrieve excluded files for request #1332: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:47.008084    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:47.008131    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:47.008170    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:47.008186    1805 conversation.go:950] Unable to retrieve excluded files for request #1338: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:47.192499    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:47.192547    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:47.192589    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:47.192604    1805 conversation.go:950] Unable to retrieve excluded files for request #1343: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:47.345217    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:47.345270    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:47.345320    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:47.345330    1805 conversation.go:950] Unable to retrieve excluded files for request #1345: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:48.459244    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:48.459293    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:48.459330    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:48.459340    1805 conversation.go:950] Unable to retrieve excluded files for request #1348: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:30:51.322398    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:30:51.322455    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:30:51.322494    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:30:51.322511    1805 conversation.go:950] Unable to retrieve excluded files for request #1353: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:02.856935    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:02.856991    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:31:02.857035    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:02.857081    1805 conversation.go:950] Unable to retrieve excluded files for request #1355: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:03.544557    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:03.544607    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:31:03.544645    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:03.544659    1805 conversation.go:950] Unable to retrieve excluded files for request #1376: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:03.810548    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:03.810596    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:31:03.810643    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:03.810655    1805 conversation.go:950] Unable to retrieve excluded files for request #1379: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:03.978136    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:03.978192    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:31:03.978238    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:03.978252    1805 conversation.go:950] Unable to retrieve excluded files for request #1381: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:05.441001    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:05.441093    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:31:05.441143    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:05.441157    1805 conversation.go:950] Unable to retrieve excluded files for request #1385: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:16.448382    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:16.448436    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:31:16.448482    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:16.448495    1805 conversation.go:950] Unable to retrieve excluded files for request #1392: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:18.820074    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:18.820127    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:31:18.820161    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:18.820170    1805 conversation.go:950] Unable to retrieve excluded files for request #1396: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:19.742328    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:31:19.742385    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:31:19.742430    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:31:19.742445    1805 conversation.go:950] Unable to retrieve excluded files for request #1400: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:31:37.776198    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:32:45.186993    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:45.187042    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:32:45.187107    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:45.187120    1805 conversation.go:950] Unable to retrieve excluded files for request #1405: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:45.574387    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:45.574439    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:32:45.574490    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:45.574503    1805 conversation.go:950] Unable to retrieve excluded files for request #1416: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:45.791900    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:45.791949    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:32:45.791991    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:45.792005    1805 conversation.go:950] Unable to retrieve excluded files for request #1421: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:47.177703    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:47.177766    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:32:47.177812    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:47.177824    1805 conversation.go:950] Unable to retrieve excluded files for request #1424: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:48.809381    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:48.809439    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:32:48.809502    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:48.809517    1805 conversation.go:950] Unable to retrieve excluded files for request #1429: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 61 - New completion requested from language client at position {"line":125,"character":5}, triggerKind=1
I0413 00:32:49.472121    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:49.540782    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:49.540833    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:49.540880    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:49.540894    1805 conversation.go:950] Unable to retrieve excluded files for request #1433: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:49.772802    1805 completion.go:236] Inline suggestion requested (request #1432): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:5}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:61}
I0413 00:32:49.774947    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","UNKNOWN_EDIT","DELETE","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n     "},{"isSelected":true},{"content":"if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d2a5cd40-f590-419e-b34d-29701ac78d05"}
I0413 00:32:50.166586    1805 completion.go:609] Code complete response for request #1432 after post-processing: &{Suggestions:[] TraceID:ae6190438a7e8745 RequestID:cloudcode-740584268-d2a5cd40-f590-419e-b34d-29701ac78d05 ServerTiming:gfet5t7;dur=264, gfet4t7; dur=373 NetPlusServerTiming:391.451016ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 61 - Completion result obtained from language client
Completion Provider - completion # 62 - New completion requested from language client at position {"line":125,"character":6}, triggerKind=1
I0413 00:32:51.203726    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:51.264937    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:51.264982    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:51.265016    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:51.265027    1805 conversation.go:950] Unable to retrieve excluded files for request #1439: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:51.382562    1805 handler.go:159] cancel was requested for: 1438, needs to be canceled: true
Completion Provider - completion # 63 - New completion requested from language client at position {"line":125,"character":7}, triggerKind=1
I0413 00:32:51.422500    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:51.483792    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:51.483838    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:51.483880    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:51.483902    1805 conversation.go:950] Unable to retrieve excluded files for request #1442: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:51.723709    1805 completion.go:236] Inline suggestion requested (request #1441): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:7}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:63}
I0413 00:32:51.725034    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","DELETE","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n       "},{"isSelected":true},{"content":"if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-c0049199-37fa-4af3-b6ba-9778887734c5"}
I0413 00:32:51.906794    1805 handler.go:159] cancel was requested for: 1441, needs to be canceled: true
Completion Provider - completion # 64 - New completion requested from language client at position {"line":125,"character":8}, triggerKind=1
I0413 00:32:51.942268    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:52.006885    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:52.006945    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:52.006991    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:52.007011    1805 conversation.go:950] Unable to retrieve excluded files for request #1446: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:52.243109    1805 completion.go:236] Inline suggestion requested (request #1445): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:64}
I0413 00:32:52.244499    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n        "},{"isSelected":true},{"content":"if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-0969e1d0-2947-439f-a073-981829136061"}
I0413 00:32:52.542283    1805 completion.go:609] Code complete response for request #1445 after post-processing: &{Suggestions:[] TraceID:aec1dc831ef2ef88 RequestID:cloudcode-740584268-0969e1d0-2947-439f-a073-981829136061 ServerTiming:gfet5t7;dur=248, gfet4t7; dur=295 NetPlusServerTiming:297.692781ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 64 - Completion result obtained from language client
Completion Provider - completion # 65 - New completion requested from language client at position {"line":125,"character":4}, triggerKind=1
I0413 00:32:53.910749    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:32:53.979137    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:53.979293    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:32:53.979338    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:53.979353    1805 conversation.go:950] Unable to retrieve excluded files for request #1452: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:54.211582    1805 completion.go:236] Inline suggestion requested (request #1451): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:65}
Completion Provider - completion # 65 - Completion result obtained from language client
Completion Provider - completion # 66 - New completion requested from language client at position {"line":125,"character":5}, triggerKind=1
I0413 00:32:54.543533    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:54.604971    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:54.605016    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:54.605105    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:54.605118    1805 conversation.go:950] Unable to retrieve excluded files for request #1456: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:54.766164    1805 handler.go:159] cancel was requested for: 1455, needs to be canceled: true
I0413 00:32:54.767168    1805 handler.go:159] cancel was requested for: 1457, needs to be canceled: false
I0413 00:32:54.767187    1805 handler.go:163] cancel requested for 1457 but not found
Completion Provider - completion # 67 - New completion requested from language client at position {"line":125,"character":6}, triggerKind=1
I0413 00:32:54.796335    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:54.862947    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:32:54.862985    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:32:54.863019    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:32:54.863030    1805 conversation.go:950] Unable to retrieve excluded files for request #1460: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:32:55.096543    1805 completion.go:236] Inline suggestion requested (request #1459): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:6}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:67}
I0413 00:32:55.098810    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","DELETE","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n      "},{"isSelected":true},{"content":"if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4b1d386a-bba0-4285-bdd5-d8d21b58e828"}
I0413 00:32:55.358315    1805 completion.go:609] Code complete response for request #1459 after post-processing: &{Suggestions:[] TraceID:da49c5a27973ed92 RequestID:cloudcode-740584268-4b1d386a-bba0-4285-bdd5-d8d21b58e828 ServerTiming:gfet5t7;dur=226, gfet4t7; dur=257 NetPlusServerTiming:259.215774ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 67 - Completion result obtained from language client
Completion Provider - completion # 68 - New completion requested from language client at position {"line":125,"character":7}, triggerKind=1
I0413 00:33:03.929919    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:03.988150    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:03.988197    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:03.988241    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:03.988255    1805 conversation.go:950] Unable to retrieve excluded files for request #1467: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:04.230357    1805 completion.go:236] Inline suggestion requested (request #1466): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:7}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:68}
I0413 00:33:04.232306    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","DELETE","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n       "},{"isSelected":true},{"content":"if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-52bb9a0a-94b6-4669-9104-1893f36b411b"}
I0413 00:33:04.363182    1805 handler.go:159] cancel was requested for: 1466, needs to be canceled: true
Completion Provider - completion # 69 - New completion requested from language client at position {"line":125,"character":8}, triggerKind=1
I0413 00:33:04.395875    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:04.462582    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:04.462626    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:04.462676    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:04.462691    1805 conversation.go:950] Unable to retrieve excluded files for request #1471: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:04.696566    1805 completion.go:236] Inline suggestion requested (request #1470): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:69}
I0413 00:33:04.698242    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[] TraceID:aec1dc831ef2ef88 RequestID:cloudcode-740584268-0969e1d0-2947-439f-a073-981829136061 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:33:04.698325    1805 completion.go:609] Code complete response for request #1470 after post-processing: &{Suggestions:[] TraceID:aec1dc831ef2ef88 RequestID:cloudcode-740584268-0969e1d0-2947-439f-a073-981829136061 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 69 - Completion result obtained from language client
I0413 00:33:08.761283    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:08.761337    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:08.761411    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:08.761426    1805 conversation.go:950] Unable to retrieve excluded files for request #1479: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 70 - New completion requested from language client at position {"line":126,"character":9}, triggerKind=1
I0413 00:33:09.516587    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:09.583824    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:09.583873    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:09.583919    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:09.583933    1805 conversation.go:950] Unable to retrieve excluded files for request #1484: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:09.817429    1805 completion.go:236] Inline suggestion requested (request #1483): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:126 Character:9}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:70}
I0413 00:33:09.819023    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n        if 'audio_data' in request.files:\r\n         "},{"isSelected":true},{"content":"file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b873bdd9-fe2f-44ec-9cee-15c2e1c7c985"}
I0413 00:33:10.019277    1805 completion.go:609] Code complete response for request #1483 after post-processing: &{Suggestions:[] TraceID:1ad9762d3a37bd32 RequestID:cloudcode-740584268-b873bdd9-fe2f-44ec-9cee-15c2e1c7c985 ServerTiming:gfet5t7;dur=164, gfet4t7; dur=198 NetPlusServerTiming:200.142983ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 70 - Completion result obtained from language client
I0413 00:33:33.445258    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:33.445313    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:33.445369    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:33.445390    1805 conversation.go:950] Unable to retrieve excluded files for request #1492: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 71 - New completion requested from language client at position {"line":127,"character":9}, triggerKind=1
I0413 00:33:33.711924    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:33.774625    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:33.774680    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:33.774722    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:33.774739    1805 conversation.go:950] Unable to retrieve excluded files for request #1496: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:34.012677    1805 completion.go:236] Inline suggestion requested (request #1495): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:127 Character:9}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:71}
I0413 00:33:34.014636    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n        if 'audio_data' in request.files:\r\n         file = request.files['audio_data']\r\n         "},{"isSelected":true},{"content":"if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d456cbda-f453-4cf6-b3ca-02622d666150"}
I0413 00:33:34.286884    1805 completion.go:609] Code complete response for request #1495 after post-processing: &{Suggestions:[] TraceID:205fc37134097d71 RequestID:cloudcode-740584268-d456cbda-f453-4cf6-b3ca-02622d666150 ServerTiming:gfet5t7;dur=235, gfet4t7; dur=270 NetPlusServerTiming:272.137575ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 71 - Completion result obtained from language client
I0413 00:33:35.528583    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:35.528630    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:35.528677    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:35.528694    1805 conversation.go:950] Unable to retrieve excluded files for request #1501: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 72 - New completion requested from language client at position {"line":129,"character":8}, triggerKind=1
I0413 00:33:35.986933    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:36.030993    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:36.031079    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:36.031124    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:36.031135    1805 conversation.go:950] Unable to retrieve excluded files for request #1504: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:36.287584    1805 completion.go:236] Inline suggestion requested (request #1503): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:129 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:72}
I0413 00:33:36.289417    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n        if 'audio_data' in request.files:\r\n         file = request.files['audio_data']\r\n         if file.filename == '':\r\n            return redirect(request.url)\r\n        "},{"isSelected":true},{"content":" if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-5f3b7048-bd67-44e1-8158-a942076839a7"}
I0413 00:33:36.565512    1805 completion.go:609] Code complete response for request #1503 after post-processing: &{Suggestions:[{Content:if file and allowed_file(file.filename):
            Citations:[] PromptCitations:[] Score:-1.991292 Telemetry:{CommentLines:<nil>}} {Content:
        if file and allowed_file(file.filename):
            Citations:[] PromptCitations:[] Score:-3.2575648 Telemetry:{CommentLines:<nil>}}] TraceID:9612a0cc6a50a3b5 RequestID:cloudcode-740584268-5f3b7048-bd67-44e1-8158-a942076839a7 ServerTiming:gfet5t7;dur=238, gfet4t7; dur=273 NetPlusServerTiming:275.928541ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 72 - Completion result obtained from language client
I0413 00:33:37.686931    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:37.686969    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:37.687002    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:37.687012    1805 conversation.go:950] Unable to retrieve excluded files for request #1508: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:33:37.776931    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:33:43.879673    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:33:43.879724    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:33:43.879846    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:33:43.879874    1805 conversation.go:950] Unable to retrieve excluded files for request #1512: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:34:41.606541    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:41.606593    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:34:41.607027    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:41.607082    1805 conversation.go:950] Unable to retrieve excluded files for request #1516: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 73 - New completion requested from language client at position {"line":125,"character":4}, triggerKind=1
I0413 00:34:42.387734    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:42.456003    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:42.456079    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:42.456127    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:42.456144    1805 conversation.go:950] Unable to retrieve excluded files for request #1520: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:34:42.688885    1805 completion.go:236] Inline suggestion requested (request #1519): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:125 Character:4}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:73}
Completion Provider - completion # 73 - Completion result obtained from language client
I0413 00:34:45.100866    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:45.100914    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:45.100959    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:45.100975    1805 conversation.go:950] Unable to retrieve excluded files for request #1525: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 74 - New completion requested from language client at position {"line":127,"character":8}, triggerKind=1
I0413 00:34:45.488568    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:45.550009    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:45.550136    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:45.550187    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:45.550287    1805 conversation.go:950] Unable to retrieve excluded files for request #1529: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:34:45.789365    1805 completion.go:236] Inline suggestion requested (request #1528): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:127 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:74}
Completion Provider - completion # 74 - Completion result obtained from language client
I0413 00:34:46.934847    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:46.934898    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:46.934946    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:46.934966    1805 conversation.go:950] Unable to retrieve excluded files for request #1535: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 75 - New completion requested from language client at position {"line":129,"character":8}, triggerKind=1
I0413 00:34:47.382108    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:47.447337    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:47.447403    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:47.447451    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:47.447468    1805 conversation.go:950] Unable to retrieve excluded files for request #1539: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:34:47.682463    1805 completion.go:236] Inline suggestion requested (request #1538): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:129 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:75}
Completion Provider - completion # 75 - Completion result obtained from language client
I0413 00:34:49.160664    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:49.160711    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:49.160755    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:49.160778    1805 conversation.go:950] Unable to retrieve excluded files for request #1546: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 76 - New completion requested from language client at position {"line":126,"character":8}, triggerKind=1
I0413 00:34:50.083808    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:50.147915    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:50.147969    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:50.148015    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:50.148030    1805 conversation.go:950] Unable to retrieve excluded files for request #1551: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:34:50.384361    1805 completion.go:236] Inline suggestion requested (request #1550): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:126 Character:8}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:76}
Completion Provider - completion # 76 - Completion result obtained from language client
I0413 00:34:52.339438    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:34:52.339494    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:34:52.339539    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:34:52.339555    1805 conversation.go:950] Unable to retrieve excluded files for request #1558: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:01.154406    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:35:01.154467    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:35:01.154513    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:35:01.154532    1805 conversation.go:950] Unable to retrieve excluded files for request #1560: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:05.576523    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:35:05.576582    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:35:05.576632    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:35:05.576646    1805 conversation.go:950] Unable to retrieve excluded files for request #1563: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:08.300655    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:35:08.300716    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:35:08.300761    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:35:08.300778    1805 conversation.go:950] Unable to retrieve excluded files for request #1566: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:11.053211    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:35:11.053254    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:35:11.053328    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:35:11.053340    1805 conversation.go:950] Unable to retrieve excluded files for request #1568: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:12.438676    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:35:12.438736    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:35:12.438784    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:35:12.438800    1805 conversation.go:950] Unable to retrieve excluded files for request #1571: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:35:37.776628    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:36:02.717623    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:02.717681    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:02.717727    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:02.717741    1805 conversation.go:950] Unable to retrieve excluded files for request #1574: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:03.878970    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:03.879202    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:03.879278    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:03.879295    1805 conversation.go:950] Unable to retrieve excluded files for request #1577: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:05.079801    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:05.079848    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:05.079884    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:05.079894    1805 conversation.go:950] Unable to retrieve excluded files for request #1580: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:07.329010    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:07.329069    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:07.329149    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:07.329160    1805 conversation.go:950] Unable to retrieve excluded files for request #1582: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:08.355178    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:08.355236    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:08.355285    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:08.355299    1805 conversation.go:950] Unable to retrieve excluded files for request #1585: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:47.247833    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:47.247887    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:47.247934    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:47.247949    1805 conversation.go:950] Unable to retrieve excluded files for request #1589: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:48.106277    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:48.106325    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:48.106359    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:48.106369    1805 conversation.go:950] Unable to retrieve excluded files for request #1591: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:36:59.774810    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:36:59.774853    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:36:59.774886    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:36:59.774899    1805 conversation.go:950] Unable to retrieve excluded files for request #1593: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:01.531443    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:01.531487    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:37:01.531525    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:01.531535    1805 conversation.go:950] Unable to retrieve excluded files for request #1595: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:22.584648    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:22.584712    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:37:22.584762    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:22.584777    1805 conversation.go:950] Unable to retrieve excluded files for request #1597: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - New completion requested from language client at position {"line":143,"character":12}, triggerKind=1
I0413 00:37:22.951244    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:23.015295    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:23.015350    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:23.015387    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:23.015403    1805 conversation.go:950] Unable to retrieve excluded files for request #1601: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:23.251955    1805 completion.go:236] Inline suggestion requested (request #1600): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:143 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:77}
I0413 00:37:23.254191    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","DELETE","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            "},{"isSelected":true},{"content":"\r\n            \r\n            contents = [pdf_text, final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c"}
I0413 00:37:23.639126    1805 completion.go:609] Code complete response for request #1600 after post-processing: &{Suggestions:[{Content:print(final_prompt) Citations:[] PromptCitations:[] Score:-1.3482134 Telemetry:{CommentLines:<nil>}} {Content:print(final_prompt)
 Citations:[] PromptCitations:[] Score:-2.220902 Telemetry:{CommentLines:<nil>}}] TraceID:560d276623047373 RequestID:cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c ServerTiming:gfet5t7;dur=261, gfet4t7; dur=368 NetPlusServerTiming:384.682095ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 77 - Completion result obtained from language client
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:24.534970    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":1,"partial":true}
E0413 00:37:24.535107    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:24.535127    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":1,"partial":true}
I0413 00:37:24.581021    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:24.581101    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:24.581141    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:24.581155    1805 conversation.go:950] Unable to retrieve excluded files for request #1607: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:24.888872    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":2,"partial":true}
E0413 00:37:24.888987    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:24.889003    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":2,"partial":true}
I0413 00:37:24.934438    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:24.934505    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:24.934555    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:24.934569    1805 conversation.go:950] Unable to retrieve excluded files for request #1612: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:25.008779    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":3,"partial":true}
E0413 00:37:25.008943    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:25.008963    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":3,"partial":true}
I0413 00:37:25.063168    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:25.063223    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:25.063264    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:25.063286    1805 conversation.go:950] Unable to retrieve excluded files for request #1616: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:25.221421    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":4,"partial":true}
E0413 00:37:25.221528    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:25.221544    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":4,"partial":true}
I0413 00:37:25.281147    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:25.281188    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:25.281218    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:25.281228    1805 conversation.go:950] Unable to retrieve excluded files for request #1620: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:25.375210    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":5,"partial":true}
E0413 00:37:25.375367    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:25.375387    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":5,"partial":true}
I0413 00:37:25.414354    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:25.414401    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:25.414438    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:25.414453    1805 conversation.go:950] Unable to retrieve excluded files for request #1624: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:25.787649    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":5,"partial":true}
E0413 00:37:25.787735    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:25.787753    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":5,"partial":true}
Completion Provider - completion # 77 - Typed over previous completion
I0413 00:37:26.242146    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":5,"partial":true}
E0413 00:37:26.242235    1805 command.go:243] accepted suggestion not found in cache (print(final_prompt)
            ) for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:26.242252    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":5,"partial":true}
I0413 00:37:27.488842    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)","acceptedChars":19,"partial":false}
Completion Provider - completion # 77 - Typed over previous completion
W0413 00:37:27.533813    1805 command.go:131] Failed to update basic retention info: completion already fully accepted for IDESessionIndex=20250413_1, CompletionIndex=77
I0413 00:37:27.533868    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-72a1c395-f308-4b5d-b59d-ac63dfa2563c","acceptedSuggestion":"print(final_prompt)\n            \r","acceptedChars":19,"partial":true}
I0413 00:37:27.586607    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:27.586666    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:27.586729    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:27.586739    1805 conversation.go:950] Unable to retrieve excluded files for request #1635: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:29.831817    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:29.831860    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:29.831903    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:29.831916    1805 conversation.go:950] Unable to retrieve excluded files for request #1640: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:30.567086    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:30.567136    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:30.567172    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:30.567184    1805 conversation.go:950] Unable to retrieve excluded files for request #1643: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:37.776618    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:37:40.520859    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:40.520908    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:40.520944    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:40.520958    1805 conversation.go:950] Unable to retrieve excluded files for request #1646: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:42.163691    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:42.163767    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:42.163986    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:42.164036    1805 conversation.go:950] Unable to retrieve excluded files for request #1649: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:45.830763    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:45.830827    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:45.830893    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:45.830909    1805 conversation.go:950] Unable to retrieve excluded files for request #1652: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:46.583228    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:46.583286    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:46.583333    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:46.583347    1805 conversation.go:950] Unable to retrieve excluded files for request #1678: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:46.774777    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:46.774825    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:37:46.774867    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:46.774885    1805 conversation.go:950] Unable to retrieve excluded files for request #1680: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:48.791899    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:48.791951    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:48.791992    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:48.792005    1805 conversation.go:950] Unable to retrieve excluded files for request #1683: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:50.061589    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:50.061633    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:50.061678    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:50.061691    1805 conversation.go:950] Unable to retrieve excluded files for request #1687: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:53.639847    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:53.639893    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:53.639935    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:53.639952    1805 conversation.go:950] Unable to retrieve excluded files for request #1690: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:54.103109    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:54.103159    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:54.103195    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:54.103220    1805 conversation.go:950] Unable to retrieve excluded files for request #1703: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:55.430237    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:55.430284    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:55.430335    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:55.430351    1805 conversation.go:950] Unable to retrieve excluded files for request #1706: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:37:59.314689    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:37:59.314730    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:37:59.314778    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:37:59.314790    1805 conversation.go:950] Unable to retrieve excluded files for request #1710: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:00.350423    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:00.350476    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:00.350524    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:00.350537    1805 conversation.go:950] Unable to retrieve excluded files for request #1713: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:03.169867    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:03.169930    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:03.169980    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:03.169995    1805 conversation.go:950] Unable to retrieve excluded files for request #1715: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:03.637325    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:03.637377    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:03.637417    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:03.637427    1805 conversation.go:950] Unable to retrieve excluded files for request #1727: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:03.908885    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:03.908933    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:03.908976    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:03.908993    1805 conversation.go:950] Unable to retrieve excluded files for request #1734: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:04.135147    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:04.135197    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:04.135244    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:04.135261    1805 conversation.go:950] Unable to retrieve excluded files for request #1736: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:05.357518    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:05.357564    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:05.357607    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:05.357619    1805 conversation.go:950] Unable to retrieve excluded files for request #1739: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:06.627789    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:06.627840    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:06.627880    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:06.627890    1805 conversation.go:950] Unable to retrieve excluded files for request #1743: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:07.924132    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:07.924196    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:07.924239    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:07.924253    1805 conversation.go:950] Unable to retrieve excluded files for request #1746: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:09.664867    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:09.664926    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:09.664975    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:09.664988    1805 conversation.go:950] Unable to retrieve excluded files for request #1750: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:10.882760    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:10.882801    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:10.882834    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:10.882846    1805 conversation.go:950] Unable to retrieve excluded files for request #1754: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:12.402156    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:12.402199    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:12.402232    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:12.402242    1805 conversation.go:950] Unable to retrieve excluded files for request #1756: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:15.831993    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:38:15.832039    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:38:15.832114    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:38:15.832125    1805 conversation.go:950] Unable to retrieve excluded files for request #1758: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:38:37.776628    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:38:37.776715    1805 life_cycle.go:277] codeReportBasicEvery: recomputing codereportbasic metric
I0413 00:39:13.294575    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:39:13.294630    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:39:13.294670    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:39:13.294680    1805 conversation.go:950] Unable to retrieve excluded files for request #1761: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:39:14.753348    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:39:14.753407    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:39:14.753448    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:39:14.753464    1805 conversation.go:950] Unable to retrieve excluded files for request #1764: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:13.903775    1805 handler.go:159] cancel was requested for: 1769, needs to be canceled: false
I0413 00:40:13.903799    1805 handler.go:163] cancel requested for 1769 but not found
I0413 00:40:14.239393    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:14.239469    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:14.239531    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:14.239550    1805 conversation.go:950] Unable to retrieve excluded files for request #1772: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:18.423228    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:18.423277    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:18.423328    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:18.423344    1805 conversation.go:950] Unable to retrieve excluded files for request #1775: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:25.853133    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:25.853189    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:25.853260    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:25.853273    1805 conversation.go:950] Unable to retrieve excluded files for request #1777: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:26.487634    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:26.487705    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:26.487750    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:26.487770    1805 conversation.go:950] Unable to retrieve excluded files for request #1790: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:26.687401    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:26.687463    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:26.687510    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:26.687523    1805 conversation.go:950] Unable to retrieve excluded files for request #1792: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:27.834357    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:27.834402    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:27.834446    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:27.834460    1805 conversation.go:950] Unable to retrieve excluded files for request #1796: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:28.854991    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:28.855084    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:28.855130    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:28.855141    1805 conversation.go:950] Unable to retrieve excluded files for request #1799: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:29.837435    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:29.837500    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:29.837538    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:29.837556    1805 conversation.go:950] Unable to retrieve excluded files for request #1819: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:30.070361    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:30.070409    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:40:30.070444    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:30.070454    1805 conversation.go:950] Unable to retrieve excluded files for request #1822: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:31.084963    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:31.085007    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:31.085042    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:31.085090    1805 conversation.go:950] Unable to retrieve excluded files for request #1825: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:32.839741    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:32.839822    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:32.839887    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:32.839902    1805 conversation.go:950] Unable to retrieve excluded files for request #1829: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:35.170116    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:35.170166    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:35.170206    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:35.170221    1805 conversation.go:950] Unable to retrieve excluded files for request #1833: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 78 - New completion requested from language client at position {"line":145,"character":33}, triggerKind=1
I0413 00:40:35.666225    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:35.726398    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:35.726451    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:35.726486    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:35.726501    1805 conversation.go:950] Unable to retrieve excluded files for request #1837: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:35.966957    1805 completion.go:236] Inline suggestion requested (request #1836): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:33}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:78}
Completion Provider - completion # 78 - Completion result obtained from language client
I0413 00:40:36.230076    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:36.230120    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.230158    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:36.230172    1805 conversation.go:950] Unable to retrieve excluded files for request #1840: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 79 - New completion requested from language client at position {"line":145,"character":28}, triggerKind=1
I0413 00:40:36.296721    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.351463    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:36.351514    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.351556    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:36.351570    1805 conversation.go:950] Unable to retrieve excluded files for request #1846: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:36.404636    1805 handler.go:159] cancel was requested for: 1845, needs to be canceled: true
Completion Provider - completion # 80 - New completion requested from language client at position {"line":145,"character":27}, triggerKind=1
I0413 00:40:36.447975    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.503373    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:36.503435    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.503475    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:36.503491    1805 conversation.go:950] Unable to retrieve excluded files for request #1849: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:36.689201    1805 handler.go:159] cancel was requested for: 1848, needs to be canceled: true
Completion Provider - completion # 81 - New completion requested from language client at position {"line":145,"character":26}, triggerKind=1
I0413 00:40:36.724189    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.787708    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:36.787814    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:36.787867    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:36.787881    1805 conversation.go:950] Unable to retrieve excluded files for request #1853: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:36.903944    1805 handler.go:159] cancel was requested for: 1852, needs to be canceled: true
Completion Provider - completion # 82 - New completion requested from language client at position {"line":145,"character":25}, triggerKind=1
I0413 00:40:36.940341    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:37.003101    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:37.003148    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:37.003186    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:37.003199    1805 conversation.go:950] Unable to retrieve excluded files for request #1856: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:37.171761    1805 handler.go:159] cancel was requested for: 1855, needs to be canceled: true
Completion Provider - completion # 83 - New completion requested from language client at position {"line":145,"character":24}, triggerKind=1
I0413 00:40:37.200628    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:37.269875    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:37.269925    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:37.269966    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:37.269980    1805 conversation.go:950] Unable to retrieve excluded files for request #1860: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:37.500863    1805 completion.go:236] Inline suggestion requested (request #1859): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:24}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:83}
Completion Provider - completion # 83 - Completion result obtained from language client
I0413 00:40:37.776573    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:40:38.818506    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:38.818577    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:38.818620    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:38.818643    1805 conversation.go:950] Unable to retrieve excluded files for request #1864: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:40:45.761100    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:40:45.761149    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:40:45.761186    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:40:45.761201    1805 conversation.go:950] Unable to retrieve excluded files for request #1869: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:41:37.443119    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:41:37.443176    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:41:37.443217    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:41:37.443229    1805 conversation.go:950] Unable to retrieve excluded files for request #1873: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:41:40.287610    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:41:40.287670    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:41:40.287708    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:41:40.287725    1805 conversation.go:950] Unable to retrieve excluded files for request #1876: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:41:41.560333    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:41:41.560371    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:41:41.560413    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:41:41.560425    1805 conversation.go:950] Unable to retrieve excluded files for request #1878: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:41:43.164258    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:41:43.164338    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:41:43.164375    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:41:43.164387    1805 conversation.go:950] Unable to retrieve excluded files for request #1880: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:41:50.734001    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:41:50.734116    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:41:50.734160    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:41:50.734180    1805 conversation.go:950] Unable to retrieve excluded files for request #1886: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:00.882948    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:00.883226    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:00.883426    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:00.883463    1805 conversation.go:950] Unable to retrieve excluded files for request #1890: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:01.120958    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:01.121004    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:01.121072    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:01.121090    1805 conversation.go:950] Unable to retrieve excluded files for request #1892: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:10.977035    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:10.977117    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:10.977166    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:10.977182    1805 conversation.go:950] Unable to retrieve excluded files for request #1897: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:11.774291    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:11.774347    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:11.774391    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:11.774406    1805 conversation.go:950] Unable to retrieve excluded files for request #1899: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:15.630129    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:15.630180    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:15.630216    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:15.630236    1805 conversation.go:950] Unable to retrieve excluded files for request #1902: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:17.218758    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:17.218810    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:17.218854    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:17.218870    1805 conversation.go:950] Unable to retrieve excluded files for request #1920: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:18.826862    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:18.826917    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:18.826959    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:18.826972    1805 conversation.go:950] Unable to retrieve excluded files for request #1923: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:20.039766    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:20.039885    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:42:20.039956    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:20.039973    1805 conversation.go:950] Unable to retrieve excluded files for request #1933: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:22.163939    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:22.163987    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:22.164034    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:22.164079    1805 conversation.go:950] Unable to retrieve excluded files for request #1936: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:23.292501    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:23.292548    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:23.292597    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:23.292610    1805 conversation.go:950] Unable to retrieve excluded files for request #1940: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 84 - New completion requested from language client at position {"line":144,"character":12}, triggerKind=1
I0413 00:42:24.979971    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:25.045186    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:25.045276    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:25.045334    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:25.045346    1805 conversation.go:950] Unable to retrieve excluded files for request #1944: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:25.280743    1805 completion.go:236] Inline suggestion requested (request #1943): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:84}
I0413 00:42:25.282470    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            "},{"isSelected":true},{"content":"\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-c035e8c8-2f18-4417-b90a-12ff1db193f0"}
I0413 00:42:25.658973    1805 completion.go:609] Code complete response for request #1943 after post-processing: &{Suggestions:[] TraceID:1aa619d2da579232 RequestID:cloudcode-740584268-c035e8c8-2f18-4417-b90a-12ff1db193f0 ServerTiming:gfet5t7;dur=256, gfet4t7; dur=359 NetPlusServerTiming:376.422297ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 84 - Completion result obtained from language client
Completion Provider - completion # 85 - New completion requested from language client at position {"line":144,"character":13}, triggerKind=1
I0413 00:42:25.918212    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:25.978147    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:25.978195    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:25.978235    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:25.978254    1805 conversation.go:950] Unable to retrieve excluded files for request #1948: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:26.019888    1805 handler.go:159] cancel was requested for: 1947, needs to be canceled: true
Completion Provider - completion # 86 - New completion requested from language client at position {"line":144,"character":13}, triggerKind=1
I0413 00:42:26.074948    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:26.240431    1805 handler.go:159] cancel was requested for: 1950, needs to be canceled: true
Completion Provider - completion # 87 - New completion requested from language client at position {"line":144,"character":14}, triggerKind=1
I0413 00:42:26.271874    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:26.338649    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:26.338701    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:26.338740    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:26.338757    1805 conversation.go:950] Unable to retrieve excluded files for request #1955: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:26.394863    1805 handler.go:159] cancel was requested for: 1954, needs to be canceled: true
Completion Provider - completion # 88 - New completion requested from language client at position {"line":144,"character":15}, triggerKind=1
I0413 00:42:26.422683    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:26.493836    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:26.493898    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:26.493937    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:26.493954    1805 conversation.go:950] Unable to retrieve excluded files for request #1959: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:26.723887    1805 completion.go:236] Inline suggestion requested (request #1958): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:15}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:88}
I0413 00:42:26.725823    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","UNKNOWN_EDIT","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            pri"},{"isSelected":true},{"content":"\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-7367d6ee-2c2f-418b-ad56-f02d0f89d170"}
I0413 00:42:26.924253    1805 handler.go:159] cancel was requested for: 1958, needs to be canceled: true
Completion Provider - completion # 89 - New completion requested from language client at position {"line":144,"character":17}, triggerKind=1
I0413 00:42:26.967593    1805 document.go:448] OtherEditType (INTELLISENSE), returning ReasonRecentlyEdited
I0413 00:42:27.020562    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:27.020611    1805 document.go:448] OtherEditType (INTELLISENSE), returning ReasonRecentlyEdited
I0413 00:42:27.020653    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:27.020674    1805 conversation.go:950] Unable to retrieve excluded files for request #1963: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:27.268739    1805 completion.go:236] Inline suggestion requested (request #1962): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:17}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:89}
I0413 00:42:27.271868    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","ADD","ADD","ADD","INTELLISENSE"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print"},{"isSelected":true},{"content":"\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-0dcc4668-c8f6-42c0-a53e-704308853acc"}
I0413 00:42:27.635228    1805 completion.go:609] Code complete response for request #1962 after post-processing: &{Suggestions:[{Content:(len(final_prompt))

 Citations:[] PromptCitations:[] Score:-3.4025977 Telemetry:{CommentLines:<nil>}}] TraceID:e3725e7d6cb51ad8 RequestID:cloudcode-740584268-0dcc4668-c8f6-42c0-a53e-704308853acc ServerTiming:gfet5t7;dur=316, gfet4t7; dur=360 NetPlusServerTiming:363.267316ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 89 - Completion result obtained from language client
Completion Provider - completion # 89 - Typed over previous completion
I0413 00:42:27.712290    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-0dcc4668-c8f6-42c0-a53e-704308853acc","acceptedSuggestion":"(len(final_prompt))\n\n","acceptedChars":1,"partial":true}
I0413 00:42:27.766507    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:27.766606    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:27.766658    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:27.766674    1805 conversation.go:950] Unable to retrieve excluded files for request #1967: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:42:27.776576    1805 server.go:702] unknown method "textDocument/signatureHelp"
Completion Provider - completion # 90 - New completion requested from language client at position {"line":144,"character":19}, triggerKind=1
I0413 00:42:28.608006    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.610349    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:28.610389    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.610421    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:28.610435    1805 conversation.go:950] Unable to retrieve excluded files for request #1973: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:42:28.624163    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:42:28.655089    1805 handler.go:159] cancel was requested for: 1972, needs to be canceled: true
Completion Provider - completion # 91 - New completion requested from language client at position {"line":144,"character":20}, triggerKind=1
I0413 00:42:28.695492    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.752262    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:28.752630    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.752688    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:28.752709    1805 conversation.go:950] Unable to retrieve excluded files for request #1977: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:42:28.760407    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:42:28.876358    1805 handler.go:159] cancel was requested for: 1976, needs to be canceled: true
Completion Provider - completion # 92 - New completion requested from language client at position {"line":144,"character":21}, triggerKind=1
I0413 00:42:28.917436    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.975581    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:28.975630    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:28.975673    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:28.975686    1805 conversation.go:950] Unable to retrieve excluded files for request #1981: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:42:28.987216    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:42:29.218181    1805 completion.go:236] Inline suggestion requested (request #1980): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:21}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:92}
I0413 00:42:29.220270    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["INTELLISENSE","COMPLETION","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf"},{"isSelected":true},{"content":")\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-d6744a95-7833-461f-a06f-0b4be1a52ca5"}
I0413 00:42:29.473034    1805 completion.go:609] Code complete response for request #1980 after post-processing: &{Suggestions:[{Content:_text Citations:[] PromptCitations:[] Score:-0.010362799 Telemetry:{CommentLines:<nil>}} {Content:_text)
             Citations:[] PromptCitations:[] Score:-0.81362724 Telemetry:{CommentLines:<nil>}}] TraceID:d152013d0213202d RequestID:cloudcode-740584268-d6744a95-7833-461f-a06f-0b4be1a52ca5 ServerTiming:gfet5t7;dur=213, gfet4t7; dur=250 NetPlusServerTiming:252.663714ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 92 - Completion result obtained from language client
Completion Provider - completion # 93 - New completion requested from language client at position {"line":144,"character":21}, triggerKind=1
I0413 00:42:29.944480    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:42:30.245191    1805 completion.go:236] Inline suggestion requested (request #1986): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:21}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:93}
I0413 00:42:30.246505    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[{Content:_text Citations:[] PromptCitations:[] Score:-0.010362799 Telemetry:{CommentLines:<nil>}} {Content:_text)
             Citations:[] PromptCitations:[] Score:-0.81362724 Telemetry:{CommentLines:<nil>}}] TraceID:d152013d0213202d RequestID:cloudcode-740584268-d6744a95-7833-461f-a06f-0b4be1a52ca5 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:42:30.246571    1805 completion.go:609] Code complete response for request #1986 after post-processing: &{Suggestions:[{Content:_text Citations:[] PromptCitations:[] Score:-0.010362799 Telemetry:{CommentLines:<nil>}} {Content:_text)
             Citations:[] PromptCitations:[] Score:-0.81362724 Telemetry:{CommentLines:<nil>}}] TraceID:d152013d0213202d RequestID:cloudcode-740584268-d6744a95-7833-461f-a06f-0b4be1a52ca5 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 93 - Completion result obtained from language client
Completion Provider - completion # 93 - Typed over previous completion
I0413 00:42:30.946993    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-d6744a95-7833-461f-a06f-0b4be1a52ca5","acceptedSuggestion":"_text)\n            ","acceptedChars":5,"partial":true}
W0413 00:42:31.007333    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:42:31.007580    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:31.007608    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:31.007919    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:31.007943    1805 conversation.go:950] Unable to retrieve excluded files for request #1990: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:32.042476    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:32.042524    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:32.042573    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:32.042587    1805 conversation.go:950] Unable to retrieve excluded files for request #1994: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:33.948863    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:33.948911    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:33.948947    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:33.948962    1805 conversation.go:950] Unable to retrieve excluded files for request #2005: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:34.703096    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:34.703159    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:34.703198    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:34.703212    1805 conversation.go:950] Unable to retrieve excluded files for request #2008: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:36.191137    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:36.191187    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:42:36.191234    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:36.191248    1805 conversation.go:950] Unable to retrieve excluded files for request #2012: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 94 - New completion requested from language client at position {"line":145,"character":12}, triggerKind=1
I0413 00:42:36.418874    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:36.475962    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:36.476016    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:36.476084    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:36.476101    1805 conversation.go:950] Unable to retrieve excluded files for request #2016: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:36.719315    1805 completion.go:236] Inline suggestion requested (request #2015): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:94}
I0413 00:42:36.720873    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","COMPLETION","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf_text)\r\n            "},{"isSelected":true},{"content":"\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-e0721874-bfc8-421e-b588-0f06e15f589a"}
I0413 00:42:36.989399    1805 handler.go:159] cancel was requested for: 2015, needs to be canceled: true
Completion Provider - completion # 95 - New completion requested from language client at position {"line":145,"character":27}, triggerKind=1
I0413 00:42:37.051715    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:37.091210    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:37.091268    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:37.091313    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:37.091897    1805 conversation.go:950] Unable to retrieve excluded files for request #2019: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:37.352465    1805 completion.go:236] Inline suggestion requested (request #2018): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:27}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:95}
I0413 00:42:37.354674    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","COMPLETION","UNKNOWN_EDIT","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf_text)\r\n            print(pdf_text)"},{"isSelected":true},{"content":"\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-ff860b23-83a5-4558-badb-eba54c8fe85c"}
I0413 00:42:37.615531    1805 completion.go:609] Code complete response for request #2018 after post-processing: &{Suggestions:[] TraceID:266897be85f1df67 RequestID:cloudcode-740584268-ff860b23-83a5-4558-badb-eba54c8fe85c ServerTiming:gfet5t7;dur=224, gfet4t7; dur=258 NetPlusServerTiming:260.667677ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 95 - Completion result obtained from language client
I0413 00:42:37.776165    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:42:41.957124    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:41.957174    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:41.957210    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:41.957224    1805 conversation.go:950] Unable to retrieve excluded files for request #2024: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:42.177677    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:42.177725    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:42.177768    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:42.177804    1805 conversation.go:950] Unable to retrieve excluded files for request #2026: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:45.039653    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:45.039740    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:45.039787    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:45.039801    1805 conversation.go:950] Unable to retrieve excluded files for request #2031: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:45.243026    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:45.243087    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:45.243124    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:45.243137    1805 conversation.go:950] Unable to retrieve excluded files for request #2033: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:49.765444    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:49.765499    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:49.765544    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:49.765558    1805 conversation.go:950] Unable to retrieve excluded files for request #2036: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:42:50.911101    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:42:50.911161    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:42:50.911206    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:42:50.911219    1805 conversation.go:950] Unable to retrieve excluded files for request #2039: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:01.066954    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:01.067010    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:44:01.067072    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:01.067089    1805 conversation.go:950] Unable to retrieve excluded files for request #2043: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:01.274855    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:01.274901    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:44:01.274952    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:01.274975    1805 conversation.go:950] Unable to retrieve excluded files for request #2045: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:44:02.051325    1805 document.go:268] Error computing chars added only: getting byte offset for end of change range: invalid column number
Completion Provider - completion # 96 - New completion requested from language client at position {"line":145,"character":19}, triggerKind=1
I0413 00:44:02.087128    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.149495    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:02.149545    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.149586    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:02.149600    1805 conversation.go:950] Unable to retrieve excluded files for request #2050: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:02.261209    1805 handler.go:159] cancel was requested for: 2049, needs to be canceled: true
Completion Provider - completion # 97 - New completion requested from language client at position {"line":145,"character":20}, triggerKind=1
I0413 00:44:02.292236    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.361335    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:02.361384    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.361438    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:02.361454    1805 conversation.go:950] Unable to retrieve excluded files for request #2053: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:02.496337    1805 handler.go:159] cancel was requested for: 2052, needs to be canceled: true
Completion Provider - completion # 98 - New completion requested from language client at position {"line":145,"character":21}, triggerKind=1
I0413 00:44:02.535542    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.595370    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:02.595431    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:02.595478    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:02.595493    1805 conversation.go:950] Unable to retrieve excluded files for request #2056: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:02.836976    1805 completion.go:236] Inline suggestion requested (request #2055): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:21}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:98}
I0413 00:44:02.840560    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","UNKNOWN_EDIT","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf_text)\r\n            print(pdf"},{"isSelected":true},{"content":")\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-91617747-c7c2-4184-b91c-524f61c19010"}
I0413 00:44:03.117780    1805 completion.go:609] Code complete response for request #2055 after post-processing: &{Suggestions:[{Content:_text + final_prompt Citations:[] PromptCitations:[] Score:-2.1389546 Telemetry:{CommentLines:<nil>}}] TraceID:cdf9e2c0e72c7e08 RequestID:cloudcode-740584268-91617747-c7c2-4184-b91c-524f61c19010 ServerTiming:gfet5t7;dur=227, gfet4t7; dur=273 NetPlusServerTiming:277.085812ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 98 - Completion result obtained from language client
Completion Provider - completion # 98 - Typed over previous completion
I0413 00:44:03.363226    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-91617747-c7c2-4184-b91c-524f61c19010","acceptedSuggestion":"_text + final_prompt","acceptedChars":1,"partial":true}
I0413 00:44:03.403165    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:03.403265    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:44:03.403364    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:03.403380    1805 conversation.go:950] Unable to retrieve excluded files for request #2060: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 99 - New completion requested from language client at position {"line":145,"character":23}, triggerKind=1
I0413 00:44:03.712235    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:03.765353    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:03.765413    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:03.765455    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:03.765470    1805 conversation.go:950] Unable to retrieve excluded files for request #2064: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:03.827698    1805 handler.go:159] cancel was requested for: 2063, needs to be canceled: true
Completion Provider - completion # 100 - New completion requested from language client at position {"line":145,"character":24}, triggerKind=1
I0413 00:44:03.870023    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:03.927402    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:03.927443    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:03.927483    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:03.927499    1805 conversation.go:950] Unable to retrieve excluded files for request #2067: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:04.171285    1805 completion.go:236] Inline suggestion requested (request #2066): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:24}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:100}
I0413 00:44:04.172682    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","COMPLETION","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf_text)\r\n            print(pdf_pa"},{"isSelected":true},{"content":")\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b209fb93-944c-41ed-ac70-f591f87f737d"}
I0413 00:44:04.193630    1805 handler.go:159] cancel was requested for: 2066, needs to be canceled: true
Completion Provider - completion # 101 - New completion requested from language client at position {"line":145,"character":25}, triggerKind=1
I0413 00:44:04.227199    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:04.271003    1805 handler.go:159] cancel was requested for: 2070, needs to be canceled: true
I0413 00:44:04.291478    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:04.291522    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:04.291557    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:04.291573    1805 conversation.go:950] Unable to retrieve excluded files for request #2071: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 102 - New completion requested from language client at position {"line":145,"character":26}, triggerKind=1
I0413 00:44:04.381177    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:04.444180    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:04.444234    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:04.444272    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:04.444287    1805 conversation.go:950] Unable to retrieve excluded files for request #2075: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:04.682215    1805 completion.go:236] Inline suggestion requested (request #2074): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:145 Character:26}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:102}
I0413 00:44:04.684090    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["COMPLETION","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            print(pdf_text)\r\n            print(pdf_path"},{"isSelected":true},{"content":")\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-f48b7f56-b538-41dc-aeb5-b68439775612"}
I0413 00:44:04.995385    1805 completion.go:609] Code complete response for request #2074 after post-processing: &{Suggestions:[{Content:)
             Citations:[] PromptCitations:[] Score:-0.7872584 Telemetry:{CommentLines:<nil>}} {Content:)
            print(txt_path Citations:[] PromptCitations:[] Score:-3.8550181 Telemetry:{CommentLines:<nil>}}] TraceID:bc809beb03b6856c RequestID:cloudcode-740584268-f48b7f56-b538-41dc-aeb5-b68439775612 ServerTiming:gfet5t7;dur=258, gfet4t7; dur=309 NetPlusServerTiming:311.206567ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 2 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 102 - Completion result obtained from language client
I0413 00:44:06.116799    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:06.116881    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:06.116952    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:06.116966    1805 conversation.go:950] Unable to retrieve excluded files for request #2079: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:08.174528    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:08.174572    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:08.174610    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:08.174624    1805 conversation.go:950] Unable to retrieve excluded files for request #2082: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:37.072374    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:37.072426    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:37.072472    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:37.072485    1805 conversation.go:950] Unable to retrieve excluded files for request #2086: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:37.422408    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:37.422456    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:37.422505    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:37.422520    1805 conversation.go:950] Unable to retrieve excluded files for request #2093: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:37.776794    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:44:37.792950    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:37.792999    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:37.793041    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:37.793084    1805 conversation.go:950] Unable to retrieve excluded files for request #2098: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:38.059595    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:38.059640    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:38.059687    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:38.059699    1805 conversation.go:950] Unable to retrieve excluded files for request #2101: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:39.125472    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:39.125522    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:39.125563    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:39.125574    1805 conversation.go:950] Unable to retrieve excluded files for request #2111: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:39.428707    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:39.428755    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:39.428807    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:39.428824    1805 conversation.go:950] Unable to retrieve excluded files for request #2114: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:39.590101    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:39.590155    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:44:39.590201    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:39.590214    1805 conversation.go:950] Unable to retrieve excluded files for request #2116: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 103 - New completion requested from language client at position {"line":145,"character":0}, triggerKind=1
I0413 00:44:41.749228    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:41.810148    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:41.810192    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:41.810226    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:41.810237    1805 conversation.go:950] Unable to retrieve excluded files for request #2121: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:41.995355    1805 handler.go:159] cancel was requested for: 2120, needs to be canceled: true
Completion Provider - completion # 104 - New completion requested from language client at position {"line":144,"character":27}, triggerKind=1
I0413 00:44:42.022706    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:42.094965    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:42.095004    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:42.095068    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:42.095086    1805 conversation.go:950] Unable to retrieve excluded files for request #2124: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:42.323162    1805 completion.go:236] Inline suggestion requested (request #2123): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:27}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:104}
Completion Provider - completion # 104 - Completion result obtained from language client
Completion Provider - completion # 105 - New completion requested from language client at position {"line":144,"character":26}, triggerKind=1
I0413 00:44:42.788542    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:42.848478    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:42.848563    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:42.848616    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:42.848635    1805 conversation.go:950] Unable to retrieve excluded files for request #2128: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:43.089284    1805 completion.go:236] Inline suggestion requested (request #2127): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:26}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:105}
Completion Provider - completion # 105 - Completion result obtained from language client
Completion Provider - completion # 106 - New completion requested from language client at position {"line":144,"character":17}, triggerKind=1
I0413 00:44:43.534160    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.589238    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:43.589298    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.589336    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:43.589353    1805 conversation.go:950] Unable to retrieve excluded files for request #2140: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:43.622950    1805 handler.go:159] cancel was requested for: 2139, needs to be canceled: true
Completion Provider - completion # 107 - New completion requested from language client at position {"line":144,"character":16}, triggerKind=1
I0413 00:44:43.664169    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.722811    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:43.722866    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.722906    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:43.722920    1805 conversation.go:950] Unable to retrieve excluded files for request #2143: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:43.791450    1805 handler.go:159] cancel was requested for: 2142, needs to be canceled: true
Completion Provider - completion # 108 - New completion requested from language client at position {"line":144,"character":15}, triggerKind=1
I0413 00:44:43.831438    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.891741    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:43.891789    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:43.891836    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:43.891853    1805 conversation.go:950] Unable to retrieve excluded files for request #2146: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:43.978841    1805 handler.go:159] cancel was requested for: 2145, needs to be canceled: true
Completion Provider - completion # 109 - New completion requested from language client at position {"line":144,"character":14}, triggerKind=1
I0413 00:44:44.006658    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.061535    1805 handler.go:159] cancel was requested for: 2148, needs to be canceled: true
Completion Provider - completion # 110 - New completion requested from language client at position {"line":144,"character":13}, triggerKind=1
I0413 00:44:44.101508    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.160775    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:44.160838    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.160882    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:44.160899    1805 conversation.go:950] Unable to retrieve excluded files for request #2151: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:44.275594    1805 handler.go:159] cancel was requested for: 2150, needs to be canceled: true
Completion Provider - completion # 111 - New completion requested from language client at position {"line":144,"character":12}, triggerKind=1
I0413 00:44:44.307593    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.375761    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:44.375812    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.375855    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:44.375870    1805 conversation.go:950] Unable to retrieve excluded files for request #2154: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:44.461323    1805 handler.go:159] cancel was requested for: 2153, needs to be canceled: true
Completion Provider - completion # 112 - New completion requested from language client at position {"line":144,"character":8}, triggerKind=1
I0413 00:44:44.488163    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.560932    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:44.561007    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.561090    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:44.561108    1805 conversation.go:950] Unable to retrieve excluded files for request #2157: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:44.608297    1805 handler.go:159] cancel was requested for: 2156, needs to be canceled: true
Completion Provider - completion # 113 - New completion requested from language client at position {"line":144,"character":4}, triggerKind=1
I0413 00:44:44.642118    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.707264    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:44.707302    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.707334    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:44.707345    1805 conversation.go:950] Unable to retrieve excluded files for request #2160: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:44.776478    1805 handler.go:159] cancel was requested for: 2159, needs to be canceled: true
Completion Provider - completion # 114 - New completion requested from language client at position {"line":144,"character":0}, triggerKind=1
I0413 00:44:44.809828    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.875594    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:44.875648    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:44.875688    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:44.875702    1805 conversation.go:950] Unable to retrieve excluded files for request #2163: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:45.110407    1805 completion.go:236] Inline suggestion requested (request #2162): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:114}
Completion Provider - completion # 114 - Completion result obtained from language client
Completion Provider - completion # 115 - New completion requested from language client at position {"line":143,"character":31}, triggerKind=1
I0413 00:44:45.473299    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:45.532010    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:45.532086    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:45.532129    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:45.532145    1805 conversation.go:950] Unable to retrieve excluded files for request #2166: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:45.774036    1805 completion.go:236] Inline suggestion requested (request #2165): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:143 Character:31}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:115}
Completion Provider - completion # 115 - Completion result obtained from language client
I0413 00:44:47.248314    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:47.248358    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:44:47.248397    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:47.248413    1805 conversation.go:950] Unable to retrieve excluded files for request #2170: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 116 - New completion requested from language client at position {"line":141,"character":12}, triggerKind=1
I0413 00:44:49.436242    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:44:49.495644    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:44:49.495692    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:44:49.495737    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:44:49.495756    1805 conversation.go:950] Unable to retrieve excluded files for request #2173: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:44:49.736937    1805 completion.go:236] Inline suggestion requested (request #2172): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:141 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:116}
I0413 00:44:49.739703    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","DELETE","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n            "},{"isSelected":true},{"content":"\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-878a51ba-886a-48a1-a7ea-91f7454f3240"}
I0413 00:44:50.010569    1805 completion.go:609] Code complete response for request #2172 after post-processing: &{Suggestions:[{Content:with open(file_path + '.txt', 'w') as f:
                 Citations:[] PromptCitations:[] Score:-3.6315598 Telemetry:{CommentLines:<nil>}}] TraceID:31a5ef8b8404361 RequestID:cloudcode-740584268-878a51ba-886a-48a1-a7ea-91f7454f3240 ServerTiming:gfet5t7;dur=234, gfet4t7; dur=268 NetPlusServerTiming:270.68408ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 116 - Completion result obtained from language client
I0413 00:45:37.776782    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:45:50.095590    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:50.095630    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:45:50.095666    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:50.095677    1805 conversation.go:950] Unable to retrieve excluded files for request #2179: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 117 - New completion requested from language client at position {"line":123,"character":12}, triggerKind=1
I0413 00:45:51.421707    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:45:51.474500    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:51.474541    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:45:51.474590    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:51.474603    1805 conversation.go:950] Unable to retrieve excluded files for request #2183: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:51.722507    1805 completion.go:236] Inline suggestion requested (request #2182): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:123 Character:12}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:117}
I0413 00:45:51.725198    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","UNKNOWN_EDIT","DELETE","UNKNOWN_EDIT"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            "},{"isSelected":true},{"content":"\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-90d148eb-1786-4b9d-b87a-603e85c03225"}
I0413 00:45:52.021617    1805 completion.go:609] Code complete response for request #2182 after post-processing: &{Suggestions:[] TraceID:87b0ae84da8af6d7 RequestID:cloudcode-740584268-90d148eb-1786-4b9d-b87a-603e85c03225 ServerTiming:gfet5t7;dur=248, gfet4t7; dur=294 NetPlusServerTiming:296.335351ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 117 - Completion result obtained from language client
Completion Provider - completion # 118 - New completion requested from language client at position {"line":123,"character":13}, triggerKind=1
I0413 00:45:52.593043    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:52.659813    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:52.659864    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:52.659914    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:52.659935    1805 conversation.go:950] Unable to retrieve excluded files for request #2188: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:52.728367    1805 handler.go:159] cancel was requested for: 2187, needs to be canceled: true
Completion Provider - completion # 119 - New completion requested from language client at position {"line":123,"character":13}, triggerKind=1
I0413 00:45:52.778013    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:52.818337    1805 handler.go:159] cancel was requested for: 2190, needs to be canceled: true
Completion Provider - completion # 120 - New completion requested from language client at position {"line":123,"character":14}, triggerKind=1
I0413 00:45:52.853284    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:52.917155    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:52.917203    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:52.917250    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:52.917265    1805 conversation.go:950] Unable to retrieve excluded files for request #2194: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:52.982138    1805 handler.go:159] cancel was requested for: 2193, needs to be canceled: true
Completion Provider - completion # 121 - New completion requested from language client at position {"line":123,"character":15}, triggerKind=1
I0413 00:45:53.010402    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:53.081690    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:53.081742    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:53.081786    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:53.081801    1805 conversation.go:950] Unable to retrieve excluded files for request #2198: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:53.267609    1805 handler.go:159] cancel was requested for: 2197, needs to be canceled: true
Completion Provider - completion # 122 - New completion requested from language client at position {"line":123,"character":16}, triggerKind=1
I0413 00:45:53.299131    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:53.369714    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:53.369773    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:45:53.369818    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:53.369833    1805 conversation.go:950] Unable to retrieve excluded files for request #2203: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:53.599543    1805 completion.go:236] Inline suggestion requested (request #2202): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:123 Character:16}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:122}
I0413 00:45:53.601716    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["UNKNOWN_EDIT","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            prin"},{"isSelected":true},{"content":"\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-9d159d67-2381-47bc-b81d-c5215afa1197"}
I0413 00:45:53.794704    1805 handler.go:159] cancel was requested for: 2202, needs to be canceled: true
Completion Provider - completion # 123 - New completion requested from language client at position {"line":123,"character":17}, triggerKind=1
I0413 00:45:53.827956    1805 document.go:448] OtherEditType (INTELLISENSE), returning ReasonRecentlyEdited
I0413 00:45:53.891630    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:53.891682    1805 document.go:448] OtherEditType (INTELLISENSE), returning ReasonRecentlyEdited
I0413 00:45:53.891723    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:53.891742    1805 conversation.go:950] Unable to retrieve excluded files for request #2207: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:54.128787    1805 completion.go:236] Inline suggestion requested (request #2206): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:123 Character:17}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:123}
I0413 00:45:54.130287    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","INTELLISENSE"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print"},{"isSelected":true},{"content":"\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-eecc8fbd-681a-4f16-a6e2-be87e4602be2"}
I0413 00:45:54.457417    1805 completion.go:609] Code complete response for request #2206 after post-processing: &{Suggestions:[{Content:("PDF text:", pdf_text) Citations:[] PromptCitations:[] Score:-3.9406972 Telemetry:{CommentLines:<nil>}}] TraceID:f8ed47beb0099d45 RequestID:cloudcode-740584268-eecc8fbd-681a-4f16-a6e2-be87e4602be2 ServerTiming:gfet5t7;dur=274, gfet4t7; dur=325 NetPlusServerTiming:327.027048ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 123 - Completion result obtained from language client
Completion Provider - completion # 123 - Typed over previous completion
I0413 00:45:54.650286    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-eecc8fbd-681a-4f16-a6e2-be87e4602be2","acceptedSuggestion":"(\"PDF text:\", pdf_text)","acceptedChars":1,"partial":true}
I0413 00:45:54.693134    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:54.693190    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:45:54.693235    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:54.693252    1805 conversation.go:950] Unable to retrieve excluded files for request #2211: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:45:54.695616    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:45:57.527629    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-eecc8fbd-681a-4f16-a6e2-be87e4602be2","acceptedSuggestion":"(\"PDF text:\", pdf_text)","acceptedChars":23,"partial":false}
Completion Provider - completion # 124 - New completion requested from language client at position {"line":123,"character":40}, triggerKind=1
I0413 00:45:57.568475    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:45:57.623177    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:57.623253    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:45:57.623292    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:57.623366    1805 conversation.go:950] Unable to retrieve excluded files for request #2218: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:45:57.632080    1805 server.go:702] unknown method "textDocument/signatureHelp"
I0413 00:45:57.868747    1805 completion.go:236] Inline suggestion requested (request #2217): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:123 Character:40}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:124}
I0413 00:45:57.870756    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","INTELLISENSE","COMPLETION","COMPLETION"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)"},{"isSelected":true},{"content":")\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            # contents = [final_prompt]\r\n            # response = model.generate_content(contents)\r\n            # text = response.text\r\n\r\n            # print(text)\r\n\r\n            # with open(file_path + '.txt', 'w') as f:\r\n            #     f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4b9097a7-6e9d-4954-b795-f805c7c4432e"}
I0413 00:45:58.161209    1805 completion.go:609] Code complete response for request #2217 after post-processing: &{Suggestions:[{Content:
            return Citations:[] PromptCitations:[] Score:-2.346701 Telemetry:{CommentLines:<nil>}}] TraceID:c9e4bcfcd50027bf RequestID:cloudcode-740584268-4b9097a7-6e9d-4954-b795-f805c7c4432e ServerTiming:gfet5t7;dur=259, gfet4t7; dur=288 NetPlusServerTiming:290.349053ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 124 - Completion result obtained from language client
I0413 00:45:58.813555    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:58.813600    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:45:58.813640    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:58.813654    1805 conversation.go:950] Unable to retrieve excluded files for request #2223: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:45:59.774680    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:45:59.774739    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:45:59.774781    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:45:59.774794    1805 conversation.go:950] Unable to retrieve excluded files for request #2226: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:46:03.057388    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:46:03.057431    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:46:03.057467    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:46:03.057476    1805 conversation.go:950] Unable to retrieve excluded files for request #2230: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 125 - New completion requested from language client at position {"line":123,"character":40}, triggerKind=1
I0413 00:46:07.541140    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:46:07.578163    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:46:07.578210    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:46:07.578255    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:46:07.578269    1805 conversation.go:950] Unable to retrieve excluded files for request #2236: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:46:07.842089    1805 completion.go:236] Inline suggestion requested (request #2235): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:123 Character:40}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:125}
Completion Provider - completion # 125 - Completion result obtained from language client
I0413 00:46:08.709002    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:46:08.709109    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:46:08.709152    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:46:08.709168    1805 conversation.go:950] Unable to retrieve excluded files for request #2240: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:46:09.754338    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:46:09.754386    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:46:09.754431    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:46:09.754445    1805 conversation.go:950] Unable to retrieve excluded files for request #2243: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:46:37.776152    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:47:09.158738    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:47:09.158835    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:47:09.158916    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:47:09.158931    1805 conversation.go:950] Unable to retrieve excluded files for request #2246: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:47:09.492566    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:47:09.492612    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:47:09.492657    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:47:09.492667    1805 conversation.go:950] Unable to retrieve excluded files for request #2253: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:47:09.913734    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:47:09.913913    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:47:09.914138    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:47:09.914176    1805 conversation.go:950] Unable to retrieve excluded files for request #2261: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:47:11.001112    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:47:11.001164    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:47:11.001217    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:47:11.001233    1805 conversation.go:950] Unable to retrieve excluded files for request #2264: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:47:12.167565    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:47:12.167620    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:47:12.167662    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:47:12.167674    1805 conversation.go:950] Unable to retrieve excluded files for request #2268: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:47:37.776776    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:48:31.883458    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:31.883507    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:31.883551    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:31.883573    1805 conversation.go:950] Unable to retrieve excluded files for request #2273: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:32.793980    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:32.794030    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:32.794094    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:32.794111    1805 conversation.go:950] Unable to retrieve excluded files for request #2276: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:36.278370    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:36.278421    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:36.278464    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:36.278478    1805 conversation.go:950] Unable to retrieve excluded files for request #2278: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:37.776740    1805 life_cycle.go:277] codeReportBasicEvery: recomputing codereportbasic metric
I0413 00:48:41.929591    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:41.929653    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:41.929696    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:41.929710    1805 conversation.go:950] Unable to retrieve excluded files for request #2284: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:42.294409    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:42.294452    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:42.294487    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:42.294497    1805 conversation.go:950] Unable to retrieve excluded files for request #2292: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:42.430357    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:42.430408    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:42.430444    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:42.430461    1805 conversation.go:950] Unable to retrieve excluded files for request #2294: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:42.733294    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:42.733341    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:42.733383    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:42.733397    1805 conversation.go:950] Unable to retrieve excluded files for request #2303: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:43.346322    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:43.346397    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:43.346447    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:43.346462    1805 conversation.go:950] Unable to retrieve excluded files for request #2331: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:43.901684    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:43.902021    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:43.902284    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:43.902309    1805 conversation.go:950] Unable to retrieve excluded files for request #2346: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:44.327733    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:44.327776    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:44.327808    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:44.327818    1805 conversation.go:950] Unable to retrieve excluded files for request #2360: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:45.064760    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:45.064815    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:45.065106    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:45.065135    1805 conversation.go:950] Unable to retrieve excluded files for request #2370: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:45.331919    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:45.331972    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:45.332013    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:45.332027    1805 conversation.go:950] Unable to retrieve excluded files for request #2374: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:48:46.767139    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:48:46.767183    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:48:46.767216    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:48:46.767227    1805 conversation.go:950] Unable to retrieve excluded files for request #2377: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:50:54.769313    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:50:54.769380    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:50:54.769431    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:50:54.769445    1805 conversation.go:950] Unable to retrieve excluded files for request #2382: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:00.580584    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:00.580645    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:00.580774    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:00.580805    1805 conversation.go:950] Unable to retrieve excluded files for request #2385: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:02.108422    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:02.108465    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:02.108509    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:02.108525    1805 conversation.go:950] Unable to retrieve excluded files for request #2388: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:03.396414    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:03.396536    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:03.396582    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:03.396595    1805 conversation.go:950] Unable to retrieve excluded files for request #2390: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:41.186576    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:41.186629    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:41.186673    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:41.186688    1805 conversation.go:950] Unable to retrieve excluded files for request #2394: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 126 - New completion requested from language client at position {"line":144,"character":28}, triggerKind=1
I0413 00:51:42.007078    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.062482    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:42.062533    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.062575    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:42.062591    1805 conversation.go:950] Unable to retrieve excluded files for request #2399: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:42.083651    1805 handler.go:159] cancel was requested for: 2398, needs to be canceled: true
Completion Provider - completion # 127 - New completion requested from language client at position {"line":144,"character":29}, triggerKind=1
I0413 00:51:42.127338    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.184611    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:42.184675    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.184717    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:42.184728    1805 conversation.go:950] Unable to retrieve excluded files for request #2402: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:42.428010    1805 completion.go:236] Inline suggestion requested (request #2401): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:29}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:127}
I0413 00:51:42.430214    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","DELETE","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = te"},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-98a22074-126c-4fd6-9ed1-3249f168786f"}
I0413 00:51:42.521781    1805 handler.go:159] cancel was requested for: 2401, needs to be canceled: true
Completion Provider - completion # 128 - New completion requested from language client at position {"line":144,"character":30}, triggerKind=1
I0413 00:51:42.550090    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.618719    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:42.618793    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.618851    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:42.618875    1805 conversation.go:950] Unable to retrieve excluded files for request #2406: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:42.719841    1805 handler.go:159] cancel was requested for: 2405, needs to be canceled: true
Completion Provider - completion # 129 - New completion requested from language client at position {"line":144,"character":31}, triggerKind=1
I0413 00:51:42.754914    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.821573    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:42.821646    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:42.822123    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:42.822158    1805 conversation.go:950] Unable to retrieve excluded files for request #2409: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:43.055886    1805 completion.go:236] Inline suggestion requested (request #2408): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:31}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:129}
I0413 00:51:43.057939    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = text"},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-75da24d1-55cf-4013-a540-e030809f14d5"}
I0413 00:51:43.309839    1805 completion.go:609] Code complete response for request #2408 after post-processing: &{Suggestions:[] TraceID:50ca4fd8e81120b3 RequestID:cloudcode-740584268-75da24d1-55cf-4013-a540-e030809f14d5 ServerTiming:gfet5t7;dur=210, gfet4t7; dur=249 NetPlusServerTiming:251.801455ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 129 - Completion result obtained from language client
Completion Provider - completion # 130 - New completion requested from language client at position {"line":144,"character":31}, triggerKind=1
I0413 00:51:43.461368    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:43.762148    1805 completion.go:236] Inline suggestion requested (request #2412): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:31}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:130}
I0413 00:51:43.763461    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[] TraceID:50ca4fd8e81120b3 RequestID:cloudcode-740584268-75da24d1-55cf-4013-a540-e030809f14d5 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:51:43.763619    1805 completion.go:609] Code complete response for request #2412 after post-processing: &{Suggestions:[] TraceID:50ca4fd8e81120b3 RequestID:cloudcode-740584268-75da24d1-55cf-4013-a540-e030809f14d5 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 130 - Completion result obtained from language client
Completion Provider - completion # 131 - New completion requested from language client at position {"line":144,"character":32}, triggerKind=1
I0413 00:51:44.312208    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:44.373517    1805 handler.go:159] cancel was requested for: 2416, needs to be canceled: true
I0413 00:51:44.377949    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:44.378001    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:44.378071    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:44.378089    1805 conversation.go:950] Unable to retrieve excluded files for request #2417: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 132 - New completion requested from language client at position {"line":144,"character":32}, triggerKind=1
I0413 00:51:44.411874    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:51:44.713286    1805 completion.go:236] Inline suggestion requested (request #2419): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:32}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:132}
I0413 00:51:44.715465    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["ADD","ADD","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = text_"},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b7d6fff5-d9f5-44ee-a30d-875ba4d2d58d"}
I0413 00:51:44.933449    1805 completion.go:609] Code complete response for request #2419 after post-processing: &{Suggestions:[] TraceID:d93ff0a2074c40fc RequestID:cloudcode-740584268-b7d6fff5-d9f5-44ee-a30d-875ba4d2d58d ServerTiming:gfet5t7;dur=176, gfet4t7; dur=215 NetPlusServerTiming:217.833388ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 0 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 132 - Completion result obtained from language client
Completion Provider - completion # 133 - New completion requested from language client at position {"line":144,"character":31}, triggerKind=1
I0413 00:51:45.592758    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:45.651436    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:45.651485    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:45.651529    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:45.651545    1805 conversation.go:950] Unable to retrieve excluded files for request #2425: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:45.754998    1805 handler.go:159] cancel was requested for: 2424, needs to be canceled: true
Completion Provider - completion # 134 - New completion requested from language client at position {"line":144,"character":30}, triggerKind=1
I0413 00:51:45.787543    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:45.853777    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:45.853850    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:45.853885    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:45.853900    1805 conversation.go:950] Unable to retrieve excluded files for request #2429: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:45.947494    1805 handler.go:159] cancel was requested for: 2428, needs to be canceled: true
Completion Provider - completion # 135 - New completion requested from language client at position {"line":144,"character":29}, triggerKind=1
I0413 00:51:45.978097    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.046250    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:46.046343    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.046383    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:46.046398    1805 conversation.go:950] Unable to retrieve excluded files for request #2433: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:46.147626    1805 handler.go:159] cancel was requested for: 2432, needs to be canceled: true
Completion Provider - completion # 136 - New completion requested from language client at position {"line":144,"character":28}, triggerKind=1
I0413 00:51:46.178601    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.246639    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:46.246696    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.246735    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:46.246751    1805 conversation.go:950] Unable to retrieve excluded files for request #2437: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:46.479339    1805 completion.go:236] Inline suggestion requested (request #2436): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:28}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:136}
Completion Provider - completion # 136 - Completion result obtained from language client
Completion Provider - completion # 137 - New completion requested from language client at position {"line":144,"character":27}, triggerKind=1
I0413 00:51:46.567988    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.622244    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:46.622289    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:46.622430    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:46.622447    1805 conversation.go:950] Unable to retrieve excluded files for request #2441: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:46.868820    1805 completion.go:236] Inline suggestion requested (request #2440): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:27}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:137}
Completion Provider - completion # 137 - Completion result obtained from language client
I0413 00:51:52.484793    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:52.484843    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:52.484891    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:52.484920    1805 conversation.go:950] Unable to retrieve excluded files for request #2447: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:52.667248    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:52.667300    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:52.667345    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:52.667361    1805 conversation.go:950] Unable to retrieve excluded files for request #2449: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:51:58.438218    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:51:58.438271    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:51:58.438373    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:51:58.438400    1805 conversation.go:950] Unable to retrieve excluded files for request #2454: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:01.301677    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:01.301733    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:52:01.301778    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:01.301791    1805 conversation.go:950] Unable to retrieve excluded files for request #2458: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:02.402324    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:02.402512    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:52:02.402572    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:02.402588    1805 conversation.go:950] Unable to retrieve excluded files for request #2461: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 138 - New completion requested from language client at position {"line":144,"character":36}, triggerKind=1
I0413 00:52:03.705834    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:03.762355    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:03.762434    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:03.762477    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:03.762490    1805 conversation.go:950] Unable to retrieve excluded files for request #2466: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:04.006312    1805 completion.go:236] Inline suggestion requested (request #2465): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:36}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:138}
I0413 00:52:04.008875    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","DELETE","UNKNOWN_EDIT","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = pdf_text "},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-912627ed-eb75-44f4-8de7-d9f663e02843"}
I0413 00:52:04.044205    1805 handler.go:159] cancel was requested for: 2465, needs to be canceled: true
Completion Provider - completion # 139 - New completion requested from language client at position {"line":144,"character":37}, triggerKind=1
I0413 00:52:04.084029    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:04.141057    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:04.141105    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:04.141149    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:04.141163    1805 conversation.go:950] Unable to retrieve excluded files for request #2470: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:04.384728    1805 completion.go:236] Inline suggestion requested (request #2469): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:37}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:139}
I0413 00:52:04.387143    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","UNKNOWN_EDIT","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = pdf_text +"},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-db8b1cdb-feee-4fa9-b86c-aa9b235c0324"}
I0413 00:52:04.460897    1805 handler.go:159] cancel was requested for: 2469, needs to be canceled: true
Completion Provider - completion # 140 - New completion requested from language client at position {"line":144,"character":38}, triggerKind=1
I0413 00:52:04.496427    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:04.558010    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:04.558074    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:04.558120    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:04.558134    1805 conversation.go:950] Unable to retrieve excluded files for request #2474: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:04.797152    1805 completion.go:236] Inline suggestion requested (request #2473): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:144 Character:38}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:140}
I0413 00:52:04.799366    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","UNKNOWN_EDIT","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            print(file_path)\r\n            audio_converted_to_text = sample_recognize(data)\r\n            print(audio_converted_to_text)\r\n            \r\n\r\n\r\n            final_prompt = pdf_text + "},{"isSelected":true},{"content":"prompt + audio_converted_to_text\r\n            print(final_prompt)\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-b0ecd6b4-b6b3-458c-9ec9-7ac3132e0a77"}
I0413 00:52:05.001446    1805 completion.go:609] Code complete response for request #2473 after post-processing: &{Suggestions:[{Content:'\n' +  Citations:[] PromptCitations:[] Score:-1.5166 Telemetry:{CommentLines:<nil>}}] TraceID:b27dd22650861a3e RequestID:cloudcode-740584268-b0ecd6b4-b6b3-458c-9ec9-7ac3132e0a77 ServerTiming:gfet5t7;dur=173, gfet4t7; dur=200 NetPlusServerTiming:201.997885ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 140 - Completion result obtained from language client
I0413 00:52:06.171999    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:06.172109    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:06.172153    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:06.172168    1805 conversation.go:950] Unable to retrieve excluded files for request #2478: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:07.414105    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:07.414154    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:07.414187    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:07.414202    1805 conversation.go:950] Unable to retrieve excluded files for request #2480: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:08.723974    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:08.724022    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:08.724088    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:08.724110    1805 conversation.go:950] Unable to retrieve excluded files for request #2484: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:10.119201    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:10.119247    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:10.119280    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:10.119295    1805 conversation.go:950] Unable to retrieve excluded files for request #2488: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:13.065858    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:13.065918    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:13.065955    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:13.065966    1805 conversation.go:950] Unable to retrieve excluded files for request #2490: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:15.985873    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:15.985915    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:15.985949    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:15.985959    1805 conversation.go:950] Unable to retrieve excluded files for request #2492: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:36.517461    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:36.517506    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:36.517544    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:36.517553    1805 conversation.go:950] Unable to retrieve excluded files for request #2497: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:52:37.776731    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:52:38.701929    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:52:38.701989    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:52:38.702079    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:52:38.702116    1805 conversation.go:950] Unable to retrieve excluded files for request #2500: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:19.581839    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:19.581895    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:54:19.581977    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:19.581989    1805 conversation.go:950] Unable to retrieve excluded files for request #2502: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:19.905306    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:19.905362    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:54:19.905399    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:19.905410    1805 conversation.go:950] Unable to retrieve excluded files for request #2505: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:20.401637    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:20.401686    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:54:20.401720    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:20.401731    1805 conversation.go:950] Unable to retrieve excluded files for request #2508: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:22.314036    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:22.314150    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:54:22.314202    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:22.314219    1805 conversation.go:950] Unable to retrieve excluded files for request #2511: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:23.995173    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:23.995224    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:54:23.995278    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:23.995296    1805 conversation.go:950] Unable to retrieve excluded files for request #2515: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:24.913742    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:24.913815    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:54:24.913859    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:24.913874    1805 conversation.go:950] Unable to retrieve excluded files for request #2518: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:31.775730    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:31.775807    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:54:31.775873    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:31.775887    1805 conversation.go:950] Unable to retrieve excluded files for request #2521: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:34.465670    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:54:34.465720    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:54:34.465760    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:54:34.465770    1805 conversation.go:950] Unable to retrieve excluded files for request #2523: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:54:37.776838    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:55:24.008254    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:24.008319    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:24.008373    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:24.008388    1805 conversation.go:950] Unable to retrieve excluded files for request #2528: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:24.230252    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:24.230330    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:24.230376    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:24.230388    1805 conversation.go:950] Unable to retrieve excluded files for request #2530: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:32.464978    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:32.465040    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:32.465101    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:32.465118    1805 conversation.go:950] Unable to retrieve excluded files for request #2533: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:40.541345    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:40.541385    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:40.541421    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:40.541431    1805 conversation.go:950] Unable to retrieve excluded files for request #2539: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:41.623118    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:41.623156    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:41.623190    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:41.623203    1805 conversation.go:950] Unable to retrieve excluded files for request #2550: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:41.756352    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:41.756426    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:41.756611    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:41.756657    1805 conversation.go:950] Unable to retrieve excluded files for request #2552: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:41.886903    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:41.886959    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:41.887009    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:41.887023    1805 conversation.go:950] Unable to retrieve excluded files for request #2554: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:42.006486    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:42.006541    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:42.006588    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:42.006608    1805 conversation.go:950] Unable to retrieve excluded files for request #2556: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:42.188102    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:42.188159    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:42.188203    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:42.188217    1805 conversation.go:950] Unable to retrieve excluded files for request #2559: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:42.307290    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:42.307345    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:42.307383    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:42.307399    1805 conversation.go:950] Unable to retrieve excluded files for request #2561: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:42.830700    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:42.830751    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 00:55:42.830797    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:42.830810    1805 conversation.go:950] Unable to retrieve excluded files for request #2565: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 141 - New completion requested from language client at position {"line":140,"character":10}, triggerKind=1
I0413 00:55:43.462692    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.528570    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:43.528625    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.528666    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:43.528683    1805 conversation.go:950] Unable to retrieve excluded files for request #2570: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:43.624749    1805 handler.go:159] cancel was requested for: 2569, needs to be canceled: true
Completion Provider - completion # 142 - New completion requested from language client at position {"line":140,"character":8}, triggerKind=1
I0413 00:55:43.655201    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.724644    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:43.725103    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.725147    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:43.725157    1805 conversation.go:950] Unable to retrieve excluded files for request #2573: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:43.811518    1805 handler.go:159] cancel was requested for: 2572, needs to be canceled: true
Completion Provider - completion # 143 - New completion requested from language client at position {"line":140,"character":4}, triggerKind=1
I0413 00:55:43.853328    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.911726    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:43.911780    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:43.911817    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:43.911832    1805 conversation.go:950] Unable to retrieve excluded files for request #2576: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:43.991179    1805 handler.go:159] cancel was requested for: 2575, needs to be canceled: true
Completion Provider - completion # 144 - New completion requested from language client at position {"line":140,"character":0}, triggerKind=1
I0413 00:55:44.031575    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:44.090483    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:44.090529    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:44.090575    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:44.090592    1805 conversation.go:950] Unable to retrieve excluded files for request #2579: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:44.152040    1805 handler.go:159] cancel was requested for: 2578, needs to be canceled: true
Completion Provider - completion # 145 - New completion requested from language client at position {"line":139,"character":60}, triggerKind=1
I0413 00:55:44.190851    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:44.251906    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:44.251965    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:44.252014    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:44.252029    1805 conversation.go:950] Unable to retrieve excluded files for request #2582: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:44.491724    1805 completion.go:236] Inline suggestion requested (request #2581): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:139 Character:60}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:145}
Completion Provider - completion # 145 - Completion result obtained from language client
I0413 00:55:45.757274    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:45.757316    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:45.757349    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:45.757366    1805 conversation.go:950] Unable to retrieve excluded files for request #2586: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:46.073501    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:46.073548    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:46.073593    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:46.073605    1805 conversation.go:950] Unable to retrieve excluded files for request #2594: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:46.671605    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:46.671646    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:46.671694    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:46.671710    1805 conversation.go:950] Unable to retrieve excluded files for request #2599: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:47.072030    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:47.072126    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:47.072169    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:47.072182    1805 conversation.go:950] Unable to retrieve excluded files for request #2602: open /home/apoorvtripathi537/.aiexclude: no such file or directory
Completion Provider - completion # 146 - New completion requested from language client at position {"line":138,"character":0}, triggerKind=1
I0413 00:55:47.705030    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:47.777687    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:47.777739    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:47.777794    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:47.777810    1805 conversation.go:950] Unable to retrieve excluded files for request #2606: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:47.942695    1805 handler.go:159] cancel was requested for: 2605, needs to be canceled: true
Completion Provider - completion # 147 - New completion requested from language client at position {"line":137,"character":0}, triggerKind=1
I0413 00:55:47.967380    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:48.042091    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:48.042224    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:48.042300    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:48.042327    1805 conversation.go:950] Unable to retrieve excluded files for request #2609: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:48.268238    1805 completion.go:236] Inline suggestion requested (request #2608): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:137 Character:0}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:147}
Completion Provider - completion # 147 - Completion result obtained from language client
I0413 00:55:49.481406    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:49.481443    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:49.481484    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:49.481499    1805 conversation.go:950] Unable to retrieve excluded files for request #2612: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:50.492815    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:50.492862    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:50.492898    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:50.492916    1805 conversation.go:950] Unable to retrieve excluded files for request #2614: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:51.752397    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:51.752449    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:51.752490    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:51.752506    1805 conversation.go:950] Unable to retrieve excluded files for request #2618: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:52.557926    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:52.557976    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:52.558017    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:52.558031    1805 conversation.go:950] Unable to retrieve excluded files for request #2621: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:53.826007    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:53.826086    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:53.826127    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:53.826140    1805 conversation.go:950] Unable to retrieve excluded files for request #2624: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:58.077484    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:58.077544    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:58.077586    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:58.077600    1805 conversation.go:950] Unable to retrieve excluded files for request #2627: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:58.993008    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:58.993077    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:58.993121    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:58.993134    1805 conversation.go:950] Unable to retrieve excluded files for request #2631: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:55:59.228146    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:55:59.228192    1805 document.go:448] OtherEditType (DELETE), returning ReasonRecentlyEdited
I0413 00:55:59.228227    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:55:59.228246    1805 conversation.go:950] Unable to retrieve excluded files for request #2633: open /home/apoorvtripathi537/.aiexclude: no such file or directory
W0413 00:56:01.286755    1805 document.go:268] Error computing chars added only: getting byte offset for end of change range: invalid column number
Completion Provider - completion # 148 - New completion requested from language client at position {"line":143,"character":19}, triggerKind=1
I0413 00:56:01.321923    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:01.382253    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:01.382300    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:01.382357    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:01.382371    1805 conversation.go:950] Unable to retrieve excluded files for request #2638: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:01.550304    1805 handler.go:159] cancel was requested for: 2637, needs to be canceled: true
Completion Provider - completion # 149 - New completion requested from language client at position {"line":143,"character":20}, triggerKind=1
I0413 00:56:01.577845    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:01.647610    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:01.647650    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:01.647689    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:01.647704    1805 conversation.go:950] Unable to retrieve excluded files for request #2641: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:01.879032    1805 completion.go:236] Inline suggestion requested (request #2640): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:143 Character:20}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:149}
I0413 00:56:01.881239    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","DELETE","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            # return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            audio_converted_to_text = sample_recognize(data)\r\n            \r\n\r\n\r\n            final_prompt = pdf_text + prompt + audio_converted_to_text\r\n            print(pd"},{"isSelected":true},{"content":")\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-5f9645f2-1627-403a-b9bc-52ed1c7f9b7c"}
I0413 00:56:02.077791    1805 handler.go:159] cancel was requested for: 2640, needs to be canceled: true
Completion Provider - completion # 150 - New completion requested from language client at position {"line":143,"character":21}, triggerKind=1
I0413 00:56:02.109707    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:02.121540    1805 handler.go:159] cancel was requested for: 2644, needs to be canceled: true
Completion Provider - completion # 151 - New completion requested from language client at position {"line":143,"character":21}, triggerKind=1
I0413 00:56:02.173302    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:02.175503    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:02.175546    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:02.175595    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:02.175610    1805 conversation.go:950] Unable to retrieve excluded files for request #2647: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:02.474445    1805 completion.go:236] Inline suggestion requested (request #2646): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:143 Character:21}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:151}
I0413 00:56:02.476607    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"codeLanguage":"python","filePath":"/home/apoorvtripathi537/main.py","includedReason":"CURRENTLY_OPEN","lastEdit":["DELETE","DELETE","ADD","ADD","ADD"],"segments":[{"content":"from datetime import datetime\r\n\r\nfrom flask import Flask, render_template, request, redirect, url_for, send_file, send_from_directory\r\nfrom werkzeug.utils import secure_filename\r\n\r\nimport os\r\nimport vertexai\r\nimport pdfplumber\r\nfrom google.protobuf import wrappers_pb2\r\nfrom vertexai.generative_models import GenerativeModel, Part\r\nfrom google.cloud import texttospeech_v1\r\nfrom google.cloud import speech\r\n\r\nproject_id = \"bookai-456604\"\r\nvertexai.init(project=project_id, location=\"us-central1\")\r\nmodel = GenerativeModel(\"gemini-2.0-flash-001\")\r\nprompt = \"\"\"\r\nbased on the above text answer the following question: --\r\n\"\"\"\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n# Configure upload folder\r\nUPLOAD_FOLDER = 'uploads'\r\nALLOWED_EXTENSIONS = {'wav'}\r\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\r\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\r\n\r\n\r\n\r\nspeech_client = speech.SpeechClient()  # for speech-to-text\r\ntts_client = texttospeech_v1.TextToSpeechClient()  # for text-to-speech\r\n\r\ndef sample_recognize(content):\r\n  audio=speech.RecognitionAudio(content=content)\r\n\r\n  config=speech.RecognitionConfig(\r\n  # encoding=speech.RecognitionConfig.AudioEncoding.MP3,\r\n  # sample_rate_hertz=24000,\r\n  language_code=\"en-US\",\r\n  model=\"latest_long\",\r\n  audio_channel_count=1,\r\n  enable_word_confidence=True,\r\n  enable_word_time_offsets=True,\r\n  )\r\n\r\n  operation=speech_client.long_running_recognize(config=config, audio=audio)\r\n\r\n  response=operation.result(timeout=90)\r\n\r\n  txt = ''\r\n  for result in response.results:\r\n    txt = txt + result.alternatives[0].transcript + '\\n'\r\n  print(txt)\r\n  return txt\r\n\r\n\r\ndef sample_synthesize_speech(text=None, ssml=None):\r\n    input = texttospeech_v1.SynthesisInput()\r\n    if ssml:\r\n      input.ssml = ssml\r\n    else:\r\n      input.text = text\r\n\r\n    voice = texttospeech_v1.VoiceSelectionParams()\r\n    voice.language_code = \"en-UK\"\r\n    # voice.ssml_gender = \"MALE\"\r\n\r\n    audio_config = texttospeech_v1.AudioConfig()\r\n    audio_config.audio_encoding = \"LINEAR16\"\r\n\r\n    request = texttospeech_v1.SynthesizeSpeechRequest(\r\n        input=input,\r\n        voice=voice,\r\n        audio_config=audio_config,\r\n    )\r\n\r\n    response = tts_client.synthesize_speech(request=request)\r\n\r\n    return response.audio_content\r\n\r\ndef allowed_file(filename):\r\n    return '.' in filename and \\\r\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\r\n\r\n\r\ndef get_files():\r\n    files = []\r\n    for filename in os.listdir(UPLOAD_FOLDER):\r\n        if allowed_file(filename):\r\n            files.append(filename)\r\n            print(filename)\r\n    files.sort(reverse=True)\r\n    return files\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    files = get_files()\r\n    return render_template('index.html', files=files)\r\n\r\n\r\n@app.route('/upload', methods=['POST'])\r\ndef upload_file():\r\n    pdf_text = \"\"\r\n    if 'pdf_file' in request.files:\r\n        pdf_file = request.files['pdf_file']\r\n        if pdf_file.filename.endswith('.pdf'):\r\n            filename = secure_filename(pdf_file.filename)\r\n            pdf_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            pdf_file.save(pdf_path)\r\n\r\n            text = \"\"\r\n            with pdfplumber.open(pdf_path) as doc:\r\n                for page in doc.pages:\r\n                    pdf_text += page.extract_text()\r\n\r\n            txt_filename = os.path.splitext(filename)[0] + '.txt'\r\n            txt_path = os.path.join(app.config['UPLOAD_FOLDER'], txt_filename)\r\n            with open(pdf_path, 'w', encoding='utf-8') as f:\r\n                f.write(pdf_text)\r\n            print(\"PDF uploaded:\", filename)\r\n            print(\"PDF text:\", pdf_text)\r\n            # return redirect('/')\r\n\r\n    if 'audio_data' in request.files:\r\n        file = request.files['audio_data']\r\n        if file.filename == '':\r\n            return redirect(request.url)\r\n        if file:\r\n            filename = datetime.now().strftime(\"%Y%m%d-%I%M%S%p\") + '.wav'\r\n            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n            file.save(file_path)\r\n\r\n            with open(file_path, 'rb') as f:\r\n                data = f.read()\r\n\r\n            audio_converted_to_text = sample_recognize(data)\r\n            \r\n\r\n\r\n            final_prompt = pdf_text + prompt + audio_converted_to_text\r\n            print(pdf"},{"isSelected":true},{"content":")\r\n            \r\n            contents = [final_prompt]\r\n            response = model.generate_content(contents)\r\n            text = response.text\r\n\r\n            print(text)\r\n\r\n            with open(file_path + '.txt', 'w') as f:\r\n                f.write(text)\r\n\r\n    return redirect('/')\r\n\r\n\r\n\r\n\r\n@app.route('/upload/\u003cfilename\u003e')\r\ndef get_file(filename):\r\n    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\r\n    return send_file(file_path)\r\n\r\n@app.route('/script.js',methods=['GET'])\r\ndef scripts_js():\r\n    return send_file('./script.js')\r\n\r\n\r\n@app.route('/uploads/\u003cfilename\u003e')\r\ndef uploaded_file(filename):\r\n    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run(debug=True)\r\n\r\n"}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-fbb5e698-b0eb-4db8-83c8-b357e71b3186"}
I0413 00:56:02.750837    1805 completion.go:609] Code complete response for request #2646 after post-processing: &{Suggestions:[{Content:_text)
            print(final_prompt Citations:[] PromptCitations:[] Score:-2.126661 Telemetry:{CommentLines:<nil>}}] TraceID:8b5a58171c19b0bc RequestID:cloudcode-740584268-fbb5e698-b0eb-4db8-83c8-b357e71b3186 ServerTiming:gfet5t7;dur=226, gfet4t7; dur=272 NetPlusServerTiming:274.134663ms FromCache:false Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 151 - Completion result obtained from language client
Completion Provider - completion # 152 - New completion requested from language client at position {"line":143,"character":21}, triggerKind=1
I0413 00:56:03.596595    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:03.807960    1805 handler.go:159] cancel was requested for: 2651, needs to be canceled: true
Completion Provider - completion # 153 - New completion requested from language client at position {"line":143,"character":21}, triggerKind=1
I0413 00:56:03.837530    1805 document.go:448] OtherEditType (ADD), returning ReasonRecentlyEdited
I0413 00:56:04.138630    1805 completion.go:236] Inline suggestion requested (request #2653): {TextDocumentPositionParams:{TextDocument:{URI:file:///home/apoorvtripathi537/main.py} Position:{Line:143 Character:21}} TriggerMode:0 IDESessionIndex:20250413_1 CompletionIndex:153}
I0413 00:56:04.140367    1805 client.go:139] CompleteCode response from cache: &{Suggestions:[{Content:_text)
            print(final_prompt Citations:[] PromptCitations:[] Score:-2.126661 Telemetry:{CommentLines:<nil>}}] TraceID:8b5a58171c19b0bc RequestID:cloudcode-740584268-fbb5e698-b0eb-4db8-83c8-b357e71b3186 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
I0413 00:56:04.140442    1805 completion.go:609] Code complete response for request #2653 after post-processing: &{Suggestions:[{Content:_text)
            print(final_prompt Citations:[] PromptCitations:[] Score:-2.126661 Telemetry:{CommentLines:<nil>}}] TraceID:8b5a58171c19b0bc RequestID:cloudcode-740584268-fbb5e698-b0eb-4db8-83c8-b357e71b3186 ServerTiming: NetPlusServerTiming:0s FromCache:true Typeover:false TriggerMode:0 ProcessingDetails:{RagStatus:RAG_NOT_FOUND AtlasExperience:4e3ec00c79913174 PromptID: CompletionMethod:COMPLETION ExperimentDebugStringFingerprint: ModelURI: ChatClientIDHash:}}
Received completion response from language server with 1 valid responses and 0 responses that have been filtered out
Completion Provider - completion # 153 - Completion result obtained from language client
Completion Provider - completion # 153 - Typed over previous completion
I0413 00:56:04.875972    1805 command.go:160] AcceptanceEvent: {"requestID":"cloudcode-740584268-fbb5e698-b0eb-4db8-83c8-b357e71b3186","acceptedSuggestion":"_text)\n            print(final_prompt","acceptedChars":5,"partial":true}
I0413 00:56:04.944289    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:04.944329    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:04.944363    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:04.944373    1805 conversation.go:950] Unable to retrieve excluded files for request #2656: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:05.977935    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:05.977978    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:05.978015    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:05.978031    1805 conversation.go:950] Unable to retrieve excluded files for request #2660: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:06.723232    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:06.723286    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:06.723334    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:06.723349    1805 conversation.go:950] Unable to retrieve excluded files for request #2663: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:37.776571    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 00:56:46.552625    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:46.552702    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:46.552749    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:46.552765    1805 conversation.go:950] Unable to retrieve excluded files for request #2665: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:47.514649    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:47.514717    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:47.514757    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:47.514768    1805 conversation.go:950] Unable to retrieve excluded files for request #2667: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:47.875616    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:47.875669    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:47.875708    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:47.875723    1805 conversation.go:950] Unable to retrieve excluded files for request #2681: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:48.044862    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:48.044961    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:48.045014    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:48.045025    1805 conversation.go:950] Unable to retrieve excluded files for request #2685: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:49.177907    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:49.177946    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:49.177983    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:49.177993    1805 conversation.go:950] Unable to retrieve excluded files for request #2711: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:49.376017    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:49.376084    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:49.376141    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:49.376156    1805 conversation.go:950] Unable to retrieve excluded files for request #2713: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:56:51.874035    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:56:51.874141    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:56:51.874190    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:56:51.874207    1805 conversation.go:950] Unable to retrieve excluded files for request #2717: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:57:21.992352    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:57:21.992521    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:57:21.992586    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:57:21.992610    1805 conversation.go:950] Unable to retrieve excluded files for request #2724: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:57:23.535133    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:57:23.535178    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:57:23.535216    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:57:23.535231    1805 conversation.go:950] Unable to retrieve excluded files for request #2727: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:57:26.340304    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:57:26.340348    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:57:26.340387    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:57:26.340398    1805 conversation.go:950] Unable to retrieve excluded files for request #2730: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:58:27.882176    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 00:58:27.882232    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 00:58:27.882276    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 00:58:27.882287    1805 conversation.go:950] Unable to retrieve excluded files for request #2732: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 00:58:37.776124    1805 life_cycle.go:277] codeReportBasicEvery: recomputing codereportbasic metric
I0413 01:00:02.014008    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:02.014076    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:02.014112    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:02.014122    1805 conversation.go:950] Unable to retrieve excluded files for request #2738: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:03.108614    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:03.108664    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:03.108713    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:03.108726    1805 conversation.go:950] Unable to retrieve excluded files for request #2742: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:16.170602    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:16.170641    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:16.170674    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:16.170684    1805 conversation.go:950] Unable to retrieve excluded files for request #2746: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:30.047828    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:30.047880    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:30.047921    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:30.047937    1805 conversation.go:950] Unable to retrieve excluded files for request #2751: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:30.257303    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:30.257343    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:30.257391    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:30.257404    1805 conversation.go:950] Unable to retrieve excluded files for request #2753: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:42.691920    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:42.691966    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:42.692011    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:42.692027    1805 conversation.go:950] Unable to retrieve excluded files for request #2763: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:42.922562    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:42.922611    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:42.922650    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:42.922663    1805 conversation.go:950] Unable to retrieve excluded files for request #2765: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:44.997424    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:44.997468    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:44.997507    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:44.997520    1805 conversation.go:950] Unable to retrieve excluded files for request #2770: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:45.246532    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:45.246571    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:45.246776    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:45.246862    1805 conversation.go:950] Unable to retrieve excluded files for request #2772: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:47.764324    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:47.764372    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:47.764410    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:47.764430    1805 conversation.go:950] Unable to retrieve excluded files for request #2777: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:49.031595    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:49.031643    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:49.031680    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:49.031694    1805 conversation.go:950] Unable to retrieve excluded files for request #2781: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:49.246219    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:49.246258    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:49.246296    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:49.246310    1805 conversation.go:950] Unable to retrieve excluded files for request #2783: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:52.476587    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:52.476636    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:52.476684    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:52.476696    1805 conversation.go:950] Unable to retrieve excluded files for request #2787: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:52.749218    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:52.749256    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:52.749302    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:52.749316    1805 conversation.go:950] Unable to retrieve excluded files for request #2790: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:58.045716    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:58.045770    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:58.045816    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:58.045830    1805 conversation.go:950] Unable to retrieve excluded files for request #2796: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:00:59.441241    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:00:59.441282    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:00:59.441329    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:00:59.441345    1805 conversation.go:950] Unable to retrieve excluded files for request #2799: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:00.646680    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:00.646756    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:00.646797    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:00.646813    1805 conversation.go:950] Unable to retrieve excluded files for request #2802: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:01.473145    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:01.473186    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:01.473220    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:01.473229    1805 conversation.go:950] Unable to retrieve excluded files for request #2806: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:01.730405    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:01.730455    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:01.730523    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:01.730537    1805 conversation.go:950] Unable to retrieve excluded files for request #2808: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:05.194213    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:05.194263    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:05.194307    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:05.194322    1805 conversation.go:950] Unable to retrieve excluded files for request #2814: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:05.407655    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:05.407712    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:05.407753    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:05.407768    1805 conversation.go:950] Unable to retrieve excluded files for request #2816: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:06.502074    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:06.502129    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:06.502176    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:06.502190    1805 conversation.go:950] Unable to retrieve excluded files for request #2821: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:01:06.730425    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:01:06.730471    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:01:06.730512    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:01:06.730526    1805 conversation.go:950] Unable to retrieve excluded files for request #2823: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:02:21.633676    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:02:21.633727    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:02:21.633773    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:02:21.633788    1805 conversation.go:950] Unable to retrieve excluded files for request #2828: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:02:22.792914    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:02:22.792967    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:02:22.793006    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:02:22.793023    1805 conversation.go:950] Unable to retrieve excluded files for request #2832: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:02:23.031127    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:02:23.031179    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:02:23.031228    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:02:23.031243    1805 conversation.go:950] Unable to retrieve excluded files for request #2834: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:02:57.785876    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:02:57.785926    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:02:57.785985    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:02:57.785998    1805 conversation.go:950] Unable to retrieve excluded files for request #2846: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:02:58.022678    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:02:58.022733    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:02:58.022783    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:02:58.022796    1805 conversation.go:950] Unable to retrieve excluded files for request #2848: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:01.520969    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:01.521020    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:03:01.521126    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:01.521141    1805 conversation.go:950] Unable to retrieve excluded files for request #2852: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:01.729407    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:01.729451    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:03:01.729488    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:01.729498    1805 conversation.go:950] Unable to retrieve excluded files for request #2854: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:03.519729    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:03.519771    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:03:03.519814    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:03.519824    1805 conversation.go:950] Unable to retrieve excluded files for request #2858: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:03.725306    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:03.725383    1805 document.go:448] OtherEditType (COMPLETION), returning ReasonRecentlyEdited
I0413 01:03:03.725423    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:03.725438    1805 conversation.go:950] Unable to retrieve excluded files for request #2860: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:05.024327    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:05.024367    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:05.024399    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:05.024409    1805 conversation.go:950] Unable to retrieve excluded files for request #2863: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:05.985310    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:05.985356    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:05.985397    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:05.985411    1805 conversation.go:950] Unable to retrieve excluded files for request #2868: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:06.789921    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:06.789963    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:06.790023    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:06.790038    1805 conversation.go:950] Unable to retrieve excluded files for request #2872: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:07.544956    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:07.545004    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:07.545266    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:07.545287    1805 conversation.go:950] Unable to retrieve excluded files for request #2875: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:37.776525    1805 life_cycle.go:313] codeReportEvery: recomputing codereport metric
I0413 01:03:43.267174    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:43.267234    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:43.267281    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:43.267293    1805 conversation.go:950] Unable to retrieve excluded files for request #2880: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:43.482099    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:43.482147    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:43.482189    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:43.482204    1805 conversation.go:950] Unable to retrieve excluded files for request #2882: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:49.990644    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:03:49.990723    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:03:49.990780    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:03:49.990794    1805 conversation.go:950] Unable to retrieve excluded files for request #2885: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:03:51.067147    1805 handler.go:159] cancel was requested for: 2886, needs to be canceled: false
I0413 01:03:51.067172    1805 handler.go:163] cancel requested for 2886 but not found
I0413 01:04:39.111475    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:04:39.111544    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:04:39.111595    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:04:39.111696    1805 conversation.go:950] Unable to retrieve excluded files for request #2888: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:04:40.008365    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:04:40.008428    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:04:40.008493    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:04:40.008509    1805 conversation.go:950] Unable to retrieve excluded files for request #2890: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:04:40.740827    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:04:40.740867    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:04:40.740903    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:04:40.740913    1805 conversation.go:950] Unable to retrieve excluded files for request #2893: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:04:41.796800    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:04:41.796846    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:04:41.796881    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:04:41.796891    1805 conversation.go:950] Unable to retrieve excluded files for request #2895: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:04:43.168783    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:04:43.168850    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:04:43.168898    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:04:43.168914    1805 conversation.go:950] Unable to retrieve excluded files for request #2898: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:07.850517    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:07.850560    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:07.850603    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:07.850619    1805 conversation.go:950] Unable to retrieve excluded files for request #2901: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:08.283414    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:08.283479    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:08.283524    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:08.283535    1805 conversation.go:950] Unable to retrieve excluded files for request #2910: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:08.436769    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:08.436823    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:08.436869    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:08.436884    1805 conversation.go:950] Unable to retrieve excluded files for request #2912: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:08.927758    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:08.927811    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:08.928036    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:08.928110    1805 conversation.go:950] Unable to retrieve excluded files for request #2930: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:09.584595    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:09.584707    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:09.584755    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:09.584770    1805 conversation.go:950] Unable to retrieve excluded files for request #2948: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:10.045902    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:10.046166    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:10.046274    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:10.046300    1805 conversation.go:950] Unable to retrieve excluded files for request #2952: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:05:10.446140    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:05:10.446196    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:05:10.446245    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:05:10.446256    1805 conversation.go:950] Unable to retrieve excluded files for request #2955: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:07:17.881576    1805 conversation.go:905] Starting getChatIDEContext with detected intent: 
I0413 01:07:17.881638    1805 document.go:448] OtherEditType (UNKNOWN_EDIT), returning ReasonRecentlyEdited
I0413 01:07:17.881692    1805 ide_context.go:117] Unable to read file at /home/apoorvtripathi537/.aiexclude
/home/apoorvtripathi537
file:///home/apoorvtripathi537
I0413 01:07:17.881774    1805 conversation.go:950] Unable to retrieve excluded files for request #2958: open /home/apoorvtripathi537/.aiexclude: no such file or directory
I0413 01:08:26.015381    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:26.015423    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:26.015441    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:26.015462    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:26.015479    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:26.015490    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:26.015504    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:26.015531    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:26.015545    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:26.015573    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:26.015595    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:26.015607    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:26.015626    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:26.015645    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:26.015656    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:26.015670    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:26.015684    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:26.015708    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:26.015723    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:26.015737    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:26.015753    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:26.015764    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:26.015777    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:26.015798    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:26.015813    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:26.015831    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:26.015849    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:26.015873    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:26.016187    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:26.016208    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:26.016225    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:26.016244    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:26.016261    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:26.016271    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:26.016284    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:26.016309    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:26.016321    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:26.016343    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:26.016381    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:26.016394    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:26.016410    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:26.016423    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:26.016433    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:26.016445    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:26.016457    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:26.016478    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:26.016491    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:26.016507    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:26.016523    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:26.016535    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:26.016548    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:26.016569    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:26.016583    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:26.016601    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:26.016619    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:26.016640    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:26.016701    1805 tier.go:17] Received tier configuration request: {ProjectID:cloudshell-gca UserDefinedCloudaicompanionProject:true}
I0413 01:08:26.038557    1805 configuration.go:185] product updateChannel will be used
I0413 01:08:26.038624    1805 configuration.go:686] language thresholds: map[]
I0413 01:08:26.038641    1805 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 01:08:26.038659    1805 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc00200378d StopSequences:map[] DataFilePromptLines:0}
I0413 01:08:26.038691    1805 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc0020037ad StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 01:08:26.038730    1805 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 01:08:26.038743    1805 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 01:08:26.038750    1805 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:true enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 01:08:26.038788    1805 configuration.go:293] Configured settings for canCancelRequests: true
I0413 01:08:26.038795    1805 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 01:08:26.043560    1805 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:26.043586    1805 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:26.043597    1805 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:26.043610    1805 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:26.043621    1805 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:26.043630    1805 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:26.043639    1805 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:26.043656    1805 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:26.043664    1805 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:26.043681    1805 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:26.043694    1805 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:26.043702    1805 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:26.043714    1805 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:26.043724    1805 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:26.043731    1805 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:26.043740    1805 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:26.043748    1805 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:26.043763    1805 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:26.043771    1805 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:26.043780    1805 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:26.043790    1805 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:26.043798    1805 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:26.043805    1805 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:26.043818    1805 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:26.043827    1805 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:26.043840    1805 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:26.043851    1805 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:26.043865    1805 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:26.048268    1805 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"segments":[{"content":"Code Assist healthcheck id: 5cff7cea-f3b6-4a3c-a3b5-e363620945ea\nPi = "},{"isSelected":true},{}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-4748bf1b-758e-440d-b798-7de1e07232a7"}
[Error - 1:08:31 AM] Server process exited with code 0.
I0413 01:08:31.743213    6857 serve.go:43] cloudcode_cli (Mar 25 2025 19:59:47 -0700, cl:740584268 baseline:740583863)
I0413 01:08:31.743272    6857 serve.go:44] Command line: ["/home/apoorvtripathi537/.cache/cloud-code/cloudcode_cli/cloudcode_cli/413fde1b/cloudcode_cli" "duet" "-logtostderr"]
I0413 01:08:31.744904    6857 life_cycle.go:182] Initializing. Architecture: "amd64", Operating system: "linux"
I0413 01:08:31.871340    6857 configuration.go:185] product updateChannel will be used
I0413 01:08:31.871405    6857 configuration.go:686] language thresholds: map[]
I0413 01:08:31.871422    6857 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 01:08:31.871442    6857 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000b0530d StopSequences:map[] DataFilePromptLines:0}
I0413 01:08:31.871470    6857 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000b0532d StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 01:08:31.871564    6857 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 01:08:31.871672    6857 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 01:08:31.871696    6857 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 01:08:31.871762    6857 configuration.go:293] Configured settings for canCancelRequests: true
I0413 01:08:31.871869    6857 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 01:08:31.890630    6857 handler.go:159] cancel was requested for: 1, needs to be canceled: true
I0413 01:08:32.549647    6857 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:32.549688    6857 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:32.549704    6857 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:32.549720    6857 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:32.549731    6857 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:32.549746    6857 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:32.549760    6857 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:32.549773    6857 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:32.549795    6857 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:32.549822    6857 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:32.549837    6857 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:32.549848    6857 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:32.549861    6857 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:32.549874    6857 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:32.549896    6857 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:32.549913    6857 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:32.549923    6857 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:32.549933    6857 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:32.549949    6857 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:32.549962    6857 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:32.549983    6857 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:32.549998    6857 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:32.550010    6857 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:32.550022    6857 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:32.550036    6857 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:32.550192    6857 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:32.550242    6857 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:32.550274    6857 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:32.550396    6857 tier.go:17] Received tier configuration request: {ProjectID:cloudshell-gca UserDefinedCloudaicompanionProject:true}
I0413 01:08:32.556038    6857 configuration.go:185] product updateChannel will be used
I0413 01:08:32.556108    6857 configuration.go:686] language thresholds: map[]
I0413 01:08:32.556123    6857 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 01:08:32.556140    6857 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000f38f3d StopSequences:map[] DataFilePromptLines:0}
I0413 01:08:32.556165    6857 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc000f38f5d StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 01:08:32.556199    6857 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 01:08:32.556209    6857 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 01:08:32.556216    6857 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:true enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 01:08:32.556248    6857 configuration.go:293] Configured settings for canCancelRequests: true
I0413 01:08:32.556255    6857 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 01:08:32.557009    6857 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:32.557065    6857 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:32.557077    6857 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:32.557089    6857 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:32.557097    6857 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:32.557110    6857 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:32.557121    6857 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:32.557130    6857 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:32.557146    6857 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:32.557166    6857 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:32.557176    6857 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:32.557183    6857 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:32.557192    6857 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:32.557204    6857 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:32.557236    6857 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:32.557262    6857 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:32.557271    6857 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:32.557278    6857 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:32.557290    6857 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:32.557301    6857 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:32.557315    6857 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:32.557326    6857 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:32.557334    6857 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:32.557341    6857 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:32.557350    6857 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:32.557363    6857 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:32.557375    6857 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:32.557389    6857 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:32.558883    6857 cloudcode.go:45] Using Cloud Code API
I0413 01:08:32.561413    6857 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"segments":[{"content":"Code Assist healthcheck id: cc49bc48-4b01-421e-8098-ae313762ad19\nPi = "},{"isSelected":true},{}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-f21d7ac7-2746-470e-85bb-e69aaeed329d"}
I0413 01:08:32.953929    6857 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:32.953954    6857 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:32.953974    6857 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:32.953992    6857 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:32.954000    6857 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:32.954011    6857 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:32.954027    6857 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:32.954037    6857 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:32.954090    6857 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:32.954111    6857 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:32.954121    6857 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:32.954128    6857 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:32.954136    6857 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:32.954147    6857 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:32.954173    6857 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:32.954191    6857 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:32.954198    6857 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:32.954205    6857 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:32.954216    6857 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:32.954225    6857 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:32.954240    6857 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:32.954346    6857 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:32.954371    6857 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:32.954385    6857 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:32.954402    6857 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:32.954427    6857 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:32.954447    6857 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:32.954470    6857 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:33.006745    6857 tier.go:17] Received tier configuration request: {ProjectID:cloudshell-gca UserDefinedCloudaicompanionProject:true}
I0413 01:08:33.018619    6857 configuration.go:185] product updateChannel will be used
I0413 01:08:33.018682    6857 configuration.go:686] language thresholds: map[]
I0413 01:08:33.018700    6857 configuration.go:630] dataFileExtensions array: [.csv .tsv .jsonl]
I0413 01:08:33.018717    6857 configuration.go:897] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc00195a5bd StopSequences:map[] DataFilePromptLines:0}
I0413 01:08:33.018741    6857 configuration.go:897] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0xc00195a5dd StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I0413 01:08:33.018774    6857 configuration.go:279] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I0413 01:08:33.018786    6857 configuration.go:287] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"cloudshell-gca","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableChatStreaming":false}
I0413 01:08:33.018794    6857 configuration.go:291] Configured settings for opts: &{trace:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:300000000 throttle:100000000 debouncedAfterFetching:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[]} contextExclusionFile:.aiexclude chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableChatStreaming:true enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false ragLRerankByLangBoost:0 raglCoLocated:20 raglTotalFiles:250 raglFileLimit:4194304 raglIncludeDocFiles:false raglIncludeUnitTestFile:false raglMaxFileSearchDepth:1 substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] raglTopKTestFilesToInclude:0 raglTopKDocFilesToInclude:0 raglTokenizationAlgorithm:whitespace raglEnableWaldFileSelection:false raglWaldMaxFileSearchDepth:0}
I0413 01:08:33.018826    6857 configuration.go:293] Configured settings for canCancelRequests: true
I0413 01:08:33.018834    6857 configuration.go:295] Configured settings for contextPromptOpts: &{Endpoint:}
I0413 01:08:33.019887    6857 experiments.go:200] Applied experiment flag "DuetAiLocalRag__include_unit_test_files" to includeUnitTestFile with value false
I0413 01:08:33.019925    6857 experiments.go:156] Applied experiment flag "DuetAiLocalRag__enable_local_rag_chat" to enableRAGLChat with value false
I0413 01:08:33.019936    6857 experiments.go:136] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounced_after_fetching" to completionOpts.debouncedAfterFetching with value false
I0413 01:08:33.019947    6857 experiments.go:128] Applied experiment flag "DuetAiCloudCodeAPI__enable_cloudcode_api" to useCloudCodeAPI with value true
I0413 01:08:33.019955    6857 experiments.go:152] Applied experiment flag "DuetAiLocalRag__enable_local_rag" to enableRAGL with value false
I0413 01:08:33.019965    6857 experiments.go:196] Applied experiment flag "DuetAiLocalRag__include_doc_files" to includeDocFiles with value false
I0413 01:08:33.019975    6857 experiments.go:145] Applied experiment flag "GcaCitationBlock__enable_citation_block" to cloudCodeOpts.EnableAdminCitationBlock with value false
I0413 01:08:33.019984    6857 experiments.go:124] Applied experiment flag "Chat__enable_chat_streaming" to chat.enableChatStreaming with value true
I0413 01:08:33.019999    6857 experiments.go:160] Applied experiment flag "DuetAiLocalRag__enable_local_rag_completion" to enableRAGLCompletion with value false
I0413 01:08:33.020017    6857 experiments.go:228] Applied experiment flag "DuetAiLocalRag__local_rag_tokenization_algorithm" to localRagTokenizationAlgorithm with value whitespace
I0413 01:08:33.020033    6857 experiments.go:184] Applied experiment flag "DuetAiLocalRag__otherfiles_chat_limit" to otherFilesChatLimit with value 100
I0413 01:08:33.020068    6857 experiments.go:164] Applied experiment flag "DuetAiLocalRag__otherfiles_generation_limit" to otherFilesGenerationLimit with value 40
I0413 01:08:33.020085    6857 experiments.go:116] Applied experiment flag "Chat__chat_context_window_size" to chat.contextWindowSize with value -1
I0413 01:08:33.020102    6857 experiments.go:180] Applied experiment flag "DuetAiLocalRag__otherfiles_completion_limit" to otherFilesCompletionLimit with value 15
I0413 01:08:33.020123    6857 experiments.go:216] Applied experiment flag "DuetAiLocalRag__top_k_doc_files_to_include" to topKDocFilesToInclude with value 2
I0413 01:08:33.020141    6857 experiments.go:220] Applied experiment flag "DuetAiLocalRag__top_k_test_files_to_include" to topKTestFilesToInclude with value 2
I0413 01:08:33.020153    6857 experiments.go:120] Applied experiment flag "Chat__fca_chat_context_window_size" to chat.fcaContextWindowSize with value 2100000
I0413 01:08:33.020165    6857 experiments.go:112] Applied experiment flag "DuetAiGeneration__codeGeneration_context_window_size" to otherFilesGenerationSizeLimit with value 64000
I0413 01:08:33.020182    6857 experiments.go:204] Applied experiment flag "DuetAiLocalRag__max_file_search_depth" to maxFileSearchDepth with value 2
I0413 01:08:33.020199    6857 experiments.go:132] Applied experiment flag "DuetAiMendelOverrides__inlineSuggestions_debounceMs" to completionOpts.debounce with value 300
I0413 01:08:33.020221    6857 experiments.go:224] Applied experiment flag "DuetAiLocalRag__local_rag_reranking_by_language" to localRAGRerankingByLanguageParam with value 0
I0413 01:08:33.020239    6857 experiments.go:168] Applied experiment flag "DuetAiLocalRag__cache_co_located" to coLocated with value 20
I0413 01:08:33.020254    6857 experiments.go:172] Applied experiment flag "DuetAiLocalRag__cache_file_limit" to fileLimit with value 4.1943e+06
I0413 01:08:33.020269    6857 experiments.go:176] Applied experiment flag "DuetAiLocalRag__cache_total_files" to totalFiles with value 250
I0413 01:08:33.020285    6857 experiments.go:188] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_completion" to multiQueryTailNS with value []
I0413 01:08:33.020302    6857 experiments.go:192] Extracted experiment flag "DuetAiRemoteRag__multi_query_tail_ns_for_generation" to multiQueryTailNS with value []
I0413 01:08:33.020319    6857 experiments.go:208] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_doc_prompts" to substringsToIdentifyDocPrompts with value [document comment]
I0413 01:08:33.020340    6857 experiments.go:212] Applied experiment flag "DuetAiLocalRag__substrings_to_identify_test_prompts" to substringsToIdentifyTestPrompts with value [test]
I0413 01:08:33.021463    6857 client.go:442] CompleteCode request: {"enablePromptEnhancement":true,"ideContext":{"currentFile":{"segments":[{"content":"Code Assist healthcheck id: dc27fd73-50c6-4cd8-90b8-ebe2a3ceffb4\nPi = "},{"isSelected":true},{}]}},"metadata":{"ideName":"Code OSS for Cloud Shell","ideType":"CLOUD_SHELL","ideVersion":"1.94.2-cde","platform":"LINUX_AMD64","pluginType":"CLOUD_CODE","pluginVersion":"2.30.0"},"project":"cloudshell-gca","requestId":"cloudcode-740584268-ab424d63-0b04-4edc-9497-ba0527f091aa"}
